var Ko=Object.defineProperty;var Ro=(c,r,s)=>r in c?Ko(c,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[r]=s;var bi=(c,r,s)=>Ro(c,typeof r!="symbol"?r+"":r,s);import{B as Ao,s as Ct,d as B,Z as zt,c as se,e as R,w as M,f as H,g as oe,j as me,k as z,l as ve,q as Ji,n as ze,C as at,U as vt,_ as Me,$ as Bo,a0 as Mo,b as Ue,i as No,h as le,t as ce,a1 as Wn,a2 as Gn,a3 as $i,m as $n,a4 as qo,y as Nr,a5 as qr,r as Zi,x as Xn,P as Yt,o as wi,a6 as ki,a7 as Fo}from"../chunks/BIM6er8B.js";import{S as Et,i as It,t as Ke,a as Ee,g as Tt,c as St,f as Ne,h as Fr,d as Ot,m as Pt,e as Dt,b as jt}from"../chunks/CLOSa3QW.js";import{p as ht}from"../chunks/CmP4wuhm.js";import{d as xi,w as Qn}from"../chunks/BSzwmYPV.js";function $e(c){return(c==null?void 0:c.length)!==void 0?c:Array.from(c)}function qe(c,{delay:r=0,duration:s=400,easing:a=Ao}={}){const f=+getComputedStyle(c).opacity;return{delay:r,duration:s,easing:a,css:l=>`opacity: ${l*f}`}}var ot=(c=>(c[c.ONE_MINUTE=60]="ONE_MINUTE",c[c.TWO_MINUTES=120]="TWO_MINUTES",c[c.FIVE_MINUTES=300]="FIVE_MINUTES",c[c.TEN_MINUTES=600]="TEN_MINUTES",c[c.FIFTEEN_MINUTES=900]="FIFTEEN_MINUTES",c[c.THIRTY_MINUTES=1800]="THIRTY_MINUTES",c[c.SIXTY_MINUTES=3600]="SIXTY_MINUTES",c))(ot||{});const Br={60:"1 minute",120:"2 minutes",300:"5 minutes",600:"10 minutes",900:"15 minutes",1800:"30 minutes",3600:"60 minutes"};var Ti=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lo(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var eo={exports:{}};(function(c,r){(function(s,a){c.exports=a()})(Ti,function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(e,t)},a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function f(e,t,n){for(var i,o=0,u=t.length;o<u;o++)!i&&o in t||((i=i||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ti,d=Object.keys,y=Array.isArray;function O(e,t){return typeof t!="object"||d(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||l.Promise||(l.Promise=Promise);var _=Object.getPrototypeOf,p={}.hasOwnProperty;function I(e,t){return p.call(e,t)}function v(e,t){typeof t=="function"&&(t=t(_(e))),(typeof Reflect>"u"?d:Reflect.ownKeys)(t).forEach(function(n){V(e,n,t[n])})}var A=Object.defineProperty;function V(e,t,n,i){A(e,t,O(n&&I(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function $(e){return{from:function(t){return e.prototype=Object.create(t.prototype),V(e.prototype,"constructor",e),{extend:v.bind(null,e.prototype)}}}}var J=Object.getOwnPropertyDescriptor,G=[].slice;function ge(e,t,n){return G.call(e,t,n)}function X(e,t){return t(e)}function Z(e){if(!e)throw new Error("Assertion Failed")}function fe(e){l.setImmediate?setImmediate(e):setTimeout(e,0)}function ae(e,t){if(typeof t=="string"&&I(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],i=0,o=t.length;i<o;++i){var u=ae(e,t[i]);n.push(u)}return n}var h=t.indexOf(".");if(h!==-1){var m=e[t.substr(0,h)];return m==null?void 0:ae(m,t.substr(h+1))}}function te(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Z(typeof n!="string"&&"length"in n);for(var i=0,o=t.length;i<o;++i)te(e,t[i],n[i])}else{var u,h,m=t.indexOf(".");m!==-1?(u=t.substr(0,m),(h=t.substr(m+1))===""?n===void 0?y(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=n:te(m=!(m=e[u])||!I(e,u)?e[u]={}:m,h,n)):n===void 0?y(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ee(e){var t,n={};for(t in e)I(e,t)&&(n[t]=e[t]);return n}var we=[].concat;function Ae(e){return we.apply([],e)}var Rt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ae([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return l[e]}),Ie=new Set(Rt.map(function(e){return l[e]})),ie=null;function ke(e){return ie=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var i=ie.get(n);if(i)return i;if(y(n)){i=[],ie.set(n,i);for(var o=0,u=n.length;o<u;++o)i.push(t(n[o]))}else if(Ie.has(n.constructor))i=n;else{var h,m=_(n);for(h in i=m===Object.prototype?{}:Object.create(m),ie.set(n,i),n)I(n,h)&&(i[h]=t(n[h]))}return i}(e),ie=null,e}var Te={}.toString;function Qe(e){return Te.call(e).slice(8,-1)}var Ce=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Be=typeof Ce=="symbol"?function(e){var t;return e!=null&&(t=e[Ce])&&t.apply(e)}:function(){return null};function st(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Ze={};function Pe(e){var t,n,i,o;if(arguments.length===1){if(y(e))return e.slice();if(this===Ze&&typeof e=="string")return[e];if(o=Be(e)){for(n=[];!(i=o.next()).done;)n.push(i.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var ut=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},on=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],it=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(on),Ve={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Re(e,t){this.name=e,this.message=t}function ue(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,i,o){return o.indexOf(n)===i}).join(`
`)}function ye(e,t,n,i){this.failures=t,this.failedKeys=i,this.successCount=n,this.message=ue(e,t)}function de(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=ue(e,this.failures)}$(Re).from(Error).extend({toString:function(){return this.name+": "+this.message}}),$(ye).from(Re),$(de).from(Re);var rt=it.reduce(function(e,t){return e[t]=t+"Error",e},{}),_n=Re,re=it.reduce(function(e,t){var n=t+"Error";function i(o,u){this.name=n,o?typeof o=="string"?(this.message="".concat(o).concat(u?`
 `+u:""),this.inner=u||null):typeof o=="object"&&(this.message="".concat(o.name," ").concat(o.message),this.inner=o):(this.message=Ve[t]||n,this.inner=null)}return $(i).from(_n),e[t]=i,e},{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var lt=on.reduce(function(e,t){return e[t+"Error"]=re[t],e},{}),bn=it.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=re[t]),e},{});function Oe(){}function nn(e){return e}function no(e,t){return e==null||e===nn?t:function(n){return t(e(n))}}function Kt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ro(e,t){return e===Oe?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Kt(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Kt(o,this.onerror):o),u!==void 0?u:n}}function io(e,t){return e===Oe?t:function(){e.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Kt(n,this.onsuccess):n),i&&(this.onerror=this.onerror?Kt(i,this.onerror):i)}}function oo(e,t){return e===Oe?t:function(n){var i=e.apply(this,arguments);O(n,i);var o=this.onsuccess,u=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?Kt(o,this.onsuccess):o),u&&(this.onerror=this.onerror?Kt(u,this.onerror):u),i===void 0?n===void 0?void 0:n:O(i,n)}}function ao(e,t){return e===Oe?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function er(e,t){return e===Oe?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var i=this,o=arguments.length,u=new Array(o);o--;)u[o]=arguments[o];return n.then(function(){return t.apply(i,u)})}return t.apply(this,arguments)}}bn.ModifyError=ye,bn.DexieError=Re,bn.BulkError=de;var ct=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Lr(e){ct=e}var rn={},Ur=100,Rt=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,_(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,_(t),e]}(),on=Rt[0],it=Rt[1],Rt=Rt[2],it=it&&it.then,At=on&&on.constructor,tr=!!Rt,an=function(e,t){sn.push([e,t]),wn&&(queueMicrotask(uo),wn=!1)},nr=!0,wn=!0,Bt=[],kn=[],rr=nn,yt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Oe,pgp:!1,env:{},finalize:Oe},ne=yt,sn=[],Mt=0,xn=[];function W(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=ne;if(typeof e!="function"){if(e!==rn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&or(this,this._value))}this._state=null,this._value=null,++t.ref,function n(i,o){try{o(function(u){if(i._state===null){if(u===i)throw new TypeError("A promise cannot be resolved with itself.");var h=i._lib&&Wt();u&&typeof u.then=="function"?n(i,function(m,b){u instanceof W?u._then(m,b):u.then(m,b)}):(i._state=!0,i._value=u,Yr(i)),h&&Gt()}},or.bind(null,i))}catch(u){or(i,u)}}(this,e)}var ir={get:function(){var e=ne,t=En;function n(i,o){var u=this,h=!e.global&&(e!==ne||t!==En),m=h&&!_t(),b=new W(function(k,S){ar(u,new Vr(zr(i,e,h,m),zr(o,e,h,m),k,S,e))});return this._consoleTask&&(b._consoleTask=this._consoleTask),b}return n.prototype=rn,n},set:function(e){V(this,"then",e&&e.prototype===rn?ir:{get:function(){return e},set:ir.set})}};function Vr(e,t,n,i,o){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=i,this.psd=o}function or(e,t){var n,i;kn.push(t),e._state===null&&(n=e._lib&&Wt(),t=rr(t),e._state=!1,e._value=t,i=e,Bt.some(function(o){return o._value===i._value})||Bt.push(i),Yr(e),n&&Gt())}function Yr(e){var t=e._listeners;e._listeners=[];for(var n=0,i=t.length;n<i;++n)ar(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),Mt===0&&(++Mt,an(function(){--Mt==0&&sr()},[]))}function ar(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Mt,an(so,[n,e,t])}else e._listeners.push(t)}function so(e,t,n){try{var i,o=t._value;!t._state&&kn.length&&(kn=[]),i=ct&&t._consoleTask?t._consoleTask.run(function(){return e(o)}):e(o),t._state||kn.indexOf(o)!==-1||function(u){for(var h=Bt.length;h;)if(Bt[--h]._value===u._value)return Bt.splice(h,1)}(t),n.resolve(i)}catch(u){n.reject(u)}finally{--Mt==0&&sr(),--n.psd.ref||n.psd.finalize()}}function uo(){Nt(yt,function(){Wt()&&Gt()})}function Wt(){var e=nr;return wn=nr=!1,e}function Gt(){var e,t,n;do for(;0<sn.length;)for(e=sn,sn=[],n=e.length,t=0;t<n;++t){var i=e[t];i[0].apply(null,i[1])}while(0<sn.length);wn=nr=!0}function sr(){var e=Bt;Bt=[],e.forEach(function(i){i._PSD.onunhandled.call(null,i._value,i)});for(var t=xn.slice(0),n=t.length;n;)t[--n]()}function Tn(e){return new W(rn,!1,e)}function je(e,t){var n=ne;return function(){var i=Wt(),o=ne;try{return bt(n,!0),e.apply(this,arguments)}catch(u){t&&t(u)}finally{bt(o,!1),i&&Gt()}}}v(W.prototype,{then:ir,_then:function(e,t){ar(this,new Vr(null,null,e,t,ne))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(i){return(i instanceof t?n:Tn)(i)}):this.then(null,function(i){return(i&&i.name===t?n:Tn)(i)})},finally:function(e){return this.then(function(t){return W.resolve(e()).then(function(){return t})},function(t){return W.resolve(e()).then(function(){return Tn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new W(function(i,o){var u=setTimeout(function(){return o(new re.Timeout(t))},e);n.then(i,o).finally(clearTimeout.bind(null,u))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&V(W.prototype,Symbol.toStringTag,"Dexie.Promise"),yt.env=Hr(),v(W,{all:function(){var e=Pe.apply(null,arguments).map(In);return new W(function(t,n){e.length===0&&t([]);var i=e.length;e.forEach(function(o,u){return W.resolve(o).then(function(h){e[u]=h,--i||t(e)},n)})})},resolve:function(e){return e instanceof W?e:e&&typeof e.then=="function"?new W(function(t,n){e.then(t,n)}):new W(rn,!0,e)},reject:Tn,race:function(){var e=Pe.apply(null,arguments).map(In);return new W(function(t,n){e.map(function(i){return W.resolve(i).then(t,n)})})},PSD:{get:function(){return ne},set:function(e){return ne=e}},totalEchoes:{get:function(){return En}},newPSD:gt,usePSD:Nt,scheduler:{get:function(){return an},set:function(e){an=e}},rejectionMapper:{get:function(){return rr},set:function(e){rr=e}},follow:function(e,t){return new W(function(n,i){return gt(function(o,u){var h=ne;h.unhandleds=[],h.onunhandled=u,h.finalize=Kt(function(){var m,b=this;m=function(){b.unhandleds.length===0?o():u(b.unhandleds[0])},xn.push(function k(){m(),xn.splice(xn.indexOf(k),1)}),++Mt,an(function(){--Mt==0&&sr()},[])},h.finalize),e()},t,n,i)})}}),At&&(At.allSettled&&V(W,"allSettled",function(){var e=Pe.apply(null,arguments).map(In);return new W(function(t){e.length===0&&t([]);var n=e.length,i=new Array(n);e.forEach(function(o,u){return W.resolve(o).then(function(h){return i[u]={status:"fulfilled",value:h}},function(h){return i[u]={status:"rejected",reason:h}}).then(function(){return--n||t(i)})})})}),At.any&&typeof AggregateError<"u"&&V(W,"any",function(){var e=Pe.apply(null,arguments).map(In);return new W(function(t,n){e.length===0&&n(new AggregateError([]));var i=e.length,o=new Array(i);e.forEach(function(u,h){return W.resolve(u).then(function(m){return t(m)},function(m){o[h]=m,--i||n(new AggregateError(o))})})})}),At.withResolvers&&(W.withResolvers=At.withResolvers));var Ye={awaits:0,echoes:0,id:0},lo=0,Sn=[],Cn=0,En=0,co=0;function gt(e,t,n,i){var o=ne,u=Object.create(o);return u.parent=o,u.ref=0,u.global=!1,u.id=++co,yt.env,u.env=tr?{Promise:W,PromiseProp:{value:W,configurable:!0,writable:!0},all:W.all,race:W.race,allSettled:W.allSettled,any:W.any,resolve:W.resolve,reject:W.reject}:{},t&&O(u,t),++o.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()},i=Nt(u,e,n,i),u.ref===0&&u.finalize(),i}function Xt(){return Ye.id||(Ye.id=++lo),++Ye.awaits,Ye.echoes+=Ur,Ye.id}function _t(){return!!Ye.awaits&&(--Ye.awaits==0&&(Ye.id=0),Ye.echoes=Ye.awaits*Ur,!0)}function In(e){return Ye.echoes&&e&&e.constructor===At?(Xt(),e.then(function(t){return _t(),t},function(t){return _t(),Fe(t)})):e}function fo(){var e=Sn[Sn.length-1];Sn.pop(),bt(e,!1)}function bt(e,t){var n,i=ne;(t?!Ye.echoes||Cn++&&e===ne:!Cn||--Cn&&e===ne)||queueMicrotask(t?(function(o){++En,Ye.echoes&&--Ye.echoes!=0||(Ye.echoes=Ye.awaits=Ye.id=0),Sn.push(ne),bt(o,!0)}).bind(null,e):fo),e!==ne&&(ne=e,i===yt&&(yt.env=Hr()),tr&&(n=yt.env.Promise,t=e.env,(i.global||e.global)&&(Object.defineProperty(l,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function Hr(){var e=l.Promise;return tr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Nt(e,t,n,i,o){var u=ne;try{return bt(e,!0),t(n,i,o)}finally{bt(u,!1)}}function zr(e,t,n,i){return typeof e!="function"?e:function(){var o=ne;n&&Xt(),bt(t,!0);try{return e.apply(this,arguments)}finally{bt(o,!1),i&&queueMicrotask(_t)}}}function ur(e){Promise===At&&Ye.echoes===0?Cn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+it).indexOf("[native code]")===-1&&(Xt=_t=Oe);var Fe=W.reject,qt="￿",pt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wr="String expected.",Qt=[],On="__dbnames",lr="readonly",cr="readwrite";function Ft(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Gr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Pn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=ke(t))[e],t}}function Xr(){throw re.Type()}function xe(e,t){try{var n=Qr(e),i=Qr(t);if(n!==i)return n==="Array"?1:i==="Array"?-1:n==="binary"?1:i==="binary"?-1:n==="string"?1:i==="string"?-1:n==="Date"?1:i!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(o,u){for(var h=o.length,m=u.length,b=h<m?h:m,k=0;k<b;++k)if(o[k]!==u[k])return o[k]<u[k]?-1:1;return h===m?0:h<m?-1:1}(Jr(e),Jr(t));case"Array":return function(o,u){for(var h=o.length,m=u.length,b=h<m?h:m,k=0;k<b;++k){var S=xe(o[k],u[k]);if(S!==0)return S}return h===m?0:h<m?-1:1}(e,t)}}catch{}return NaN}function Qr(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Qe(e),e==="ArrayBuffer"?"binary":e)}function Jr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var $r=(De.prototype._trans=function(e,t,n){var i=this._tx||ne.trans,o=this.name,u=ct&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function h(k,S,g){if(!g.schema[o])throw new re.NotFound("Table "+o+" not part of transaction");return t(g.idbtrans,g)}var m=Wt();try{var b=i&&i.db._novip===this.db._novip?i===ne.trans?i._promise(e,h,n):gt(function(){return i._promise(e,h,n)},{trans:i,transless:ne.transless||ne}):function k(S,g,E,w){if(S.idbdb&&(S._state.openComplete||ne.letThrough||S._vip)){var T=S._createTransaction(g,E,S._dbSchema);try{T.create(),S._state.PR1398_maxLoop=3}catch(C){return C.name===rt.InvalidState&&S.isOpen()&&0<--S._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),S.close({disableAutoOpen:!1}),S.open().then(function(){return k(S,g,E,w)})):Fe(C)}return T._promise(g,function(C,x){return gt(function(){return ne.trans=T,w(C,x,T)})}).then(function(C){if(g==="readwrite")try{T.idbtrans.commit()}catch{}return g==="readonly"?C:T._completion.then(function(){return C})})}if(S._state.openComplete)return Fe(new re.DatabaseClosed(S._state.dbOpenError));if(!S._state.isBeingOpened){if(!S._state.autoOpen)return Fe(new re.DatabaseClosed);S.open().catch(Oe)}return S._state.dbReadyPromise.then(function(){return k(S,g,E,w)})}(this.db,e,[this.name],h);return u&&(b._consoleTask=u,b=b.catch(function(k){return console.trace(k),Fe(k)})),b}finally{m&&Gt()}},De.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?Fe(new re.Type("Invalid argument to Table.get()")):this._trans("readonly",function(i){return n.core.get({trans:i,key:e}).then(function(o){return n.hook.reading.fire(o)})}).then(t)},De.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(y(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=d(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(m){if(m.compound&&t.every(function(k){return 0<=m.keyPath.indexOf(k)})){for(var b=0;b<t.length;++b)if(t.indexOf(m.keyPath[b])===-1)return!1;return!0}return!1}).sort(function(m,b){return m.keyPath.length-b.keyPath.length})[0];if(n&&this.db._maxKey!==qt){var u=n.keyPath.slice(0,t.length);return this.where(u).equals(u.map(function(b){return e[b]}))}!n&&ct&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var i=this.schema.idxByName;function o(m,b){return xe(m,b)===0}var h=t.reduce(function(g,b){var k=g[0],S=g[1],g=i[b],E=e[b];return[k||g,k||!g?Ft(S,g&&g.multi?function(w){return w=ae(w,b),y(w)&&w.some(function(T){return o(E,T)})}:function(w){return o(E,ae(w,b))}):S]},[null,null]),u=h[0],h=h[1];return u?this.where(u.name).equals(e[u.keyPath]).filter(h):n?this.filter(h):this.where(t).equals("")},De.prototype.filter=function(e){return this.toCollection().and(e)},De.prototype.count=function(e){return this.toCollection().count(e)},De.prototype.offset=function(e){return this.toCollection().offset(e)},De.prototype.limit=function(e){return this.toCollection().limit(e)},De.prototype.each=function(e){return this.toCollection().each(e)},De.prototype.toArray=function(e){return this.toCollection().toArray(e)},De.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},De.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,y(e)?"[".concat(e.join("+"),"]"):e))},De.prototype.reverse=function(){return this.toCollection().reverse()},De.prototype.mapToClass=function(e){var t,n=this.db,i=this.name;function o(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Xr&&(function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function S(){this.constructor=b}s(b,k),b.prototype=k===null?Object.create(k):(S.prototype=k.prototype,new S)}(o,t=e),Object.defineProperty(o.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),o.prototype.table=function(){return i},e=o);for(var u=new Set,h=e.prototype;h;h=_(h))Object.getOwnPropertyNames(h).forEach(function(b){return u.add(b)});function m(b){if(!b)return b;var k,S=Object.create(e.prototype);for(k in b)if(!u.has(k))try{S[k]=b[k]}catch{}return S}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=m,this.hook("reading",m),e},De.prototype.defineClass=function(){return this.mapToClass(function(e){O(this,e)})},De.prototype.add=function(e,t){var n=this,i=this.schema.primKey,o=i.auto,u=i.keyPath,h=e;return u&&o&&(h=Pn(u)(e)),this._trans("readwrite",function(m){return n.core.mutate({trans:m,type:"add",keys:t!=null?[t]:null,values:[h]})}).then(function(m){return m.numFailures?W.reject(m.failures[0]):m.lastResult}).then(function(m){if(u)try{te(e,u,m)}catch{}return m})},De.prototype.update=function(e,t){return typeof e!="object"||y(e)?this.where(":id").equals(e).modify(t):(e=ae(e,this.schema.primKey.keyPath),e===void 0?Fe(new re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},De.prototype.put=function(e,t){var n=this,i=this.schema.primKey,o=i.auto,u=i.keyPath,h=e;return u&&o&&(h=Pn(u)(e)),this._trans("readwrite",function(m){return n.core.mutate({trans:m,type:"put",values:[h],keys:t!=null?[t]:null})}).then(function(m){return m.numFailures?W.reject(m.failures[0]):m.lastResult}).then(function(m){if(u)try{te(e,u,m)}catch{}return m})},De.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?W.reject(n.failures[0]):void 0})},De.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Gr})}).then(function(t){return t.numFailures?W.reject(t.failures[0]):void 0})},De.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(i){return i.map(function(o){return t.hook.reading.fire(o)})})})},De.prototype.bulkAdd=function(e,t,n){var i=this,o=Array.isArray(t)?t:void 0,u=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(h){var k=i.schema.primKey,m=k.auto,k=k.keyPath;if(k&&o)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var b=e.length,k=k&&m?e.map(Pn(k)):e;return i.core.mutate({trans:h,type:"add",keys:o,values:k,wantResults:u}).then(function(T){var g=T.numFailures,E=T.results,w=T.lastResult,T=T.failures;if(g===0)return u?E:w;throw new de("".concat(i.name,".bulkAdd(): ").concat(g," of ").concat(b," operations failed"),T)})})},De.prototype.bulkPut=function(e,t,n){var i=this,o=Array.isArray(t)?t:void 0,u=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(h){var k=i.schema.primKey,m=k.auto,k=k.keyPath;if(k&&o)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var b=e.length,k=k&&m?e.map(Pn(k)):e;return i.core.mutate({trans:h,type:"put",keys:o,values:k,wantResults:u}).then(function(T){var g=T.numFailures,E=T.results,w=T.lastResult,T=T.failures;if(g===0)return u?E:w;throw new de("".concat(i.name,".bulkPut(): ").concat(g," of ").concat(b," operations failed"),T)})})},De.prototype.bulkUpdate=function(e){var t=this,n=this.core,i=e.map(function(h){return h.key}),o=e.map(function(h){return h.changes}),u=[];return this._trans("readwrite",function(h){return n.getMany({trans:h,keys:i,cache:"clone"}).then(function(m){var b=[],k=[];e.forEach(function(g,E){var w=g.key,T=g.changes,C=m[E];if(C){for(var x=0,P=Object.keys(T);x<P.length;x++){var D=P[x],j=T[D];if(D===t.schema.primKey.keyPath){if(xe(j,w)!==0)throw new re.Constraint("Cannot update primary key in bulkUpdate()")}else te(C,D,j)}u.push(E),b.push(w),k.push(C)}});var S=b.length;return n.mutate({trans:h,type:"put",keys:b,values:k,updates:{keys:i,changeSpecs:o}}).then(function(g){var E=g.numFailures,w=g.failures;if(E===0)return S;for(var T=0,C=Object.keys(w);T<C.length;T++){var x,P=C[T],D=u[Number(P)];D!=null&&(x=w[P],delete w[P],w[D]=x)}throw new de("".concat(t.name,".bulkUpdate(): ").concat(E," of ").concat(S," operations failed"),w)})})})},De.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"delete",keys:e})}).then(function(h){var o=h.numFailures,u=h.lastResult,h=h.failures;if(o===0)return u;throw new de("".concat(t.name,".bulkDelete(): ").concat(o," of ").concat(n," operations failed"),h)})},De);function De(){}function un(e){function t(h,m){if(m){for(var b=arguments.length,k=new Array(b-1);--b;)k[b-1]=arguments[b];return n[h].subscribe.apply(null,k),e}if(typeof h=="string")return n[h]}var n={};t.addEventType=u;for(var i=1,o=arguments.length;i<o;++i)u(arguments[i]);return t;function u(h,m,b){if(typeof h!="object"){var k;m=m||ao;var S={subscribers:[],fire:b=b||Oe,subscribe:function(g){S.subscribers.indexOf(g)===-1&&(S.subscribers.push(g),S.fire=m(S.fire,g))},unsubscribe:function(g){S.subscribers=S.subscribers.filter(function(E){return E!==g}),S.fire=S.subscribers.reduce(m,b)}};return n[h]=t[h]=S}d(k=h).forEach(function(g){var E=k[g];if(y(E))u(g,k[g][0],k[g][1]);else{if(E!=="asap")throw new re.InvalidArgument("Invalid event config");var w=u(g,nn,function(){for(var T=arguments.length,C=new Array(T);T--;)C[T]=arguments[T];w.subscribers.forEach(function(x){fe(function(){x.apply(null,C)})})})}})}}function ln(e,t){return $(t).from({prototype:e}),t}function Jt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function fr(e,t){e.filter=Ft(e.filter,t)}function dr(e,t,n){var i=e.replayFilter;e.replayFilter=i?function(){return Ft(i(),t())}:t,e.justLimit=n&&!i}function Dn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new re.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Zr(e,t,n){var i=Dn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:i,range:e.range}})}function jn(e,t,n,i){var o=e.replayFilter?Ft(e.filter,e.replayFilter()):e.filter;if(e.or){var u={},h=function(m,b,k){var S,g;o&&!o(b,k,function(E){return b.stop(E)},function(E){return b.fail(E)})||((g=""+(S=b.primaryKey))=="[object ArrayBuffer]"&&(g=""+new Uint8Array(S)),I(u,g)||(u[g]=!0,t(m,b,k)))};return Promise.all([e.or._iterate(h,n),ei(Zr(e,i,n),e.algorithm,h,!e.keysOnly&&e.valueMapper)])}return ei(Zr(e,i,n),Ft(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function ei(e,t,n,i){var o=je(i?function(u,h,m){return n(i(u),h,m)}:n);return e.then(function(u){if(u)return u.start(function(){var h=function(){return u.continue()};t&&!t(u,function(m){return h=m},function(m){u.stop(m),h=Oe},function(m){u.fail(m),h=Oe})||o(u.value,u,function(m){return h=m}),h()})})}var cn=(ti.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(y(n))return f(f([],y(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var i=t.remove;if(y(i))return y(e)?e.filter(function(o){return!i.includes(o)}).sort():[];if(typeof i=="number")return Number(e)-i;if(typeof i=="bigint")try{return BigInt(e)-i}catch{return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},ti);function ti(e){this["@@propmod"]=e}var ho=(Se.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Fe.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Se.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Fe.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Se.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Ft(t.algorithm,e)},Se.prototype._iterate=function(e,t){return jn(this._ctx,e,t,this._ctx.table.core)},Se.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&O(n,e),t._ctx=n,t},Se.prototype.raw=function(){return this._ctx.valueMapper=null,this},Se.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return jn(t,e,n,t.table.core)})},Se.prototype.count=function(e){var t=this;return this._read(function(n){var i=t._ctx,o=i.table.core;if(Jt(i,!0))return o.count({trans:n,query:{index:Dn(i,o.schema),range:i.range}}).then(function(h){return Math.min(h,i.limit)});var u=0;return jn(i,function(){return++u,!1},n,o).then(function(){return u})}).then(e)},Se.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),i=n[0],o=n.length-1;function u(b,k){return k?u(b[n[k]],k-1):b[i]}var h=this._ctx.dir==="next"?1:-1;function m(b,k){return xe(u(b,o),u(k,o))*h}return this.toArray(function(b){return b.sort(m)}).then(t)},Se.prototype.toArray=function(e){var t=this;return this._read(function(n){var i=t._ctx;if(i.dir==="next"&&Jt(i,!0)&&0<i.limit){var o=i.valueMapper,u=Dn(i,i.table.core.schema);return i.table.core.query({trans:n,limit:i.limit,values:!0,query:{index:u,range:i.range}}).then(function(m){return m=m.result,o?m.map(o):m})}var h=[];return jn(i,function(m){return h.push(m)},n,i.table.core).then(function(){return h})},e)},Se.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Jt(t)?dr(t,function(){var n=e;return function(i,o){return n===0||(n===1?--n:o(function(){i.advance(n),n=0}),!1)}}):dr(t,function(){var n=e;return function(){return--n<0}})),this},Se.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),dr(this._ctx,function(){var t=e;return function(n,i,o){return--t<=0&&i(o),0<=t}},!0),this},Se.prototype.until=function(e,t){return fr(this._ctx,function(n,i,o){return!e(n.value)||(i(o),t)}),this},Se.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},Se.prototype.last=function(e){return this.reverse().first(e)},Se.prototype.filter=function(e){var t;return fr(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=Ft(t.isMatch,e),this},Se.prototype.and=function(e){return this.filter(e)},Se.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Se.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Se.prototype.desc=function(){return this.reverse()},Se.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){e(i.key,i)})},Se.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Se.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){e(i.primaryKey,i)})},Se.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,o){n.push(o.key)}).then(function(){return n}).then(e)},Se.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Jt(t,!0)&&0<t.limit)return this._read(function(i){var o=Dn(t,t.table.core.schema);return t.table.core.query({trans:i,values:!1,limit:t.limit,query:{index:o,range:t.range}})}).then(function(i){return i.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,o){n.push(o.primaryKey)}).then(function(){return n}).then(e)},Se.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Se.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},Se.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Se.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return fr(this._ctx,function(o){var i=o.primaryKey.toString(),o=I(t,i);return t[i]=!0,!o}),this},Se.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(i){var o,u,h;h=typeof e=="function"?e:(o=d(e),u=o.length,function(x){for(var P=!1,D=0;D<u;++D){var j=o[D],K=e[j],N=ae(x,j);K instanceof cn?(te(x,j,K.execute(N)),P=!0):N!==K&&(te(x,j,K),P=!0)}return P});var m=n.table.core,g=m.schema.primaryKey,b=g.outbound,k=g.extractKey,S=200,g=t.db._options.modifyChunkSize;g&&(S=typeof g=="object"?g[m.name]||g["*"]||200:g);function E(x,j){var D=j.failures,j=j.numFailures;T+=x-j;for(var K=0,N=d(D);K<N.length;K++){var U=N[K];w.push(D[U])}}var w=[],T=0,C=[];return t.clone().primaryKeys().then(function(x){function P(j){var K=Math.min(S,x.length-j);return m.getMany({trans:i,keys:x.slice(j,j+K),cache:"immutable"}).then(function(N){for(var U=[],q=[],F=b?[]:null,Y=[],L=0;L<K;++L){var Q=N[L],pe={value:ke(Q),primKey:x[j+L]};h.call(pe,pe.value,pe)!==!1&&(pe.value==null?Y.push(x[j+L]):b||xe(k(Q),k(pe.value))===0?(q.push(pe.value),b&&F.push(x[j+L])):(Y.push(x[j+L]),U.push(pe.value)))}return Promise.resolve(0<U.length&&m.mutate({trans:i,type:"add",values:U}).then(function(_e){for(var be in _e.failures)Y.splice(parseInt(be),1);E(U.length,_e)})).then(function(){return(0<q.length||D&&typeof e=="object")&&m.mutate({trans:i,type:"put",keys:F,values:q,criteria:D,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<j}).then(function(_e){return E(q.length,_e)})}).then(function(){return(0<Y.length||D&&e===hr)&&m.mutate({trans:i,type:"delete",keys:Y,criteria:D,isAdditionalChunk:0<j}).then(function(_e){return E(Y.length,_e)})}).then(function(){return x.length>j+K&&P(j+S)})})}var D=Jt(n)&&n.limit===1/0&&(typeof e!="function"||e===hr)&&{index:n.index,range:n.range};return P(0).then(function(){if(0<w.length)throw new ye("Error modifying one or more objects",w,T,C);return x.length})})})},Se.prototype.delete=function(){var e=this._ctx,t=e.range;return Jt(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var i=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:n,query:{index:i,range:o}}).then(function(u){return e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then(function(h){var m=h.failures;if(h.lastResult,h.results,h=h.numFailures,h)throw new ye("Could not delete some values",Object.keys(m).map(function(b){return m[b]}),u-h);return u-h})})}):this.modify(hr)},Se);function Se(){}var hr=function(e,t){return t.value=null};function po(e,t){return e<t?-1:e===t?0:1}function mo(e,t){return t<e?-1:e===t?0:1}function et(e,t,n){return e=e instanceof ri?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function $t(e){return new e.Collection(e,function(){return ni("")}).limit(0)}function Kn(e,t,n,i){var o,u,h,m,b,k,S,g=n.length;if(!n.every(function(T){return typeof T=="string"}))return et(e,Wr);function E(T){o=T==="next"?function(x){return x.toUpperCase()}:function(x){return x.toLowerCase()},u=T==="next"?function(x){return x.toLowerCase()}:function(x){return x.toUpperCase()},h=T==="next"?po:mo;var C=n.map(function(x){return{lower:u(x),upper:o(x)}}).sort(function(x,P){return h(x.lower,P.lower)});m=C.map(function(x){return x.upper}),b=C.map(function(x){return x.lower}),S=(k=T)==="next"?"":i}E("next"),e=new e.Collection(e,function(){return wt(m[0],b[g-1]+i)}),e._ondirectionchange=function(T){E(T)};var w=0;return e._addAlgorithm(function(T,C,x){var P=T.key;if(typeof P!="string")return!1;var D=u(P);if(t(D,b,w))return!0;for(var j=null,K=w;K<g;++K){var N=function(U,q,F,Y,L,Q){for(var pe=Math.min(U.length,Y.length),_e=-1,be=0;be<pe;++be){var tt=q[be];if(tt!==Y[be])return L(U[be],F[be])<0?U.substr(0,be)+F[be]+F.substr(be+1):L(U[be],Y[be])<0?U.substr(0,be)+Y[be]+F.substr(be+1):0<=_e?U.substr(0,_e)+q[_e]+F.substr(_e+1):null;L(U[be],tt)<0&&(_e=be)}return pe<Y.length&&Q==="next"?U+F.substr(U.length):pe<U.length&&Q==="prev"?U.substr(0,F.length):_e<0?null:U.substr(0,_e)+Y[_e]+F.substr(_e+1)}(P,D,m[K],b[K],h,k);N===null&&j===null?w=K+1:(j===null||0<h(j,N))&&(j=N)}return C(j!==null?function(){T.continue(j+S)}:x),!1}),e}function wt(e,t,n,i){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:i}}function ni(e){return{type:1,lower:e,upper:e}}var ri=(Object.defineProperty(He.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),He.prototype.between=function(e,t,n,i){n=n!==!1,i=i===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||i)&&(!n||!i)?$t(this):new this.Collection(this,function(){return wt(e,t,!n,!i)})}catch{return et(this,pt)}},He.prototype.equals=function(e){return e==null?et(this,pt):new this.Collection(this,function(){return ni(e)})},He.prototype.above=function(e){return e==null?et(this,pt):new this.Collection(this,function(){return wt(e,void 0,!0)})},He.prototype.aboveOrEqual=function(e){return e==null?et(this,pt):new this.Collection(this,function(){return wt(e,void 0,!1)})},He.prototype.below=function(e){return e==null?et(this,pt):new this.Collection(this,function(){return wt(void 0,e,!1,!0)})},He.prototype.belowOrEqual=function(e){return e==null?et(this,pt):new this.Collection(this,function(){return wt(void 0,e)})},He.prototype.startsWith=function(e){return typeof e!="string"?et(this,Wr):this.between(e,e+qt,!0,!0)},He.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Kn(this,function(t,n){return t.indexOf(n[0])===0},[e],qt)},He.prototype.equalsIgnoreCase=function(e){return Kn(this,function(t,n){return t===n[0]},[e],"")},He.prototype.anyOfIgnoreCase=function(){var e=Pe.apply(Ze,arguments);return e.length===0?$t(this):Kn(this,function(t,n){return n.indexOf(t)!==-1},e,"")},He.prototype.startsWithAnyOfIgnoreCase=function(){var e=Pe.apply(Ze,arguments);return e.length===0?$t(this):Kn(this,function(t,n){return n.some(function(i){return t.indexOf(i)===0})},e,qt)},He.prototype.anyOf=function(){var e=this,t=Pe.apply(Ze,arguments),n=this._cmp;try{t.sort(n)}catch{return et(this,pt)}if(t.length===0)return $t(this);var i=new this.Collection(this,function(){return wt(t[0],t[t.length-1])});i._ondirectionchange=function(u){n=u==="next"?e._ascending:e._descending,t.sort(n)};var o=0;return i._addAlgorithm(function(u,h,m){for(var b=u.key;0<n(b,t[o]);)if(++o===t.length)return h(m),!1;return n(b,t[o])===0||(h(function(){u.continue(t[o])}),!1)}),i},He.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},He.prototype.noneOf=function(){var e=Pe.apply(Ze,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return et(this,pt)}var t=e.reduce(function(n,i){return n?n.concat([[n[n.length-1][1],i]]):[[-1/0,i]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},He.prototype.inAnyRange=function(P,t){var n=this,i=this._cmp,o=this._ascending,u=this._descending,h=this._min,m=this._max;if(P.length===0)return $t(this);if(!P.every(function(D){return D[0]!==void 0&&D[1]!==void 0&&o(D[0],D[1])<=0}))return et(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);var b=!t||t.includeLowers!==!1,k=t&&t.includeUppers===!0,S,g=o;function E(D,j){return g(D[0],j[0])}try{(S=P.reduce(function(D,j){for(var K=0,N=D.length;K<N;++K){var U=D[K];if(i(j[0],U[1])<0&&0<i(j[1],U[0])){U[0]=h(U[0],j[0]),U[1]=m(U[1],j[1]);break}}return K===N&&D.push(j),D},[])).sort(E)}catch{return et(this,pt)}var w=0,T=k?function(D){return 0<o(D,S[w][1])}:function(D){return 0<=o(D,S[w][1])},C=b?function(D){return 0<u(D,S[w][0])}:function(D){return 0<=u(D,S[w][0])},x=T,P=new this.Collection(this,function(){return wt(S[0][0],S[S.length-1][1],!b,!k)});return P._ondirectionchange=function(D){g=D==="next"?(x=T,o):(x=C,u),S.sort(E)},P._addAlgorithm(function(D,j,K){for(var N,U=D.key;x(U);)if(++w===S.length)return j(K),!1;return!T(N=U)&&!C(N)||(n._cmp(U,S[w][1])===0||n._cmp(U,S[w][0])===0||j(function(){g===o?D.continue(S[w][0]):D.continue(S[w][1])}),!1)}),P},He.prototype.startsWithAnyOf=function(){var e=Pe.apply(Ze,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?$t(this):this.inAnyRange(e.map(function(t){return[t,t+qt]})):et(this,"startsWithAnyOf() only works with strings")},He);function He(){}function ft(e){return je(function(t){return fn(t),e(t.target.error),!1})}function fn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var dn="storagemutated",pr="x-storagemutated-1",kt=un(null,dn),vo=(dt.prototype._lock=function(){return Z(!ne.global),++this._reculock,this._reculock!==1||ne.global||(ne.lockOwnerFor=this),this},dt.prototype._unlock=function(){if(Z(!ne.global),--this._reculock==0)for(ne.global||(ne.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Nt(e[1],e[0])}catch{}}return this},dt.prototype._locked=function(){return this._reculock&&ne.lockOwnerFor!==this},dt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,i=this.db._state.dbOpenError;if(Z(!this.idbtrans),!e&&!n)switch(i&&i.name){case"DatabaseClosedError":throw new re.DatabaseClosed(i);case"MissingAPIError":throw new re.MissingAPI(i.message,i);default:throw new re.OpenFailed(i)}if(!this.active)throw new re.TransactionInactive;return Z(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=je(function(o){fn(o),t._reject(e.error)}),e.onabort=je(function(o){fn(o),t.active&&t._reject(new re.Abort(e.error)),t.active=!1,t.on("abort").fire(o)}),e.oncomplete=je(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&kt.storagemutated.fire(e.mutatedParts)}),this},dt.prototype._promise=function(e,t,n){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return Fe(new re.ReadOnly("Transaction is readonly"));if(!this.active)return Fe(new re.TransactionInactive);if(this._locked())return new W(function(u,h){i._blockedFuncs.push([function(){i._promise(e,t,n).then(u,h)},ne])});if(n)return gt(function(){var u=new W(function(h,m){i._lock();var b=t(h,m,i);b&&b.then&&b.then(h,m)});return u.finally(function(){return i._unlock()}),u._lib=!0,u});var o=new W(function(u,h){var m=t(u,h,i);m&&m.then&&m.then(u,h)});return o._lib=!0,o},dt.prototype._root=function(){return this.parent?this.parent._root():this},dt.prototype.waitFor=function(e){var t,n=this._root(),i=W.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return i}):(n._waitingFor=i,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function u(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=u)}());var o=n._waitingFor;return new W(function(u,h){i.then(function(m){return n._waitingQueue.push(je(u.bind(null,m)))},function(m){return n._waitingQueue.push(je(h.bind(null,m)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},dt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new re.Abort))},dt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(I(t,e))return t[e];var n=this.schema[e];if(!n)throw new re.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},dt);function dt(){}function mr(e,t,n,i,o,u,h){return{name:e,keyPath:t,unique:n,multi:i,auto:o,compound:u,src:(n&&!h?"&":"")+(i?"*":"")+(o?"++":"")+ii(t)}}function ii(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function vr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(i=function(o){return[o.name,o]},n.reduce(function(o,u,h){return h=i(u,h),h&&(o[h[0]]=h[1]),o},{}))};var i}var hn=function(e){try{return e.only([[]]),hn=function(){return[[]]},[[]]}catch{return hn=function(){return qt},qt}};function yr(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return ae(n,t)}:function(n){return ae(n,e)};var t}function oi(e){return[].slice.call(e)}var yo=0;function pn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function go(e,t,b){function i(x){if(x.type===3)return null;if(x.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var w=x.lower,T=x.upper,C=x.lowerOpen,x=x.upperOpen;return w===void 0?T===void 0?null:t.upperBound(T,!!x):T===void 0?t.lowerBound(w,!!C):t.bound(w,T,!!C,!!x)}function o(E){var w,T=E.name;return{name:T,schema:E,mutate:function(C){var x=C.trans,P=C.type,D=C.keys,j=C.values,K=C.range;return new Promise(function(N,U){N=je(N);var q=x.objectStore(T),F=q.keyPath==null,Y=P==="put"||P==="add";if(!Y&&P!=="delete"&&P!=="deleteRange")throw new Error("Invalid operation type: "+P);var L,Q=(D||j||{length:1}).length;if(D&&j&&D.length!==j.length)throw new Error("Given keys array must have same length as given values array.");if(Q===0)return N({numFailures:0,failures:{},results:[],lastResult:void 0});function pe(Je){++tt,fn(Je)}var _e=[],be=[],tt=0;if(P==="deleteRange"){if(K.type===4)return N({numFailures:tt,failures:be,results:[],lastResult:void 0});K.type===3?_e.push(L=q.clear()):_e.push(L=q.delete(i(K)))}else{var F=Y?F?[j,D]:[j,null]:[D,null],he=F[0],Ge=F[1];if(Y)for(var Xe=0;Xe<Q;++Xe)_e.push(L=Ge&&Ge[Xe]!==void 0?q[P](he[Xe],Ge[Xe]):q[P](he[Xe])),L.onerror=pe;else for(Xe=0;Xe<Q;++Xe)_e.push(L=q[P](he[Xe])),L.onerror=pe}function zn(Je){Je=Je.target.result,_e.forEach(function(Vt,Ar){return Vt.error!=null&&(be[Ar]=Vt.error)}),N({numFailures:tt,failures:be,results:P==="delete"?D:_e.map(function(Vt){return Vt.result}),lastResult:Je})}L.onerror=function(Je){pe(Je),zn(Je)},L.onsuccess=zn})},getMany:function(C){var x=C.trans,P=C.keys;return new Promise(function(D,j){D=je(D);for(var K,N=x.objectStore(T),U=P.length,q=new Array(U),F=0,Y=0,L=function(_e){_e=_e.target,q[_e._pos]=_e.result,++Y===F&&D(q)},Q=ft(j),pe=0;pe<U;++pe)P[pe]!=null&&((K=N.get(P[pe]))._pos=pe,K.onsuccess=L,K.onerror=Q,++F);F===0&&D(q)})},get:function(C){var x=C.trans,P=C.key;return new Promise(function(D,j){D=je(D);var K=x.objectStore(T).get(P);K.onsuccess=function(N){return D(N.target.result)},K.onerror=ft(j)})},query:(w=k,function(C){return new Promise(function(x,P){x=je(x);var D,j,K,F=C.trans,N=C.values,U=C.limit,L=C.query,q=U===1/0?void 0:U,Y=L.index,L=L.range,F=F.objectStore(T),Y=Y.isPrimaryKey?F:F.index(Y.name),L=i(L);if(U===0)return x({result:[]});w?((q=N?Y.getAll(L,q):Y.getAllKeys(L,q)).onsuccess=function(Q){return x({result:Q.target.result})},q.onerror=ft(P)):(D=0,j=!N&&"openKeyCursor"in Y?Y.openKeyCursor(L):Y.openCursor(L),K=[],j.onsuccess=function(Q){var pe=j.result;return pe?(K.push(N?pe.value:pe.primaryKey),++D===U?x({result:K}):void pe.continue()):x({result:K})},j.onerror=ft(P))})}),openCursor:function(C){var x=C.trans,P=C.values,D=C.query,j=C.reverse,K=C.unique;return new Promise(function(N,U){N=je(N);var Y=D.index,q=D.range,F=x.objectStore(T),F=Y.isPrimaryKey?F:F.index(Y.name),Y=j?K?"prevunique":"prev":K?"nextunique":"next",L=!P&&"openKeyCursor"in F?F.openKeyCursor(i(q),Y):F.openCursor(i(q),Y);L.onerror=ft(U),L.onsuccess=je(function(Q){var pe,_e,be,tt,he=L.result;he?(he.___id=++yo,he.done=!1,pe=he.continue.bind(he),_e=(_e=he.continuePrimaryKey)&&_e.bind(he),be=he.advance.bind(he),tt=function(){throw new Error("Cursor not stopped")},he.trans=x,he.stop=he.continue=he.continuePrimaryKey=he.advance=function(){throw new Error("Cursor not started")},he.fail=je(U),he.next=function(){var Ge=this,Xe=1;return this.start(function(){return Xe--?Ge.continue():Ge.stop()}).then(function(){return Ge})},he.start=function(Ge){function Xe(){if(L.result)try{Ge()}catch(Je){he.fail(Je)}else he.done=!0,he.start=function(){throw new Error("Cursor behind last entry")},he.stop()}var zn=new Promise(function(Je,Vt){Je=je(Je),L.onerror=ft(Vt),he.fail=Vt,he.stop=function(Ar){he.stop=he.continue=he.continuePrimaryKey=he.advance=tt,Je(Ar)}});return L.onsuccess=je(function(Je){L.onsuccess=Xe,Xe()}),he.continue=pe,he.continuePrimaryKey=_e,he.advance=be,Xe(),zn},N(he)):N(null)},U)})},count:function(C){var x=C.query,P=C.trans,D=x.index,j=x.range;return new Promise(function(K,N){var U=P.objectStore(T),q=D.isPrimaryKey?U:U.index(D.name),U=i(j),q=U?q.count(U):q.count();q.onsuccess=je(function(F){return K(F.target.result)}),q.onerror=ft(N)})}}}var u,h,m,S=(h=b,m=oi((u=e).objectStoreNames),{schema:{name:u.name,tables:m.map(function(E){return h.objectStore(E)}).map(function(E){var w=E.keyPath,x=E.autoIncrement,T=y(w),C={},x={name:E.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w==null,compound:T,keyPath:w,autoIncrement:x,unique:!0,extractKey:yr(w)},indexes:oi(E.indexNames).map(function(P){return E.index(P)}).map(function(K){var D=K.name,j=K.unique,N=K.multiEntry,K=K.keyPath,N={name:D,compound:y(K),keyPath:K,unique:j,multiEntry:N,extractKey:yr(K)};return C[pn(K)]=N}),getIndexByKeyPath:function(P){return C[pn(P)]}};return C[":id"]=x.primaryKey,w!=null&&(C[pn(w)]=x.primaryKey),x})},hasGetAll:0<m.length&&"getAll"in h.objectStore(m[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),b=S.schema,k=S.hasGetAll,S=b.tables.map(o),g={};return S.forEach(function(E){return g[E.name]=E}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(E){if(!g[E])throw new Error("Table '".concat(E,"' not found"));return g[E]},MIN_KEY:-1/0,MAX_KEY:hn(t),schema:b}}function _o(e,t,n,i){var o=n.IDBKeyRange;return n.indexedDB,{dbcore:(i=go(t,o,i),e.dbcore.reduce(function(u,h){return h=h.create,a(a({},u),h(u))},i))}}function Rn(e,i){var n=i.db,i=_o(e._middlewares,n,e._deps,i);e.core=i.dbcore,e.tables.forEach(function(o){var u=o.name;e.core.schema.tables.some(function(h){return h.name===u})&&(o.core=e.core.table(u),e[u]instanceof e.Table&&(e[u].core=o.core))})}function An(e,t,n,i){n.forEach(function(o){var u=i[o];t.forEach(function(h){var m=function b(k,S){return J(k,S)||(k=_(k))&&b(k,S)}(h,o);(!m||"value"in m&&m.value===void 0)&&(h===e.Transaction.prototype||h instanceof e.Transaction?V(h,o,{get:function(){return this.table(o)},set:function(b){A(this,o,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):h[o]=new e.Table(o,u))})})}function gr(e,t){t.forEach(function(n){for(var i in n)n[i]instanceof e.Table&&delete n[i]})}function bo(e,t){return e._cfg.version-t._cfg.version}function wo(e,t,n,i){var o=e._dbSchema;n.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=vr("$meta",si("")[0],[]),e._storeNames.push("$meta"));var u=e._createTransaction("readwrite",e._storeNames,o);u.create(n),u._completion.catch(i);var h=u._reject.bind(u),m=ne.transless||ne;gt(function(){return ne.trans=u,ne.transless=m,t!==0?(Rn(e,n),k=t,((b=u).storeNames.includes("$meta")?b.table("$meta").get("version").then(function(S){return S??k}):W.resolve(k)).then(function(S){return E=S,w=u,T=n,C=[],S=(g=e)._versions,x=g._dbSchema=Mn(0,g.idbdb,T),(S=S.filter(function(P){return P._cfg.version>=E})).length!==0?(S.forEach(function(P){C.push(function(){var D=x,j=P._cfg.dbschema;Nn(g,D,T),Nn(g,j,T),x=g._dbSchema=j;var K=_r(D,j);K.add.forEach(function(Y){br(T,Y[0],Y[1].primKey,Y[1].indexes)}),K.change.forEach(function(Y){if(Y.recreate)throw new re.Upgrade("Not yet support for changing primary key");var L=T.objectStore(Y.name);Y.add.forEach(function(Q){return Bn(L,Q)}),Y.change.forEach(function(Q){L.deleteIndex(Q.name),Bn(L,Q)}),Y.del.forEach(function(Q){return L.deleteIndex(Q)})});var N=P._cfg.contentUpgrade;if(N&&P._cfg.version>E){Rn(g,T),w._memoizedTables={};var U=ee(j);K.del.forEach(function(Y){U[Y]=D[Y]}),gr(g,[g.Transaction.prototype]),An(g,[g.Transaction.prototype],d(U),U),w.schema=U;var q,F=ut(N);return F&&Xt(),K=W.follow(function(){var Y;(q=N(w))&&F&&(Y=_t.bind(null,null),q.then(Y,Y))}),q&&typeof q.then=="function"?W.resolve(q):K.then(function(){return q})}}),C.push(function(D){var j,K,N=P._cfg.dbschema;j=N,K=D,[].slice.call(K.db.objectStoreNames).forEach(function(U){return j[U]==null&&K.db.deleteObjectStore(U)}),gr(g,[g.Transaction.prototype]),An(g,[g.Transaction.prototype],g._storeNames,g._dbSchema),w.schema=g._dbSchema}),C.push(function(D){g.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(g.idbdb.version/10)===P._cfg.version?(g.idbdb.deleteObjectStore("$meta"),delete g._dbSchema.$meta,g._storeNames=g._storeNames.filter(function(j){return j!=="$meta"})):D.objectStore("$meta").put(P._cfg.version,"version"))})}),function P(){return C.length?W.resolve(C.shift()(w.idbtrans)).then(P):W.resolve()}().then(function(){ai(x,T)})):W.resolve();var g,E,w,T,C,x}).catch(h)):(d(o).forEach(function(S){br(n,S,o[S].primKey,o[S].indexes)}),Rn(e,n),void W.follow(function(){return e.on.populate.fire(u)}).catch(h));var b,k})}function ko(e,t){ai(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Mn(0,e.idbdb,t);Nn(e,e._dbSchema,t);for(var i=0,o=_r(n,e._dbSchema).change;i<o.length;i++){var u=function(h){if(h.change.length||h.recreate)return console.warn("Unable to patch indexes of table ".concat(h.name," because it has changes on the type of index or primary key.")),{value:void 0};var m=t.objectStore(h.name);h.add.forEach(function(b){ct&&console.debug("Dexie upgrade patch: Creating missing index ".concat(h.name,".").concat(b.src)),Bn(m,b)})}(o[i]);if(typeof u=="object")return u.value}}function _r(e,t){var n,i={del:[],add:[],change:[]};for(n in e)t[n]||i.del.push(n);for(n in t){var o=e[n],u=t[n];if(o){var h={name:n,def:u,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(u.primKey.keyPath||"")||o.primKey.auto!==u.primKey.auto)h.recreate=!0,i.change.push(h);else{var m=o.idxByName,b=u.idxByName,k=void 0;for(k in m)b[k]||h.del.push(k);for(k in b){var S=m[k],g=b[k];S?S.src!==g.src&&h.change.push(g):h.add.push(g)}(0<h.del.length||0<h.add.length||0<h.change.length)&&i.change.push(h)}}else i.add.push([n,u])}return i}function br(e,t,n,i){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach(function(u){return Bn(o,u)}),o}function ai(e,t){d(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(ct&&console.debug("Dexie: Creating missing table",n),br(t,n,e[n].primKey,e[n].indexes))})}function Bn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Mn(e,t,n){var i={};return ge(t.objectStoreNames,0).forEach(function(o){for(var u=n.objectStore(o),h=mr(ii(k=u.keyPath),k||"",!0,!1,!!u.autoIncrement,k&&typeof k!="string",!0),m=[],b=0;b<u.indexNames.length;++b){var S=u.index(u.indexNames[b]),k=S.keyPath,S=mr(S.name,k,!!S.unique,!!S.multiEntry,!1,k&&typeof k!="string",!1);m.push(S)}i[o]=vr(o,h,m)}),i}function Nn(e,t,n){for(var i=n.db.objectStoreNames,o=0;o<i.length;++o){var u=i[o],h=n.objectStore(u);e._hasGetAll="getAll"in h;for(var m=0;m<h.indexNames.length;++m){var b=h.indexNames[m],k=h.index(b).keyPath,S=typeof k=="string"?k:"["+ge(k).join("+")+"]";!t[u]||(k=t[u].idxByName[S])&&(k.name=b,delete t[u].idxByName[S],t[u].idxByName[b]=k)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function si(e){return e.split(",").map(function(t,n){var i=(t=t.trim()).replace(/([&*]|\+\+)/g,""),o=/^\[/.test(i)?i.match(/^\[(.*)\]$/)[1].split("+"):i;return mr(i,o||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),y(o),n===0)})}var xo=(qn.prototype._parseStoresSpec=function(e,t){d(e).forEach(function(n){if(e[n]!==null){var i=si(e[n]),o=i.shift();if(o.unique=!0,o.multi)throw new re.Schema("Primary key cannot be multi-valued");i.forEach(function(u){if(u.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!u.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")}),t[n]=vr(n,o,i)}})},qn.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?O(this._cfg.storesSource,n):n;var n=t._versions,i={},o={};return n.forEach(function(u){O(i,u._cfg.storesSource),o=u._cfg.dbschema={},u._parseStoresSpec(i,o)}),t._dbSchema=o,gr(t,[t._allTables,t,t.Transaction.prototype]),An(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],d(o),o),t._storeNames=d(o),this},qn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=er(this._cfg.contentUpgrade||Oe,e),this},qn);function qn(){}function wr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new mt(On,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function kr(e){return e&&typeof e.databases=="function"}function xr(e){return gt(function(){return ne.letThrough=!0,e()})}function Tr(e){return!("from"in e)}var We=function(e,t){if(!this){var n=new We;return e&&"d"in e&&O(n,e),n}O(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function mn(e,t,n){var i=xe(t,n);if(!isNaN(i)){if(0<i)throw RangeError();if(Tr(e))return O(e,{from:t,to:n,d:1});var o=e.l,i=e.r;if(xe(n,e.from)<0)return o?mn(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},li(e);if(0<xe(t,e.to))return i?mn(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},li(e);xe(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),0<xe(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,o&&!e.l&&vn(e,o),i&&n&&vn(e,i)}}function vn(e,t){Tr(t)||function n(i,b){var u=b.from,h=b.to,m=b.l,b=b.r;mn(i,u,h),m&&n(i,m),b&&n(i,b)}(e,t)}function ui(e,t){var n=Fn(t),i=n.next();if(i.done)return!1;for(var o=i.value,u=Fn(e),h=u.next(o.from),m=h.value;!i.done&&!h.done;){if(xe(m.from,o.to)<=0&&0<=xe(m.to,o.from))return!0;xe(o.from,m.from)<0?o=(i=n.next(m.from)).value:m=(h=u.next(o.from)).value}return!1}function Fn(e){var t=Tr(e)?null:{s:0,n:e};return{next:function(n){for(var i=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,i)for(;t.n.l&&xe(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!i||xe(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function li(e){var t,n,i=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),o=1<i?"r":i<-1?"l":"";o&&(t=o=="r"?"l":"r",n=a({},e),i=e[o],e.from=i.from,e.to=i.to,e[o]=i[o],n[o]=i[t],(e[t]=n).d=ci(n)),e.d=ci(e)}function ci(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function Ln(e,t){return d(t).forEach(function(n){e[n]?vn(e[n],t[n]):e[n]=function i(o){var u,h,m={};for(u in o)I(o,u)&&(h=o[u],m[u]=!h||typeof h!="object"||Ie.has(h.constructor)?h:i(h));return m}(t[n])}),e}function Sr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&ui(t[n],e[n])})}v(We.prototype,((it={add:function(e){return vn(this,e),this},addKey:function(e){return mn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return mn(t,n,n)}),this},hasKey:function(e){var t=Fn(this).next(e).value;return t&&xe(t.from,e)<=0&&0<=xe(t.to,e)}})[Ce]=function(){return Fn(this)},it));var Lt={},Cr={},Er=!1;function Un(e){Ln(Cr,e),Er||(Er=!0,setTimeout(function(){Er=!1,Ir(Cr,!(Cr={}))},0))}function Ir(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var i=0,o=Object.values(Lt);i<o.length;i++)fi(h=o[i],e,n,t);else for(var u in e){var h,m=/^idb\:\/\/(.*)\/(.*)\//.exec(u);m&&(u=m[1],m=m[2],(h=Lt["idb://".concat(u,"/").concat(m)])&&fi(h,e,n,t))}n.forEach(function(b){return b()})}function fi(e,t,n,i){for(var o=[],u=0,h=Object.entries(e.queries.query);u<h.length;u++){for(var m=h[u],b=m[0],k=[],S=0,g=m[1];S<g.length;S++){var E=g[S];Sr(t,E.obsSet)?E.subscribers.forEach(function(x){return n.add(x)}):i&&k.push(E)}i&&o.push([b,k])}if(i)for(var w=0,T=o;w<T.length;w++){var C=T[w],b=C[0],k=C[1];e.queries.query[b]=k}}function To(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Fe(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var i=t.openCanceller,o=Math.round(10*e.verno),u=!1;function h(){if(t.openCanceller!==i)throw new re.DatabaseClosed("db.open() was cancelled")}function m(){return new W(function(E,w){if(h(),!n)throw new re.MissingAPI;var T=e.name,C=t.autoSchema||!o?n.open(T):n.open(T,o);if(!C)throw new re.MissingAPI;C.onerror=ft(w),C.onblocked=je(e._fireOnBlocked),C.onupgradeneeded=je(function(x){var P;S=C.transaction,t.autoSchema&&!e._options.allowEmptyDB?(C.onerror=fn,S.abort(),C.result.close(),(P=n.deleteDatabase(T)).onsuccess=P.onerror=je(function(){w(new re.NoSuchDatabase("Database ".concat(T," doesnt exist")))})):(S.onerror=ft(w),x=x.oldVersion>Math.pow(2,62)?0:x.oldVersion,g=x<1,e.idbdb=C.result,u&&ko(e,S),wo(e,x/10,S,w))},w),C.onsuccess=je(function(){S=null;var x,P,D,j,K,N=e.idbdb=C.result,U=ge(N.objectStoreNames);if(0<U.length)try{var q=N.transaction((j=U).length===1?j[0]:j,"readonly");if(t.autoSchema)P=N,D=q,(x=e).verno=P.version/10,D=x._dbSchema=Mn(0,P,D),x._storeNames=ge(P.objectStoreNames,0),An(x,[x._allTables],d(D),D);else if(Nn(e,e._dbSchema,q),((K=_r(Mn(0,(K=e).idbdb,q),K._dbSchema)).add.length||K.change.some(function(F){return F.add.length||F.change.length}))&&!u)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),N.close(),o=N.version+1,u=!0,E(m());Rn(e,q)}catch{}Qt.push(e),N.onversionchange=je(function(F){t.vcFired=!0,e.on("versionchange").fire(F)}),N.onclose=je(function(F){e.on("close").fire(F)}),g&&(K=e._deps,q=T,N=K.indexedDB,K=K.IDBKeyRange,kr(N)||q===On||wr(N,K).put({name:q}).catch(Oe)),E()},w)}).catch(function(E){switch(E==null?void 0:E.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),m();break;case"VersionError":if(0<o)return o=0,m()}return W.reject(E)})}var b,k=t.dbReadyResolve,S=null,g=!1;return W.race([i,(typeof navigator>"u"?W.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(E){function w(){return indexedDB.databases().finally(E)}b=setInterval(w,100),w()}).finally(function(){return clearInterval(b)}):Promise.resolve()).then(m)]).then(function(){return h(),t.onReadyBeingFired=[],W.resolve(xr(function(){return e.on.ready.fire(e.vip)})).then(function E(){if(0<t.onReadyBeingFired.length){var w=t.onReadyBeingFired.reduce(er,Oe);return t.onReadyBeingFired=[],W.resolve(xr(function(){return w(e.vip)})).then(E)}})}).finally(function(){t.openCanceller===i&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(E){t.dbOpenError=E;try{S&&S.abort()}catch{}return i===t.openCanceller&&e._close(),Fe(E)}).finally(function(){t.openComplete=!0,k()}).then(function(){var E;return g&&(E={},e.tables.forEach(function(w){w.schema.indexes.forEach(function(T){T.name&&(E["idb://".concat(e.name,"/").concat(w.name,"/").concat(T.name)]=new We(-1/0,[[[]]]))}),E["idb://".concat(e.name,"/").concat(w.name,"/")]=E["idb://".concat(e.name,"/").concat(w.name,"/:dels")]=new We(-1/0,[[[]]])}),kt(dn).fire(E),Ir(E,!0)),e})}function Or(e){function t(u){return e.next(u)}var n=o(t),i=o(function(u){return e.throw(u)});function o(u){return function(b){var m=u(b),b=m.value;return m.done?b:b&&typeof b.then=="function"?b.then(n,i):y(b)?Promise.all(b).then(n,i):n(b)}}return o(t)()}function Vn(e,t,n){for(var i=y(e)?e.slice():[e],o=0;o<n;++o)i.push(t);return i}var So={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return a(a({},e),{table:function(t){var n=e.table(t),i=n.schema,o={},u=[];function h(g,E,w){var T=pn(g),C=o[T]=o[T]||[],x=g==null?0:typeof g=="string"?1:g.length,P=0<E,P=a(a({},w),{name:P?"".concat(T,"(virtual-from:").concat(w.name,")"):w.name,lowLevelIndex:w,isVirtual:P,keyTail:E,keyLength:x,extractKey:yr(g),unique:!P&&w.unique});return C.push(P),P.isPrimaryKey||u.push(P),1<x&&h(x===2?g[0]:g.slice(0,x-1),E+1,w),C.sort(function(D,j){return D.keyTail-j.keyTail}),P}t=h(i.primaryKey.keyPath,0,i.primaryKey),o[":id"]=[t];for(var m=0,b=i.indexes;m<b.length;m++){var k=b[m];h(k.keyPath,0,k)}function S(g){var E,w=g.query.index;return w.isVirtual?a(a({},g),{query:{index:w.lowLevelIndex,range:(E=g.query.range,w=w.keyTail,{type:E.type===1?2:E.type,lower:Vn(E.lower,E.lowerOpen?e.MAX_KEY:e.MIN_KEY,w),lowerOpen:!0,upper:Vn(E.upper,E.upperOpen?e.MIN_KEY:e.MAX_KEY,w),upperOpen:!0})}}):g}return a(a({},n),{schema:a(a({},i),{primaryKey:t,indexes:u,getIndexByKeyPath:function(g){return(g=o[pn(g)])&&g[0]}}),count:function(g){return n.count(S(g))},query:function(g){return n.query(S(g))},openCursor:function(g){var E=g.query.index,w=E.keyTail,T=E.isVirtual,C=E.keyLength;return T?n.openCursor(S(g)).then(function(P){return P&&x(P)}):n.openCursor(g);function x(P){return Object.create(P,{continue:{value:function(D){D!=null?P.continue(Vn(D,g.reverse?e.MAX_KEY:e.MIN_KEY,w)):g.unique?P.continue(P.key.slice(0,C).concat(g.reverse?e.MIN_KEY:e.MAX_KEY,w)):P.continue()}},continuePrimaryKey:{value:function(D,j){P.continuePrimaryKey(Vn(D,e.MAX_KEY,w),j)}},primaryKey:{get:function(){return P.primaryKey}},key:{get:function(){var D=P.key;return C===1?D[0]:D.slice(0,C)}},value:{get:function(){return P.value}}})}}})}})}};function Pr(e,t,n,i){return n=n||{},i=i||"",d(e).forEach(function(o){var u,h,m;I(t,o)?(u=e[o],h=t[o],typeof u=="object"&&typeof h=="object"&&u&&h?(m=Qe(u))!==Qe(h)?n[i+o]=t[o]:m==="Object"?Pr(u,h,n,i+o+"."):u!==h&&(n[i+o]=t[o]):u!==h&&(n[i+o]=t[o])):n[i+o]=void 0}),d(t).forEach(function(o){I(e,o)||(n[i+o]=t[o])}),n}function Dr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Co={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return a(a({},e),{table:function(t){var n=e.table(t),i=n.schema.primaryKey;return a(a({},n),{mutate:function(o){var u=ne.trans,h=u.table(t).hook,m=h.deleting,b=h.creating,k=h.updating;switch(o.type){case"add":if(b.fire===Oe)break;return u._promise("readwrite",function(){return S(o)},!0);case"put":if(b.fire===Oe&&k.fire===Oe)break;return u._promise("readwrite",function(){return S(o)},!0);case"delete":if(m.fire===Oe)break;return u._promise("readwrite",function(){return S(o)},!0);case"deleteRange":if(m.fire===Oe)break;return u._promise("readwrite",function(){return function g(E,w,T){return n.query({trans:E,values:!1,query:{index:i,range:w},limit:T}).then(function(C){var x=C.result;return S({type:"delete",keys:x,trans:E}).then(function(P){return 0<P.numFailures?Promise.reject(P.failures[0]):x.length<T?{failures:[],numFailures:0,lastResult:void 0}:g(E,a(a({},w),{lower:x[x.length-1],lowerOpen:!0}),T)})})}(o.trans,o.range,1e4)},!0)}return n.mutate(o);function S(g){var E,w,T,C=ne.trans,x=g.keys||Dr(i,g);if(!x)throw new Error("Keys missing");return(g=g.type==="add"||g.type==="put"?a(a({},g),{keys:x}):a({},g)).type!=="delete"&&(g.values=f([],g.values)),g.keys&&(g.keys=f([],g.keys)),E=n,T=x,((w=g).type==="add"?Promise.resolve([]):E.getMany({trans:w.trans,keys:T,cache:"immutable"})).then(function(P){var D=x.map(function(j,K){var N,U,q,F=P[K],Y={onerror:null,onsuccess:null};return g.type==="delete"?m.fire.call(Y,j,F,C):g.type==="add"||F===void 0?(N=b.fire.call(Y,j,g.values[K],C),j==null&&N!=null&&(g.keys[K]=j=N,i.outbound||te(g.values[K],i.keyPath,j))):(N=Pr(F,g.values[K]),(U=k.fire.call(Y,N,j,F,C))&&(q=g.values[K],Object.keys(U).forEach(function(L){I(q,L)?q[L]=U[L]:te(q,L,U[L])}))),Y});return n.mutate(g).then(function(j){for(var K=j.failures,N=j.results,U=j.numFailures,j=j.lastResult,q=0;q<x.length;++q){var F=(N||x)[q],Y=D[q];F==null?Y.onerror&&Y.onerror(K[q]):Y.onsuccess&&Y.onsuccess(g.type==="put"&&P[q]?g.values[q]:F)}return{failures:K,results:N,numFailures:U,lastResult:j}}).catch(function(j){return D.forEach(function(K){return K.onerror&&K.onerror(j)}),Promise.reject(j)})})}}})}})}};function di(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var i=[],o=0,u=0;o<t.keys.length&&u<e.length;++o)xe(t.keys[o],e[u])===0&&(i.push(n?ke(t.values[o]):t.values[o]),++u);return i.length===e.length?i:null}catch{return null}}var Eo={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return a(a({},n),{getMany:function(i){if(!i.cache)return n.getMany(i);var o=di(i.keys,i.trans._cache,i.cache==="clone");return o?W.resolve(o):n.getMany(i).then(function(u){return i.trans._cache={keys:i.keys,values:i.cache==="clone"?ke(u):u},u})},mutate:function(i){return i.type!=="add"&&(i.trans._cache=null),n.mutate(i)}})}}}};function hi(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function pi(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Io={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new We(e.MIN_KEY,e.MAX_KEY);return a(a({},e),{transaction:function(i,o,u){if(ne.subscr&&o!=="readonly")throw new re.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ne.querier));return e.transaction(i,o,u)},table:function(i){var o=e.table(i),u=o.schema,h=u.primaryKey,g=u.indexes,m=h.extractKey,b=h.outbound,k=h.autoIncrement&&g.filter(function(w){return w.compound&&w.keyPath.includes(h.keyPath)}),S=a(a({},o),{mutate:function(w){function T(L){return L="idb://".concat(t,"/").concat(i,"/").concat(L),j[L]||(j[L]=new We)}var C,x,P,D=w.trans,j=w.mutatedParts||(w.mutatedParts={}),K=T(""),N=T(":dels"),U=w.type,Y=w.type==="deleteRange"?[w.range]:w.type==="delete"?[w.keys]:w.values.length<50?[Dr(h,w).filter(function(L){return L}),w.values]:[],q=Y[0],F=Y[1],Y=w.trans._cache;return y(q)?(K.addKeys(q),(Y=U==="delete"||q.length===F.length?di(q,Y):null)||N.addKeys(q),(Y||F)&&(C=T,x=Y,P=F,u.indexes.forEach(function(L){var Q=C(L.name||"");function pe(be){return be!=null?L.extractKey(be):null}function _e(be){return L.multiEntry&&y(be)?be.forEach(function(tt){return Q.addKey(tt)}):Q.addKey(be)}(x||P).forEach(function(be,Ge){var he=x&&pe(x[Ge]),Ge=P&&pe(P[Ge]);xe(he,Ge)!==0&&(he!=null&&_e(he),Ge!=null&&_e(Ge))})}))):q?(F={from:(F=q.lower)!==null&&F!==void 0?F:e.MIN_KEY,to:(F=q.upper)!==null&&F!==void 0?F:e.MAX_KEY},N.add(F),K.add(F)):(K.add(n),N.add(n),u.indexes.forEach(function(L){return T(L.name).add(n)})),o.mutate(w).then(function(L){return!q||w.type!=="add"&&w.type!=="put"||(K.addKeys(L.results),k&&k.forEach(function(Q){for(var pe=w.values.map(function(he){return Q.extractKey(he)}),_e=Q.keyPath.findIndex(function(he){return he===h.keyPath}),be=0,tt=L.results.length;be<tt;++be)pe[be][_e]=L.results[be];T(Q.name).addKeys(pe)})),D.mutatedParts=Ln(D.mutatedParts||{},j),L})}}),g=function(T){var C=T.query,T=C.index,C=C.range;return[T,new We((T=C.lower)!==null&&T!==void 0?T:e.MIN_KEY,(C=C.upper)!==null&&C!==void 0?C:e.MAX_KEY)]},E={get:function(w){return[h,new We(w.key)]},getMany:function(w){return[h,new We().addKeys(w.keys)]},count:g,query:g,openCursor:g};return d(E).forEach(function(w){S[w]=function(T){var C=ne.subscr,x=!!C,P=hi(ne,o)&&pi(w,T)?T.obsSet={}:C;if(x){var D=function(F){return F="idb://".concat(t,"/").concat(i,"/").concat(F),P[F]||(P[F]=new We)},j=D(""),K=D(":dels"),C=E[w](T),x=C[0],C=C[1];if((w==="query"&&x.isPrimaryKey&&!T.values?K:D(x.name||"")).add(C),!x.isPrimaryKey){if(w!=="count"){var N=w==="query"&&b&&T.values&&o.query(a(a({},T),{values:!1}));return o[w].apply(this,arguments).then(function(F){if(w==="query"){if(b&&T.values)return N.then(function(pe){return pe=pe.result,j.addKeys(pe),F});var Y=T.values?F.result.map(m):F.result;(T.values?j:K).addKeys(Y)}else if(w==="openCursor"){var L=F,Q=T.values;return L&&Object.create(L,{key:{get:function(){return K.addKey(L.primaryKey),L.key}},primaryKey:{get:function(){var pe=L.primaryKey;return K.addKey(pe),pe}},value:{get:function(){return Q&&j.addKey(L.primaryKey),L.value}}})}return F})}K.add(n)}}return o[w].apply(this,arguments)}}),S}})}};function mi(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var i=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===i?null:(t=a({},t),y(t.keys)&&(t.keys=t.keys.filter(function(o,u){return!(u in n.failures)})),"values"in t&&y(t.values)&&(t.values=t.values.filter(function(o,u){return!(u in n.failures)})),t)}function jr(e,t){return n=e,((i=t).lower===void 0||(i.lowerOpen?0<xe(n,i.lower):0<=xe(n,i.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?xe(e,t.upper)<0:xe(e,t.upper)<=0));var n,i}function vi(e,t,E,i,o,u){if(!E||E.length===0)return e;var h=t.query.index,m=h.multiEntry,b=t.query.range,k=i.schema.primaryKey.extractKey,S=h.extractKey,g=(h.lowLevelIndex||h).extractKey,E=E.reduce(function(w,T){var C=w,x=[];if(T.type==="add"||T.type==="put")for(var P=new We,D=T.values.length-1;0<=D;--D){var j,K=T.values[D],N=k(K);P.hasKey(N)||(j=S(K),(m&&y(j)?j.some(function(L){return jr(L,b)}):jr(j,b))&&(P.addKey(N),x.push(K)))}switch(T.type){case"add":var U=new We().addKeys(t.values?w.map(function(Q){return k(Q)}):w),C=w.concat(t.values?x.filter(function(Q){return Q=k(Q),!U.hasKey(Q)&&(U.addKey(Q),!0)}):x.map(function(Q){return k(Q)}).filter(function(Q){return!U.hasKey(Q)&&(U.addKey(Q),!0)}));break;case"put":var q=new We().addKeys(T.values.map(function(Q){return k(Q)}));C=w.filter(function(Q){return!q.hasKey(t.values?k(Q):Q)}).concat(t.values?x:x.map(function(Q){return k(Q)}));break;case"delete":var F=new We().addKeys(T.keys);C=w.filter(function(Q){return!F.hasKey(t.values?k(Q):Q)});break;case"deleteRange":var Y=T.range;C=w.filter(function(Q){return!jr(k(Q),Y)})}return C},e);return E===e?e:(E.sort(function(w,T){return xe(g(w),g(T))||xe(k(w),k(T))}),t.limit&&t.limit<1/0&&(E.length>t.limit?E.length=t.limit:e.length===t.limit&&E.length<t.limit&&(o.dirty=!0)),u?Object.freeze(E):E)}function yi(e,t){return xe(e.lower,t.lower)===0&&xe(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Oo(e,t){return function(n,i,o,u){if(n===void 0)return i!==void 0?-1:0;if(i===void 0)return 1;if((i=xe(n,i))===0){if(o&&u)return 0;if(o)return 1;if(u)return-1}return i}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,i,o,u){if(n===void 0)return i!==void 0?1:0;if(i===void 0)return-1;if((i=xe(n,i))===0){if(o&&u)return 0;if(o)return-1;if(u)return 1}return i}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Po(e,t,n,i){e.subscribers.add(n),i.addEventListener("abort",function(){var o,u;e.subscribers.delete(n),e.subscribers.size===0&&(o=e,u=t,setTimeout(function(){o.subscribers.size===0&&st(u,o)},3e3))})}var Do={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return a(a({},e),{transaction:function(n,i,o){var u,h,m=e.transaction(n,i,o);return i==="readwrite"&&(h=(u=new AbortController).signal,o=function(b){return function(){if(u.abort(),i==="readwrite"){for(var k=new Set,S=0,g=n;S<g.length;S++){var E=g[S],w=Lt["idb://".concat(t,"/").concat(E)];if(w){var T=e.table(E),C=w.optimisticOps.filter(function(Q){return Q.trans===m});if(m._explicit&&b&&m.mutatedParts)for(var x=0,P=Object.values(w.queries.query);x<P.length;x++)for(var D=0,j=(U=P[x]).slice();D<j.length;D++)Sr((q=j[D]).obsSet,m.mutatedParts)&&(st(U,q),q.subscribers.forEach(function(Q){return k.add(Q)}));else if(0<C.length){w.optimisticOps=w.optimisticOps.filter(function(Q){return Q.trans!==m});for(var K=0,N=Object.values(w.queries.query);K<N.length;K++)for(var U,q,F,Y=0,L=(U=N[K]).slice();Y<L.length;Y++)(q=L[Y]).res!=null&&m.mutatedParts&&(b&&!q.dirty?(F=Object.isFrozen(q.res),F=vi(q.res,q.req,C,T,q,F),q.dirty?(st(U,q),q.subscribers.forEach(function(Q){return k.add(Q)})):F!==q.res&&(q.res=F,q.promise=W.resolve({result:F}))):(q.dirty&&st(U,q),q.subscribers.forEach(function(Q){return k.add(Q)})))}}}k.forEach(function(Q){return Q()})}}},m.addEventListener("abort",o(!1),{signal:h}),m.addEventListener("error",o(!1),{signal:h}),m.addEventListener("complete",o(!0),{signal:h})),m},table:function(n){var i=e.table(n),o=i.schema.primaryKey;return a(a({},i),{mutate:function(u){var h=ne.trans;if(o.outbound||h.db._options.cache==="disabled"||h.explicit||h.idbtrans.mode!=="readwrite")return i.mutate(u);var m=Lt["idb://".concat(t,"/").concat(n)];return m?(h=i.mutate(u),u.type!=="add"&&u.type!=="put"||!(50<=u.values.length||Dr(o,u).some(function(b){return b==null}))?(m.optimisticOps.push(u),u.mutatedParts&&Un(u.mutatedParts),h.then(function(b){0<b.numFailures&&(st(m.optimisticOps,u),(b=mi(0,u,b))&&m.optimisticOps.push(b),u.mutatedParts&&Un(u.mutatedParts))}),h.catch(function(){st(m.optimisticOps,u),u.mutatedParts&&Un(u.mutatedParts)})):h.then(function(b){var k=mi(0,a(a({},u),{values:u.values.map(function(S,g){var E;return b.failures[g]?S:(S=(E=o.keyPath)!==null&&E!==void 0&&E.includes(".")?ke(S):a({},S),te(S,o.keyPath,b.results[g]),S)})}),b);m.optimisticOps.push(k),queueMicrotask(function(){return u.mutatedParts&&Un(u.mutatedParts)})}),h):i.mutate(u)},query:function(u){if(!hi(ne,i)||!pi("query",u))return i.query(u);var h=((k=ne.trans)===null||k===void 0?void 0:k.db._options.cache)==="immutable",g=ne,m=g.requery,b=g.signal,k=function(T,C,x,P){var D=Lt["idb://".concat(T,"/").concat(C)];if(!D)return[];if(!(C=D.queries[x]))return[null,!1,D,null];var j=C[(P.query?P.query.index.name:null)||""];if(!j)return[null,!1,D,null];switch(x){case"query":var K=j.find(function(N){return N.req.limit===P.limit&&N.req.values===P.values&&yi(N.req.query.range,P.query.range)});return K?[K,!0,D,j]:[j.find(function(N){return("limit"in N.req?N.req.limit:1/0)>=P.limit&&(!P.values||N.req.values)&&Oo(N.req.query.range,P.query.range)}),!1,D,j];case"count":return K=j.find(function(N){return yi(N.req.query.range,P.query.range)}),[K,!!K,D,j]}}(t,n,"query",u),S=k[0],g=k[1],E=k[2],w=k[3];return S&&g?S.obsSet=u.obsSet:(g=i.query(u).then(function(T){var C=T.result;if(S&&(S.res=C),h){for(var x=0,P=C.length;x<P;++x)Object.freeze(C[x]);Object.freeze(C)}else T.result=ke(C);return T}).catch(function(T){return w&&S&&st(w,S),Promise.reject(T)}),S={obsSet:u.obsSet,promise:g,subscribers:new Set,type:"query",req:u,dirty:!1},w?w.push(S):(w=[S],(E=E||(Lt["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[u.query.index.name||""]=w)),Po(S,w,m,b),S.promise.then(function(T){return{result:vi(T.result,u,E==null?void 0:E.optimisticOps,i,S,h)}})}})}})}};function Yn(e,t){return new Proxy(e,{get:function(n,i,o){return i==="db"?t:Reflect.get(n,i,o)}})}var mt=(Le.prototype.version=function(e){if(isNaN(e)||e<.1)throw new re.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(i){return i._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(bo),n.stores({}),this._state.autoSchema=!1,n)},Le.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||ne.letThrough||this._vip)?e():new W(function(n,i){if(t._state.openComplete)return i(new re.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void i(new re.DatabaseClosed);t.open().catch(Oe)}t._state.dbReadyPromise.then(n,i)}).then(e)},Le.prototype.use=function(e){var t=e.stack,n=e.create,i=e.level,o=e.name;return o&&this.unuse({stack:t,name:o}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:i??10,name:o}),e.sort(function(u,h){return u.level-h.level}),this},Le.prototype.unuse=function(e){var t=e.stack,n=e.name,i=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(o){return i?o.create!==i:!!n&&o.name!==n})),this},Le.prototype.open=function(){var e=this;return Nt(yt,function(){return To(e)})},Le.prototype._close=function(){var e=this._state,t=Qt.indexOf(this);if(0<=t&&Qt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new W(function(n){e.dbReadyResolve=n}),e.openCanceller=new W(function(n,i){e.cancelOpen=i}))},Le.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new re.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new re.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},Le.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",i=this._state;return new W(function(o,u){function h(){t.close(e);var m=t._deps.indexedDB.deleteDatabase(t.name);m.onsuccess=je(function(){var b,k,S;b=t._deps,k=t.name,S=b.indexedDB,b=b.IDBKeyRange,kr(S)||k===On||wr(S,b).delete(k).catch(Oe),o()}),m.onerror=ft(u),m.onblocked=t._fireOnBlocked}if(n)throw new re.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(h):h()})},Le.prototype.backendDB=function(){return this.idbdb},Le.prototype.isOpen=function(){return this.idbdb!==null},Le.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Le.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Le.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Le.prototype,"tables",{get:function(){var e=this;return d(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Le.prototype.transaction=function(){var e=(function(t,n,i){var o=arguments.length;if(o<2)throw new re.InvalidArgument("Too few arguments");for(var u=new Array(o-1);--o;)u[o-1]=arguments[o];return i=u.pop(),[t,Ae(u),i]}).apply(this,arguments);return this._transaction.apply(this,e)},Le.prototype._transaction=function(e,t,n){var i=this,o=ne.trans;o&&o.db===this&&e.indexOf("!")===-1||(o=null);var u,h,m=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(h=t.map(function(k){if(k=k instanceof i.Table?k.name:k,typeof k!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return k}),e=="r"||e===lr)u=lr;else{if(e!="rw"&&e!=cr)throw new re.InvalidArgument("Invalid transaction mode: "+e);u=cr}if(o){if(o.mode===lr&&u===cr){if(!m)throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&h.forEach(function(k){if(o&&o.storeNames.indexOf(k)===-1){if(!m)throw new re.SubTransaction("Table "+k+" not included in parent transaction.");o=null}}),m&&o&&!o.active&&(o=null)}}catch(k){return o?o._promise(null,function(S,g){g(k)}):Fe(k)}var b=(function k(S,g,E,w,T){return W.resolve().then(function(){var C=ne.transless||ne,x=S._createTransaction(g,E,S._dbSchema,w);if(x.explicit=!0,C={trans:x,transless:C},w)x.idbtrans=w.idbtrans;else try{x.create(),x.idbtrans._explicit=!0,S._state.PR1398_maxLoop=3}catch(j){return j.name===rt.InvalidState&&S.isOpen()&&0<--S._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),S.close({disableAutoOpen:!1}),S.open().then(function(){return k(S,g,E,null,T)})):Fe(j)}var P,D=ut(T);return D&&Xt(),C=W.follow(function(){var j;(P=T.call(x,x))&&(D?(j=_t.bind(null,null),P.then(j,j)):typeof P.next=="function"&&typeof P.throw=="function"&&(P=Or(P)))},C),(P&&typeof P.then=="function"?W.resolve(P).then(function(j){return x.active?j:Fe(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):C.then(function(){return P})).then(function(j){return w&&x._resolve(),x._completion.then(function(){return j})}).catch(function(j){return x._reject(j),Fe(j)})})}).bind(null,this,u,h,o,n);return o?o._promise(u,b,"lock"):ne.trans?Nt(ne.transless,function(){return i._whenReady(b)}):this._whenReady(b)},Le.prototype.table=function(e){if(!I(this._allTables,e))throw new re.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Le);function Le(e,t){var n=this;this._middlewares={},this.verno=0;var i=Le.dependencies;this._options=t=a({addons:Le.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},i=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o,u,h,m,b,k={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Oe,dbReadyPromise:null,cancelOpen:Oe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};k.dbReadyPromise=new W(function(g){k.dbReadyResolve=g}),k.openCanceller=new W(function(g,E){k.cancelOpen=E}),this._state=k,this.name=e,this.on=un(this,"populate","blocked","versionchange","close",{ready:[er,Oe]}),this.on.ready.subscribe=X(this.on.ready.subscribe,function(g){return function(E,w){Le.vip(function(){var T,C=n._state;C.openComplete?(C.dbOpenError||W.resolve().then(E),w&&g(E)):C.onReadyBeingFired?(C.onReadyBeingFired.push(E),w&&g(E)):(g(E),T=n,w||g(function x(){T.on.ready.unsubscribe(E),T.on.ready.unsubscribe(x)}))})}}),this.Collection=(o=this,ln(ho.prototype,function(P,x){this.db=o;var w=Gr,T=null;if(x)try{w=x()}catch(D){T=D}var C=P._ctx,x=C.table,P=x.hook.reading.fire;this._ctx={table:x,index:C.index,isPrimKey:!C.index||x.schema.primKey.keyPath&&C.index===x.schema.primKey.name,range:w,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:T,or:C.or,valueMapper:P!==nn?P:null}})),this.Table=(u=this,ln($r.prototype,function(g,E,w){this.db=u,this._tx=w,this.name=g,this.schema=E,this.hook=u._allTables[g]?u._allTables[g].hook:un(null,{creating:[ro,Oe],reading:[no,nn],updating:[oo,Oe],deleting:[io,Oe]})})),this.Transaction=(h=this,ln(vo.prototype,function(g,E,w,T,C){var x=this;this.db=h,this.mode=g,this.storeNames=E,this.schema=w,this.chromeTransactionDurability=T,this.idbtrans=null,this.on=un(this,"complete","error","abort"),this.parent=C||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new W(function(P,D){x._resolve=P,x._reject=D}),this._completion.then(function(){x.active=!1,x.on.complete.fire()},function(P){var D=x.active;return x.active=!1,x.on.error.fire(P),x.parent?x.parent._reject(P):D&&x.idbtrans&&x.idbtrans.abort(),Fe(P)})})),this.Version=(m=this,ln(xo.prototype,function(g){this.db=m,this._cfg={version:g,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(b=this,ln(ri.prototype,function(g,E,w){if(this.db=b,this._ctx={table:g,index:E===":id"?null:E,or:w},this._cmp=this._ascending=xe,this._descending=function(T,C){return xe(C,T)},this._max=function(T,C){return 0<xe(T,C)?T:C},this._min=function(T,C){return xe(T,C)<0?T:C},this._IDBKeyRange=b._deps.IDBKeyRange,!this._IDBKeyRange)throw new re.MissingAPI})),this.on("versionchange",function(g){0<g.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(g){!g.newVersion||g.newVersion<g.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(g.oldVersion/10))}),this._maxKey=hn(t.IDBKeyRange),this._createTransaction=function(g,E,w,T){return new n.Transaction(g,E,w,n._options.chromeTransactionDurability,T)},this._fireOnBlocked=function(g){n.on("blocked").fire(g),Qt.filter(function(E){return E.name===n.name&&E!==n&&!E._state.vcFired}).map(function(E){return E.on("versionchange").fire(g)})},this.use(Eo),this.use(Do),this.use(Io),this.use(So),this.use(Co);var S=new Proxy(this,{get:function(g,E,w){if(E==="_vip")return!0;if(E==="table")return function(C){return Yn(n.table(C),S)};var T=Reflect.get(g,E,w);return T instanceof $r?Yn(T,S):E==="tables"?T.map(function(C){return Yn(C,S)}):E==="_createTransaction"?function(){return Yn(T.apply(this,arguments),S)}:T}});this.vip=S,i.forEach(function(g){return g(n)})}var Hn,it=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",jo=(Kr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Kr.prototype[it]=function(){return this},Kr);function Kr(e){this._subscribe=e}try{Hn={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{Hn={indexedDB:null,IDBKeyRange:null}}function gi(e){var t,n=!1,i=new jo(function(o){var u=ut(e),h,m=!1,b={},k={},S={get closed(){return m},unsubscribe:function(){m||(m=!0,h&&h.abort(),g&&kt.storagemutated.unsubscribe(w))}};o.start&&o.start(S);var g=!1,E=function(){return ur(T)},w=function(C){Ln(b,C),Sr(k,b)&&E()},T=function(){var C,x,P;!m&&Hn.indexedDB&&(b={},C={},h&&h.abort(),h=new AbortController,P=function(D){var j=Wt();try{u&&Xt();var K=gt(e,D);return K=u?K.finally(_t):K}finally{j&&Gt()}}(x={subscr:C,signal:h.signal,requery:E,querier:e,trans:null}),Promise.resolve(P).then(function(D){n=!0,t=D,m||x.signal.aborted||(b={},function(j){for(var K in j)if(I(j,K))return;return 1}(k=C)||g||(kt(dn,w),g=!0),ur(function(){return!m&&o.next&&o.next(D)}))},function(D){n=!1,["DatabaseClosedError","AbortError"].includes(D==null?void 0:D.name)||m||ur(function(){m||o.error&&o.error(D)})}))};return setTimeout(E,0),S});return i.hasValue=function(){return n},i.getValue=function(){return t},i}var Ut=mt;function Rr(e){var t=xt;try{xt=!0,kt.storagemutated.fire(e),Ir(e,!0)}finally{xt=t}}v(Ut,a(a({},bn),{delete:function(e){return new Ut(e,{addons:[]}).delete()},exists:function(e){return new Ut(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=Ut.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(kr(n)?Promise.resolve(n.databases()).then(function(i){return i.map(function(o){return o.name}).filter(function(o){return o!==On})}):wr(n,t).toCollection().primaryKeys()).then(e)}catch{return Fe(new re.MissingAPI)}var t,n},defineClass:function(){return function(e){O(this,e)}},ignoreTransaction:function(e){return ne.trans?Nt(ne.transless,e):e()},vip:xr,async:function(e){return function(){try{var t=Or(e.apply(this,arguments));return t&&typeof t.then=="function"?t:W.resolve(t)}catch(n){return Fe(n)}}},spawn:function(e,t,n){try{var i=Or(e.apply(n,t||[]));return i&&typeof i.then=="function"?i:W.resolve(i)}catch(o){return Fe(o)}},currentTransaction:{get:function(){return ne.trans||null}},waitFor:function(e,t){return t=W.resolve(typeof e=="function"?Ut.ignoreTransaction(e):e).timeout(t||6e4),ne.trans?ne.trans.waitFor(t):t},Promise:W,debug:{get:function(){return ct},set:function(e){Lr(e)}},derive:$,extend:O,props:v,override:X,Events:un,on:kt,liveQuery:gi,extendObservabilitySet:Ln,getByKeyPath:ae,setByKeyPath:te,delByKeyPath:function(e,t){typeof t=="string"?te(e,t,void 0):"length"in t&&[].map.call(t,function(n){te(e,n,void 0)})},shallowClone:ee,deepClone:ke,getObjectDiff:Pr,cmp:xe,asap:fe,minKey:-1/0,addons:[],connections:Qt,errnames:rt,dependencies:Hn,cache:Lt,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),Ut.maxKey=hn(Ut.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(kt(dn,function(e){xt||(e=new CustomEvent(pr,{detail:e}),xt=!0,dispatchEvent(e),xt=!1)}),addEventListener(pr,function(e){e=e.detail,xt||Rr(e)}));var Zt,xt=!1,_i=function(){};return typeof BroadcastChannel<"u"&&((_i=function(){(Zt=new BroadcastChannel(pr)).onmessage=function(e){return e.data&&Rr(e.data)}})(),typeof Zt.unref=="function"&&Zt.unref(),kt(dn,function(e){xt||Zt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!mt.disableBfCache&&e.persisted){ct&&console.debug("Dexie: handling persisted pagehide"),Zt!=null&&Zt.close();for(var t=0,n=Qt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!mt.disableBfCache&&e.persisted&&(ct&&console.debug("Dexie: handling persisted pageshow"),_i(),Rr({all:new We(-1/0,[[]])}))})),W.rejectionMapper=function(e,t){return!e||e instanceof Re||e instanceof TypeError||e instanceof SyntaxError||!e.name||!lt[e.name]?e:(t=new lt[e.name](t||e.message,e),"stack"in e&&V(t,"stack",{get:function(){return this.inner.stack}}),t)},Lr(ct),a(mt,Object.freeze({__proto__:null,Dexie:mt,liveQuery:gi,Entity:Xr,cmp:xe,PropModification:cn,replacePrefix:function(e,t){return new cn({replacePrefix:[e,t]})},add:function(e){return new cn({add:e})},remove:function(e){return new cn({remove:e})},default:mt,RangeSet:We,mergeRanges:vn,rangesOverlap:ui}),{default:mt}),mt})})(eo);var Uo=eo.exports;const Mr=Lo(Uo),Si=Symbol.for("Dexie"),Zn=globalThis[Si]||(globalThis[Si]=Mr);if(Mr.semVer!==Zn.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Mr.semVer} and ${Zn.semVer}`);const{liveQuery:La,mergeRanges:Ua,rangesOverlap:Va,RangeSet:Ya,cmp:Ha,Entity:za,PropModification:Wa,replacePrefix:Ga,add:Xa,remove:Qa}=Zn;class Vo extends Zn{constructor(){super("MeditationGameDB");bi(this,"sessions");this.version(1).stores({sessions:"++id, levelId, timestamp"})}}const Ht=new Vo,nt=[{id:"L1",name:"Start here",minDuration:ot.ONE_MINUTE,maxDuration:ot.FIVE_MINUTES,description:"Notice distraction without judgment.",instructions:["Sit comfortably and bring your attention to the breath","Feel the air move through your nose as you breathe","Tap when you notice the mind has wandered","Every tap is a sign of awareness — it means you're learning","You're not here to be perfect. Just to begin."],completionTasks:[{id:"complete_2_sessions",description:"Complete 2 sessions"},{id:"tap_once",description:"Tap to mark at least one distraction"},{id:"no_early_exit",description:"Complete a session without ending early"},{id:"max_duration",description:"Complete a session with max duration"}],starRules:[{stars:1,scope:"cumulative",requirement:{type:"minTasks",count:1,from:"all"}},{stars:2,scope:"cumulative",requirement:{type:"minTasks",count:3,from:["complete_2_sessions","tap_once","no_early_exit"]}},{stars:3,scope:"cumulative",requirement:{type:"specificTasks",taskIds:["complete_2_sessions","tap_once","no_early_exit","max_duration"]}}]},{id:"L2",name:"Keep improving",minDuration:ot.FIVE_MINUTES,maxDuration:ot.FIFTEEN_MINUTES,description:"Gently return the mind to focus.",instructions:["Bring your attention to the feeling of the breath","Notice when thoughts pull you away, and tap when they do","Gently return your focus to the breath, again and again","Let the practice be steady, not strict","You're building the habit of coming back."],completionTasks:[{id:"complete_3_sessions",description:"Complete 3 sessions"},{id:"improve_tap_count",description:"Improve your tap count in 2 of 3 sessions"},{id:"session_under_5_taps",description:"Complete a session with 5 taps or fewer"},{id:"max_duration",description:"Complete a session with max duration"}],starRules:[{stars:1,scope:"cumulative",requirement:{type:"minTasks",count:1,from:"all"}},{stars:2,scope:"cumulative",requirement:{type:"minTasks",count:2,from:["complete_3_sessions","improve_tap_count","session_under_5_taps"]}},{stars:3,scope:"cumulative",requirement:{type:"specificTasks",taskIds:["complete_3_sessions","improve_tap_count","session_under_5_taps","max_duration"]}}]},{id:"L3",name:"Focus power",minDuration:ot.TEN_MINUTES,maxDuration:ot.THIRTY_MINUTES,description:"Feel a sense of continuity and confidence.",instructions:["Rest your mind on the breath like a steady beam of light","If the mind wanders, tap to acknowledge, then return","Let distractions come and go — stay grounded in breath","You're developing continuity — not by force, but by ease","Allow the mind to settle. You're ready for this."],completionTasks:[{id:"2_sessions_under_8_taps",description:"Complete 2 sessions with 8 or fewer taps"},{id:"one_min_no_taps",description:"Go one full minute without tapping during a session"},{id:"max_duration",description:"Complete a session with max duration"}],starRules:[{stars:1,scope:"cumulative",requirement:{type:"minTasks",count:1,from:"all"}},{stars:2,scope:"singleSession",requirement:{type:"minTasks",count:2,from:["2_sessions_under_8_taps","one_min_no_taps","max_duration"]}},{stars:3,scope:"cumulative",requirement:{type:"specificTasks",taskIds:["2_sessions_under_8_taps","one_min_no_taps","max_duration"]}}]}];function Ci(c,r,s){const a=c.slice();return a[9]=r[s],a}function Ei(c){let r,s="Exit Meditation",a,f,l,d;return{c(){r=z("button"),r.textContent=s,this.h()},l(y){r=H(y,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(r)!=="svelte-t4g94n"&&(r.textContent=s),this.h()},h(){M(r,"class","absolute top-4 left-1/2 transform -translate-x-1/2 btn variant-filled px-4 py-2")},m(y,O){se(y,r,O),f=!0,l||(d=vt(r,"click",c[4]),l=!0)},p:ze,i(y){f||(y&&at(()=>{f&&(a||(a=Ne(r,qe,{},!0)),a.run(1))}),f=!0)},o(y){y&&(a||(a=Ne(r,qe,{},!1)),a.run(0)),f=!1},d(y){y&&B(r),y&&a&&a.end(),l=!1,d()}}}function Ii(c){let r,s,a=c[9]+"",f,l;return{c(){r=z("p"),s=new Mo(!1),this.h()},l(d){r=H(d,"P",{class:!0});var y=oe(r);s=Bo(y,!1),y.forEach(B),this.h()},h(){s.a=null,M(r,"class","text-lg max-w-sm")},m(d,y){se(d,r,y),s.m(a,r),l=!0},p(d,y){(!l||y&4)&&a!==(a=d[9]+"")&&s.p(a)},i(d){l||(d&&at(()=>{l&&(f||(f=Ne(r,qe,{},!0)),f.run(1))}),l=!0)},o(d){d&&(f||(f=Ne(r,qe,{},!1)),f.run(0)),l=!1},d(d){d&&B(r),d&&f&&f.end()}}}function Oi(c){let r,s="Start meditation countdown",a,f,l,d,y=Br[c[1]]+"",O,_,p,I;return{c(){r=z("button"),r.textContent=s,f=ve(),l=z("i"),d=ce("Meditating for "),O=ce(y),this.h()},l(v){r=H(v,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(r)!=="svelte-71gbpm"&&(r.textContent=s),f=me(v),l=H(v,"I",{class:!0});var A=oe(l);d=le(A,"Meditating for "),O=le(A,y),A.forEach(B),this.h()},h(){M(r,"class","btn variant-filled px-4 py-2 mt-4"),M(l,"class","text-sm text-gray-500")},m(v,A){se(v,r,A),se(v,f,A),se(v,l,A),R(l,d),R(l,O),_=!0,p||(I=vt(r,"click",function(){No(c[0])&&c[0].apply(this,arguments)}),p=!0)},p(v,A){c=v,(!_||A&2)&&y!==(y=Br[c[1]]+"")&&Ue(O,y)},i(v){_||(v&&at(()=>{_&&(a||(a=Ne(r,qe,{},!0)),a.run(1))}),_=!0)},o(v){v&&(a||(a=Ne(r,qe,{},!1)),a.run(0)),_=!1},d(v){v&&(B(r),B(f),B(l)),v&&a&&a.end(),p=!1,I()}}}function Yo(c){let r,s,a,f,l=c[2]>=c[3].length&&Ei(c),d=$e(c[3].slice(0,c[2])),y=[];for(let p=0;p<d.length;p+=1)y[p]=Ii(Ci(c,d,p));const O=p=>Ke(y[p],1,1,()=>{y[p]=null});let _=c[2]>=c[3].length&&Oi(c);return{c(){r=z("div"),l&&l.c(),s=ve();for(let p=0;p<y.length;p+=1)y[p].c();a=ve(),_&&_.c(),this.h()},l(p){r=H(p,"DIV",{class:!0});var I=oe(r);l&&l.l(I),s=me(I);for(let v=0;v<y.length;v+=1)y[v].l(I);a=me(I),_&&_.l(I),I.forEach(B),this.h()},h(){M(r,"class","w-full h-full flex flex-col justify-center items-center px-6 space-y-6 text-center relative")},m(p,I){se(p,r,I),l&&l.m(r,null),R(r,s);for(let v=0;v<y.length;v+=1)y[v]&&y[v].m(r,null);R(r,a),_&&_.m(r,null),f=!0},p(p,[I]){if(p[2]>=p[3].length?l?(l.p(p,I),I&4&&Ee(l,1)):(l=Ei(p),l.c(),Ee(l,1),l.m(r,s)):l&&(Tt(),Ke(l,1,1,()=>{l=null}),St()),I&12){d=$e(p[3].slice(0,p[2]));let v;for(v=0;v<d.length;v+=1){const A=Ci(p,d,v);y[v]?(y[v].p(A,I),Ee(y[v],1)):(y[v]=Ii(A),y[v].c(),Ee(y[v],1),y[v].m(r,a))}for(Tt(),v=d.length;v<y.length;v+=1)O(v);St()}p[2]>=p[3].length?_?(_.p(p,I),I&4&&Ee(_,1)):(_=Oi(p),_.c(),Ee(_,1),_.m(r,null)):_&&(Tt(),Ke(_,1,1,()=>{_=null}),St())},i(p){if(!f){Ee(l);for(let I=0;I<d.length;I+=1)Ee(y[I]);Ee(_),f=!0}},o(p){Ke(l),y=y.filter(Boolean);for(let I=0;I<y.length;I+=1)Ke(y[I]);Ke(_),f=!1},d(p){p&&B(r),l&&l.d(),zt(y,p),_&&_.d()}}}function Ho(c,r,s){let{nextStep:a}=r,{closeModal:f}=r,{duration:l}=r,{levelId:d="L1"}=r;const y=nt.find(v=>v.id===d),O=["1. Feel the air move through your nose as you breathe","2. <b>Tap anywhere on the screen</b> when you lose focus","3. <b>Exit meditation</b> to end early","4. Relax and have fun"],_=(y==null?void 0:y.instructions)||O;let p=0;Ji(()=>{ht.capture("instructions_viewed",{level:d});const v=setInterval(()=>{p<_.length+1?s(2,p+=1):clearInterval(v)},1e3)});const I=()=>{ht.capture("instructions_exit",{instructions_viewed:p,level:d}),f()};return c.$$set=v=>{"nextStep"in v&&s(0,a=v.nextStep),"closeModal"in v&&s(5,f=v.closeModal),"duration"in v&&s(1,l=v.duration),"levelId"in v&&s(6,d=v.levelId)},[a,l,p,_,I,f,d]}class zo extends Et{constructor(r){super(),It(this,r,Ho,Yo,Ct,{nextStep:0,closeModal:5,duration:1,levelId:6})}}const Wo=c=>{const r=c%60;return(c/60>1?`${Math.floor(c/60)}:`:"")+`${r<10?"0":""}${r}`};function tn(c){const r=c/60;return Number.isInteger(r)?r:Math.round(r*10)/10}function Go(c){let r,s,a,f,l,d;return{c(){r=Gn("svg"),s=Gn("circle"),a=Gn("circle"),l=Gn("text"),d=ce(c[1]),this.h()},l(y){r=Wn(y,"svg",{class:!0,viewBox:!0});var O=oe(r);s=Wn(O,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),oe(s).forEach(B),a=Wn(O,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,transform:!0}),oe(a).forEach(B),l=Wn(O,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0,fill:!0});var _=oe(l);d=le(_,c[1]),_.forEach(B),O.forEach(B),this.h()},h(){M(s,"cx","50"),M(s,"cy","50"),M(s,"r","40"),M(s,"stroke","gray"),M(s,"stroke-width","5"),M(s,"fill","none"),M(a,"cx","50"),M(a,"cy","50"),M(a,"r","40"),M(a,"stroke","blue"),M(a,"stroke-width","5"),M(a,"fill","none"),M(a,"stroke-dasharray","251.2"),M(a,"stroke-dashoffset",f=251.2*c[0]),M(a,"transform","rotate(-90 50 50)"),M(l,"x","50"),M(l,"y","55"),M(l,"font-size","14"),M(l,"text-anchor","middle"),M(l,"fill","black"),M(r,"class","w-32 h-32"),M(r,"viewBox","0 0 100 100")},m(y,O){se(y,r,O),R(r,s),R(r,a),R(r,l),R(l,d)},p(y,[O]){O&1&&f!==(f=251.2*y[0])&&M(a,"stroke-dashoffset",f),O&2&&Ue(d,y[1])},i:ze,o:ze,d(y){y&&B(r)}}}const Xo="/sounds/gong.mp3";function Qo(c,r,s){let a,f,{duration:l}=r,{startTimestamp:d}=r;const y=$i();let O=Qn(l),_=null,p,I=new Audio(Xo);const v=xi(O,J=>Wo(J));$n(c,v,J=>s(1,f=J));const A=xi(O,J=>J/l);$n(c,A,J=>s(0,a=J));const V=()=>{clearInterval(p),I.play(),y("complete")},$=async J=>{try{if(!("wakeLock"in navigator))return;J?_=await navigator.wakeLock.request("screen"):_&&(await _.release(),_=null)}catch(G){console.error(`Wake Lock ${J?"request":"release"} failed:`,G)}};return Ji(()=>{s(4,d=Date.now()),p=setInterval(()=>{O.update(J=>J>0?J-1:(V(),0))},1e3),$(!0)}),qo(()=>{clearInterval(p),$(!1)}),c.$$set=J=>{"duration"in J&&s(5,l=J.duration),"startTimestamp"in J&&s(4,d=J.startTimestamp)},[a,f,v,A,d,l]}class to extends Et{constructor(r){super(),It(this,r,Qo,Go,Ct,{duration:5,startTimestamp:4})}}function Jo(c){let r,s,a,f="Your meditation starts in:",l,d,y,O,_,p="Exit Meditation",I,v,A,V;function $(G){c[6](G)}let J={duration:$o};return c[0]!==void 0&&(J.startTimestamp=c[0]),d=new to({props:J}),Nr.push(()=>Fr(d,"startTimestamp",$)),d.$on("complete",c[1]),{c(){r=z("div"),s=z("div"),a=z("p"),a.textContent=f,l=ve(),jt(d.$$.fragment),O=ve(),_=z("button"),_.textContent=p,this.h()},l(G){r=H(G,"DIV",{class:!0});var ge=oe(r);s=H(ge,"DIV",{class:!0});var X=oe(s);a=H(X,"P",{class:!0,"data-svelte-h":!0}),Me(a)!=="svelte-1tp8zka"&&(a.textContent=f),l=me(X),Dt(d.$$.fragment,X),X.forEach(B),O=me(ge),_=H(ge,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(_)!=="svelte-hy6wnc"&&(_.textContent=p),ge.forEach(B),this.h()},h(){M(a,"class","text-lg mt-4 text-center"),M(s,"class","absolute flex flex-col items-center pointer-events-auto"),M(_,"class","absolute top-4 left-1/2 transform -translate-x-1/2 btn variant-outlined px-4 py-2 pointer-events-auto"),M(r,"class","w-full h-full flex flex-col items-center justify-center relative pointer-events-none")},m(G,ge){se(G,r,ge),R(r,s),R(s,a),R(s,l),Pt(d,s,null),R(r,O),R(r,_),v=!0,A||(V=vt(_,"click",c[2]),A=!0)},p(G,[ge]){const X={};!y&&ge&1&&(y=!0,X.startTimestamp=G[0],qr(()=>y=!1)),d.$set(X)},i(G){v||(Ee(d.$$.fragment,G),G&&at(()=>{v&&(I||(I=Ne(_,qe,{},!0)),I.run(1))}),v=!0)},o(G){Ke(d.$$.fragment,G),G&&(I||(I=Ne(_,qe,{},!1)),I.run(0)),v=!1},d(G){G&&B(r),Ot(d),G&&I&&I.end(),A=!1,V()}}}const $o=10;function Zo(c,r,s){let{nextStep:a}=r,{closeModal:f}=r,{levelId:l="L1"}=r,d=0;ht.capture("countdown_started",{level:l});const y=()=>{ht.capture("countdown_complete",{level:l}),a()},O=()=>{ht.capture("countdown_exit",{duration_counteddown:(Date.now()-d)/1e3,level:l}),f()};function _(p){d=p,s(0,d)}return c.$$set=p=>{"nextStep"in p&&s(3,a=p.nextStep),"closeModal"in p&&s(4,f=p.closeModal),"levelId"in p&&s(5,l=p.levelId)},[d,y,O,a,f,l,_]}class ea extends Et{constructor(r){super(),It(this,r,Zo,Jo,Ct,{nextStep:3,closeModal:4,levelId:5})}}function ta(c){let r,s;return{c(){r=z("br"),s=z("br")},l(a){r=H(a,"BR",{}),s=H(a,"BR",{})},m(a,f){se(a,r,f),se(a,s,f)},p:ze,d(a){a&&(B(r),B(s))}}}function na(c){let r,s,a;return{c(){r=z("i"),s=ce(c[2]),a=ce(" distraction"),this.h()},l(f){r=H(f,"I",{class:!0});var l=oe(r);s=le(l,c[2]),a=le(l," distraction"),l.forEach(B),this.h()},h(){M(r,"class","text-sm text-gray-500")},m(f,l){se(f,r,l),R(r,s),R(r,a)},p(f,l){l&4&&Ue(s,f[2])},d(f){f&&B(r)}}}function ra(c){let r,s,a;return{c(){r=z("i"),s=ce(c[2]),a=ce(" distractions"),this.h()},l(f){r=H(f,"I",{class:!0});var l=oe(r);s=le(l,c[2]),a=le(l," distractions"),l.forEach(B),this.h()},h(){M(r,"class","text-sm text-gray-500")},m(f,l){se(f,r,l),R(r,s),R(r,a)},p(f,l){l&4&&Ue(s,f[2])},d(f){f&&B(r)}}}function Pi(c){let r;return{c(){r=z("div"),this.h()},l(s){r=H(s,"DIV",{class:!0,style:!0}),oe(r).forEach(B),this.h()},h(){M(r,"class","ripple svelte-1wv6db6"),Xn(r,"top",c[3].y+"px"),Xn(r,"left",c[3].x+"px")},m(s,a){se(s,r,a)},p(s,a){a&8&&Xn(r,"top",s[3].y+"px"),a&8&&Xn(r,"left",s[3].x+"px")},d(s){s&&B(r)}}}function ia(c){let r,s,a,f,l,d,y="Tap anywhere on the screen to record your distractions",O,_,p,I,v,A="Exit Meditation",V,$,J,G;function ge(ee){c[11](ee)}let X={duration:c[0]};c[1]!==void 0&&(X.startTimestamp=c[1]),a=new to({props:X}),Nr.push(()=>Fr(a,"startTimestamp",ge)),a.$on("complete",c[8]);function Z(ee,we){return ee[2]>1||ee[2]==0?ra:ee[2]==1?na:ta}let fe=Z(c),ae=fe(c),te=c[3]&&Pi(c);return{c(){r=z("div"),s=z("div"),jt(a.$$.fragment),l=ve(),d=z("p"),d.textContent=y,O=ve(),ae.c(),_=ve(),p=z("button"),te&&te.c(),I=ve(),v=z("button"),v.textContent=A,this.h()},l(ee){r=H(ee,"DIV",{class:!0});var we=oe(r);s=H(we,"DIV",{class:!0});var Ae=oe(s);Dt(a.$$.fragment,Ae),l=me(Ae),d=H(Ae,"P",{class:!0,"data-svelte-h":!0}),Me(d)!=="svelte-1uyhl39"&&(d.textContent=y),O=me(Ae),ae.l(Ae),Ae.forEach(B),_=me(we),p=H(we,"BUTTON",{class:!0});var Ie=oe(p);te&&te.l(Ie),Ie.forEach(B),I=me(we),v=H(we,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(v)!=="svelte-hy6wnc"&&(v.textContent=A),we.forEach(B),this.h()},h(){M(d,"class","text-lg mt-4 text-center"),M(s,"class","absolute flex flex-col items-center pointer-events-auto p-6"),M(p,"class","absolute inset-0 w-full h-full bg-transparent pointer-events-auto relative overflow-hidden"),M(v,"class","absolute top-4 left-1/2 transform -translate-x-1/2 btn variant-outlined px-4 py-2 pointer-events-auto"),M(r,"class","w-full h-full flex flex-col items-center justify-center relative pointer-events-none")},m(ee,we){se(ee,r,we),R(r,s),Pt(a,s,null),R(s,l),R(s,d),R(s,O),ae.m(s,null),R(r,_),R(r,p),te&&te.m(p,null),R(r,I),R(r,v),$=!0,J||(G=[vt(p,"click",c[6]),vt(v,"click",c[7])],J=!0)},p(ee,[we]){const Ae={};we&1&&(Ae.duration=ee[0]),!f&&we&2&&(f=!0,Ae.startTimestamp=ee[1],qr(()=>f=!1)),a.$set(Ae),fe===(fe=Z(ee))&&ae?ae.p(ee,we):(ae.d(1),ae=fe(ee),ae&&(ae.c(),ae.m(s,null))),ee[3]?te?te.p(ee,we):(te=Pi(ee),te.c(),te.m(p,null)):te&&(te.d(1),te=null)},i(ee){$||(Ee(a.$$.fragment,ee),ee&&at(()=>{$&&(V||(V=Ne(v,qe,{},!0)),V.run(1))}),$=!0)},o(ee){Ke(a.$$.fragment,ee),ee&&(V||(V=Ne(v,qe,{},!1)),V.run(0)),$=!1},d(ee){ee&&B(r),Ot(a),ae.d(),te&&te.d(),ee&&V&&V.end(),J=!1,Zi(G)}}}function oa(c,r,s){let a,f,{nextStep:l}=r,{duration:d}=r,{levelId:y="L1"}=r;const O=$i();let _=0;const p=Qn(0);$n(c,p,G=>s(2,a=G));const I=Qn([]),v=Qn(null);$n(c,v,G=>s(3,f=G));const A=G=>{const ge=(Date.now()-_)/1e3;p.update(te=>te+1),I.update(te=>[...te,ge]),console.log(`Click ${Yt(p)} recorded at ${ge} seconds`),ht.capture("game_tap",{timestamp:ge,total_taps:Yt(p),level:y,button:"distracted"});const{clientX:X,clientY:Z,currentTarget:fe}=G,ae=fe.getBoundingClientRect();v.set({x:X-ae.left,y:Z-ae.top}),setTimeout(()=>v.set(null),600)},V=()=>{const G=(Date.now()-_)/1e3;ht.capture("meditation_exit",{duration_meditated:G,total_taps:Yt(I).length,level:y}),O("complete",{clickTimestamps:Yt(I),durationMeditated:G,completed:d-G<5}),l()},$=()=>{console.log("Meditation complete! Click data:",Yt(I)),ht.capture("meditation_completed",{duration:d,total_taps:Yt(I).length,level:y}),O("complete",{clickTimestamps:Yt(I),durationMeditated:d,completed:!0}),l()};function J(G){_=G,s(1,_)}return c.$$set=G=>{"nextStep"in G&&s(9,l=G.nextStep),"duration"in G&&s(0,d=G.duration),"levelId"in G&&s(10,y=G.levelId)},[d,_,a,f,p,v,A,V,$,l,y,J]}class aa extends Et{constructor(r){super(),It(this,r,oa,ia,Ct,{nextStep:9,duration:0,levelId:10})}}function sa(c){const r=Math.floor(c.durationMeditated/60),s=c.clickTimestamps.length,a=c.newStarRating-c.previousStarRating,f="https://www.arjunkalburgi.com/the-meditation-game/?utm_source=share";return a>0?`Major win! 🧘‍♂️  I just earned a new ⭐ in The Meditation Game!
I did a ${r}‑min meditation with only ${s} distractions.
I'm at ${"⭐".repeat(c.newStarRating)} on this level!
Learn and practice meditation here: ${f}`:c.isNewPersonalBest?`Mini‑win in The Meditation Game: my new personal best!
${r}‑min sit • only ${s} ${s===1?"mind-wander":"mind-wanders"} • ${"⭐".repeat(c.newStarRating)} on this level
Learn and practice meditation here: ${f}`:`Sharing todays practice in The Meditation Game.
I did a ${r}‑min meditation with only ${s} distractions.
I'm at ${"⭐".repeat(c.newStarRating)} on this level.
Learn and practice meditation here: ${f}`}function ua(c){return c.newStarRating-c.previousStarRating>0?"A":c.isNewPersonalBest?"B":"C"}function Di(c,r,s){const a=c.slice();return a[9]=r[s][0],a[10]=r[s][1],a}function ji(c,r,s){const a=c.slice();return a[13]=r[s],a[15]=s,a}function Ki(c){let r;function s(l,d){return l[0].newStarRating===3?ca:la}let a=s(c),f=a(c);return{c(){r=z("p"),f.c(),this.h()},l(l){r=H(l,"P",{class:!0});var d=oe(r);f.l(d),d.forEach(B),this.h()},h(){M(r,"class","mt-2 text-lg text-accent-foreground font-semibold animate-fade-in svelte-tnqxsb")},m(l,d){se(l,r,d),f.m(r,null)},p(l,d){a===(a=s(l))&&f?f.p(l,d):(f.d(1),f=a(l),f&&(f.c(),f.m(r,null)))},d(l){l&&B(r),f.d()}}}function la(c){let r,s=c[0].newStarRating-c[0].previousStarRating+"",a,f;return{c(){r=ce("You earned +"),a=ce(s),f=ce(" ⭐ — keep going!")},l(l){r=le(l,"You earned +"),a=le(l,s),f=le(l," ⭐ — keep going!")},m(l,d){se(l,r,d),se(l,a,d),se(l,f,d)},p(l,d){d&1&&s!==(s=l[0].newStarRating-l[0].previousStarRating+"")&&Ue(a,s)},d(l){l&&(B(r),B(a),B(f))}}}function ca(c){let r;return{c(){r=ce("Mastered this level! ✨")},l(s){r=le(s,"Mastered this level! ✨")},m(s,a){se(s,r,a)},p:ze,d(s){s&&B(r)}}}function Ri(c){let r,s=c[15]<c[0].newStarRating?"⭐":"☆",a,f;return{c(){r=z("span"),a=ce(s),f=ve(),this.h()},l(l){r=H(l,"SPAN",{class:!0});var d=oe(r);a=le(d,s),f=me(d),d.forEach(B),this.h()},h(){M(r,"class","text-xl")},m(l,d){se(l,r,d),R(r,a),R(r,f)},p(l,d){d&1&&s!==(s=l[15]<l[0].newStarRating?"⭐":"☆")&&Ue(a,s)},d(l){l&&B(r)}}}function fa(c){let r,s="You completed your meditation distraction-free!";return{c(){r=z("p"),r.textContent=s,this.h()},l(a){r=H(a,"P",{class:!0,"data-svelte-h":!0}),Me(r)!=="svelte-j87uf1"&&(r.textContent=s),this.h()},h(){M(r,"class","text-lg mt-4")},m(a,f){se(a,r,f)},p:ze,d(a){a&&B(r)}}}function da(c){let r,s,a=c[4](c[0].durationMeditated)+"",f,l,d,y,O=c[2]===1?"distraction":"distractions",_,p,I,v,A,V,$,J=Number(c[3])===1?"distraction":"distractions",G,ge;return{c(){r=z("p"),s=ce("You meditated for "),f=ce(a),l=ce(" and recorded "),d=ce(c[2]),y=ve(),_=ce(O),p=ce("."),I=ve(),v=z("p"),A=ce("That's about "),V=ce(c[3]),$=ve(),G=ce(J),ge=ce(" per minute."),this.h()},l(X){r=H(X,"P",{class:!0});var Z=oe(r);s=le(Z,"You meditated for "),f=le(Z,a),l=le(Z," and recorded "),d=le(Z,c[2]),y=me(Z),_=le(Z,O),p=le(Z,"."),Z.forEach(B),I=me(X),v=H(X,"P",{class:!0});var fe=oe(v);A=le(fe,"That's about "),V=le(fe,c[3]),$=me(fe),G=le(fe,J),ge=le(fe," per minute."),fe.forEach(B),this.h()},h(){M(r,"class","text-lg mt-4"),M(v,"class","text-lg mt-2")},m(X,Z){se(X,r,Z),R(r,s),R(r,f),R(r,l),R(r,d),R(r,y),R(r,_),R(r,p),se(X,I,Z),se(X,v,Z),R(v,A),R(v,V),R(v,$),R(v,G),R(v,ge)},p(X,Z){Z&1&&a!==(a=X[4](X[0].durationMeditated)+"")&&Ue(f,a)},d(X){X&&(B(r),B(I),B(v))}}}function ha(c){let r,s,a=c[0].personalBest.tapCount+"",f,l,d=tn(c[0].personalBest.duration)+"",y,O;return{c(){r=z("p"),s=ce("Best so far: "),f=ce(a),l=ce(" taps · "),y=ce(d),O=ce(" min."),this.h()},l(_){r=H(_,"P",{class:!0});var p=oe(r);s=le(p,"Best so far: "),f=le(p,a),l=le(p," taps · "),y=le(p,d),O=le(p," min."),p.forEach(B),this.h()},h(){M(r,"class","mt-4 text-muted-foreground")},m(_,p){se(_,r,p),R(r,s),R(r,f),R(r,l),R(r,y),R(r,O)},p(_,p){p&1&&a!==(a=_[0].personalBest.tapCount+"")&&Ue(f,a),p&1&&d!==(d=tn(_[0].personalBest.duration)+"")&&Ue(y,d)},d(_){_&&B(r)}}}function pa(c){let r,s,a=c[0].personalBest.tapCount+"",f,l,d=tn(c[0].personalBest.duration)+"",y,O;return{c(){r=z("p"),s=ce("New personal best 🎉 — "),f=ce(a),l=ce(" taps over "),y=ce(d),O=ce(" min."),this.h()},l(_){r=H(_,"P",{class:!0});var p=oe(r);s=le(p,"New personal best 🎉 — "),f=le(p,a),l=le(p," taps over "),y=le(p,d),O=le(p," min."),p.forEach(B),this.h()},h(){M(r,"class","mt-4 text-green-600 font-medium animate-fade-in svelte-tnqxsb")},m(_,p){se(_,r,p),R(r,s),R(r,f),R(r,l),R(r,y),R(r,O)},p(_,p){p&1&&a!==(a=_[0].personalBest.tapCount+"")&&Ue(f,a),p&1&&d!==(d=tn(_[0].personalBest.duration)+"")&&Ue(y,d)},d(_){_&&B(r)}}}function Ai(c){let r,s,a=c[10]?"✅":"🔲",f,l,d=(c[1][c[9]]||c[9])+"",y,O;return{c(){r=z("li"),s=z("span"),f=ce(a),l=ve(),y=ce(d),O=ve(),this.h()},l(_){r=H(_,"LI",{class:!0});var p=oe(r);s=H(p,"SPAN",{class:!0});var I=oe(s);f=le(I,a),I.forEach(B),l=me(p),y=le(p,d),O=me(p),p.forEach(B),this.h()},h(){M(s,"class","mr-2"),M(r,"class","flex items-center")},m(_,p){se(_,r,p),R(r,s),R(s,f),R(r,l),R(r,y),R(r,O)},p(_,p){p&1&&a!==(a=_[10]?"✅":"🔲")&&Ue(f,a),p&3&&d!==(d=(_[1][_[9]]||_[9])+"")&&Ue(y,d)},d(_){_&&B(r)}}}function Bi(c){let r,s,a=c[0].newlyCompletedTasks.length+"",f,l,d=c[0].newlyCompletedTasks.length===1?"":"s",y,O;return{c(){r=z("p"),s=ce("Nice! You just completed "),f=ce(a),l=ce(" task"),y=ce(d),O=ce("."),this.h()},l(_){r=H(_,"P",{class:!0});var p=oe(r);s=le(p,"Nice! You just completed "),f=le(p,a),l=le(p," task"),y=le(p,d),O=le(p,"."),p.forEach(B),this.h()},h(){M(r,"class","mt-2 text-sm text-accent-foreground")},m(_,p){se(_,r,p),R(r,s),R(r,f),R(r,l),R(r,y),R(r,O)},p(_,p){p&1&&a!==(a=_[0].newlyCompletedTasks.length+"")&&Ue(f,a),p&1&&d!==(d=_[0].newlyCompletedTasks.length===1?"":"s")&&Ue(y,d)},d(_){_&&B(r)}}}function ma(c){let r,s,a="Great practice!",f,l,d,y,O,_,p,I="Level tasks",v,A,V,$,J,G,ge="Share",X,Z,fe,ae="Exit",te,ee,we=`<p>Learn to meditate for real at 
			<a href="https://www.dhamma.org" target="_blank" class="text-blue-500 underline">dhamma.org ↗</a></p> <p class="mt-2">This app was made by Arjun, PM with 5 years experience. 
			Hire him to build your 0-1 consumer products! 
			<a href="https://www.linkedin.com/in/arjunkalburgi" target="_blank" class="text-blue-500 underline">View LinkedIn ↗</a></p>`,Ae,Ie,ie=c[0].newStarRating>c[0].previousStarRating&&Ki(c),ke=$e(Array(3)),Te=[];for(let ue=0;ue<ke.length;ue+=1)Te[ue]=Ri(ji(c,ke,ue));function Qe(ue,ye){return ue[0].clickTimestamps.length>0?da:fa}let Ce=Qe(c),Be=Ce(c);function st(ue,ye){if(ue[0].isNewPersonalBest&&ue[0].personalBest)return pa;if(ue[0].personalBest)return ha}let Ze=st(c),Pe=Ze&&Ze(c),ut=$e(Object.entries(c[0].completionTaskResults)),Ve=[];for(let ue=0;ue<ut.length;ue+=1)Ve[ue]=Ai(Di(c,ut,ue));let Re=c[0].newlyCompletedTasks.length>0&&Bi(c);return{c(){r=z("div"),s=z("h2"),s.textContent=a,f=ve(),ie&&ie.c(),l=ve(),d=z("div");for(let ue=0;ue<Te.length;ue+=1)Te[ue].c();y=ve(),Be.c(),O=ve(),Pe&&Pe.c(),_=ve(),p=z("h3"),p.textContent=I,v=ve(),A=z("ul");for(let ue=0;ue<Ve.length;ue+=1)Ve[ue].c();V=ve(),Re&&Re.c(),$=ve(),J=z("div"),G=z("button"),G.textContent=ge,X=ve(),Z=z("div"),fe=z("button"),fe.textContent=ae,te=ve(),ee=z("div"),ee.innerHTML=we,this.h()},l(ue){r=H(ue,"DIV",{class:!0});var ye=oe(r);s=H(ye,"H2",{class:!0,"data-svelte-h":!0}),Me(s)!=="svelte-1untj5h"&&(s.textContent=a),f=me(ye),ie&&ie.l(ye),l=me(ye),d=H(ye,"DIV",{class:!0});var de=oe(d);for(let lt=0;lt<Te.length;lt+=1)Te[lt].l(de);de.forEach(B),y=me(ye),Be.l(ye),O=me(ye),Pe&&Pe.l(ye),_=me(ye),p=H(ye,"H3",{class:!0,"data-svelte-h":!0}),Me(p)!=="svelte-8ylw1a"&&(p.textContent=I),v=me(ye),A=H(ye,"UL",{class:!0});var rt=oe(A);for(let lt=0;lt<Ve.length;lt+=1)Ve[lt].l(rt);rt.forEach(B),V=me(ye),Re&&Re.l(ye),$=me(ye),J=H(ye,"DIV",{class:!0});var _n=oe(J);G=H(_n,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(G)!=="svelte-1wlydhx"&&(G.textContent=ge),_n.forEach(B),X=me(ye),Z=H(ye,"DIV",{class:!0});var re=oe(Z);fe=H(re,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(fe)!=="svelte-1t5v3tb"&&(fe.textContent=ae),re.forEach(B),te=me(ye),ee=H(ye,"DIV",{class:!0,"data-svelte-h":!0}),Me(ee)!=="svelte-k92ud0"&&(ee.innerHTML=we),ye.forEach(B),this.h()},h(){M(s,"class","text-2xl font-bold"),M(d,"class","mt-2 flex items-center space-x-1"),M(p,"class","mt-6 font-semibold"),M(A,"class","mt-2 space-y-1 text-left max-h-40 overflow-y-auto"),M(G,"class","btn variant-filled px-4 py-2"),M(J,"class","mt-6 flex space-x-4"),M(fe,"class","btn variant-outlined px-4 py-2"),M(Z,"class","mt-6 flex space-x-4"),M(ee,"class","absolute bottom-6 text-center text-sm text-gray-500"),M(r,"class","w-full h-full flex flex-col justify-center items-center p-6")},m(ue,ye){se(ue,r,ye),R(r,s),R(r,f),ie&&ie.m(r,null),R(r,l),R(r,d);for(let de=0;de<Te.length;de+=1)Te[de]&&Te[de].m(d,null);R(r,y),Be.m(r,null),R(r,O),Pe&&Pe.m(r,null),R(r,_),R(r,p),R(r,v),R(r,A);for(let de=0;de<Ve.length;de+=1)Ve[de]&&Ve[de].m(A,null);R(r,V),Re&&Re.m(r,null),R(r,$),R(r,J),R(J,G),R(r,X),R(r,Z),R(Z,fe),R(r,te),R(r,ee),Ae||(Ie=[vt(G,"click",c[5]),vt(fe,"click",c[6])],Ae=!0)},p(ue,[ye]){if(ue[0].newStarRating>ue[0].previousStarRating?ie?ie.p(ue,ye):(ie=Ki(ue),ie.c(),ie.m(r,l)):ie&&(ie.d(1),ie=null),ye&1){ke=$e(Array(3));let de;for(de=0;de<ke.length;de+=1){const rt=ji(ue,ke,de);Te[de]?Te[de].p(rt,ye):(Te[de]=Ri(rt),Te[de].c(),Te[de].m(d,null))}for(;de<Te.length;de+=1)Te[de].d(1);Te.length=ke.length}if(Ce===(Ce=Qe(ue))&&Be?Be.p(ue,ye):(Be.d(1),Be=Ce(ue),Be&&(Be.c(),Be.m(r,O))),Ze===(Ze=st(ue))&&Pe?Pe.p(ue,ye):(Pe&&Pe.d(1),Pe=Ze&&Ze(ue),Pe&&(Pe.c(),Pe.m(r,_))),ye&3){ut=$e(Object.entries(ue[0].completionTaskResults));let de;for(de=0;de<ut.length;de+=1){const rt=Di(ue,ut,de);Ve[de]?Ve[de].p(rt,ye):(Ve[de]=Ai(rt),Ve[de].c(),Ve[de].m(A,null))}for(;de<Ve.length;de+=1)Ve[de].d(1);Ve.length=ut.length}ue[0].newlyCompletedTasks.length>0?Re?Re.p(ue,ye):(Re=Bi(ue),Re.c(),Re.m(r,$)):Re&&(Re.d(1),Re=null)},i:ze,o:ze,d(ue){ue&&B(r),ie&&ie.d(),zt(Te,ue),Be.d(),Pe&&Pe.d(),zt(Ve,ue),Re&&Re.d(),Ae=!1,Zi(Ie)}}}function va(c,r,s){let{closeModal:a}=r,{meditationResults:f}=r;const l=f.clickTimestamps.length,d=l>0?(l/(f.durationMeditated/60)).toFixed(1):"0",y=nt.find(v=>v.id===f.levelId),O={};y&&y.completionTasks.forEach(v=>{s(1,O[v.id]=v.description,O)});const _=v=>{const A=Math.floor(v/60),V=v%60;return A===0?V+" second"+(V===1?"":"s"):A+" minute"+(A===1?"":"s")+(V>0?" and "+V+" second"+(V===1?"":"s"):"")},p=()=>{if(navigator.share){const v=f.newStarRating-f.previousStarRating,A=ua(f);ht.capture("results_shared",{total_taps:l,distractionRate:d,level:f.levelId,stars_gained:v,tasks_completed:f.newlyCompletedTasks.length,template_used:A,personal_best:f.isNewPersonalBest});const V=sa(f);navigator.share({text:V}).catch($=>console.error("Sharing failed",$))}else console.log("Web Share API not supported")},I=()=>{ht.capture("results_exit",{shared:navigator.share!==void 0,stars_gained:f.newStarRating-f.previousStarRating,tasks_completed:f.newlyCompletedTasks.length}),a()};return c.$$set=v=>{"closeModal"in v&&s(7,a=v.closeModal),"meditationResults"in v&&s(0,f=v.meditationResults)},[f,O,l,d,_,p,I,a]}class ya extends Et{constructor(r){super(),It(this,r,va,ma,Ct,{closeModal:7,meditationResults:0})}}function Jn(c){return c.filter(r=>r.completed).sort((r,s)=>r.tapCount!==s.tapCount?r.tapCount-s.tapCount:s.duration!==r.duration?s.duration-r.duration:s.timestamp-r.timestamp)[0]??null}function ga(c,r,s){const{scope:a,requirement:f}=c;return a==="cumulative"?Mi(f,r):s.some(l=>Mi(f,l))}function Mi(c,r){if(c.type==="minTasks"){const{count:s,from:a}=c;return a==="all"?r.size>=s:a.filter(l=>r.has(l)).length>=s}return c.type==="specificTasks"?c.taskIds.every(s=>r.has(s)):!1}function yn(c,r,s){const a=[...c].sort((f,l)=>l.stars-f.stars);for(const f of a)if(ga(f,r,s))return f.stars;return 0}function en(c,r){const s=new Set;for(const a of r.completionTasks)switch(a.id){case"tap_once":c.tapCount>0&&s.add(a.id);break;case"no_early_exit":c.completed&&s.add(a.id);break;case"max_duration":c.duration>=r.maxDuration&&s.add(a.id);break;case"session_under_5_taps":c.tapCount<=5&&s.add(a.id);break;case"2_sessions_under_8_taps":c.tapCount<=8&&s.add(a.id);break;case"one_min_no_taps":if(c.tapTimestamps.length===0)s.add(a.id);else if(c.tapTimestamps.length===1)(c.tapTimestamps[0]>60||c.duration-c.tapTimestamps[0]>60)&&s.add(a.id);else{for(let f=0;f<c.tapTimestamps.length-1;f++)if(c.tapTimestamps[f+1]-c.tapTimestamps[f]>60){s.add(a.id);break}(c.tapTimestamps[0]>60||c.duration-c.tapTimestamps[c.tapTimestamps.length-1]>60)&&s.add(a.id)}break}return s}async function gn(c){const r=nt.find(f=>f.id===c);if(!r)return{};const s=await Ht.sessions.where("levelId").equals(c).toArray(),a={};for(const f of r.completionTasks)switch(f.id){case"complete_2_sessions":a[f.id]=s.length>=2;break;case"complete_3_sessions":a[f.id]=s.length>=3;break;case"improve_tap_count":if(s.length>=3){const d=[...s].sort((O,_)=>O.timestamp-_.timestamp);let y=0;for(let O=1;O<d.length;O++)d[O].tapCount<d[O-1].tapCount&&y++;a[f.id]=y>=2}else a[f.id]=!1;break;case"2_sessions_under_8_taps":const l=s.filter(d=>d.tapCount<=8);a[f.id]=l.length>=2;break;default:a[f.id]=s.some(d=>en(d,r).has(f.id))}return a}async function _a(){const c=await Ht.sessions.where("levelId").equals("L1").toArray(),r=await gn("L1"),s=new Set(Object.entries(r).filter(([ee,we])=>we).map(([ee])=>ee)),a=c.map(ee=>en(ee,nt[0])),f=yn(nt[0].starRules,s,a),l=Jn(c),d={level:nt[0],isUnlocked:!0,progress:{sessionsCompleted:c.length,requiredSessions:2},taskCompletion:r,starRating:f,bestSession:l},y=await Ht.sessions.where("levelId").equals("L2").toArray(),O=await gn("L2"),_=new Set(Object.entries(O).filter(([ee,we])=>we).map(([ee])=>ee)),p=y.map(ee=>en(ee,nt[1])),I=yn(nt[1].starRules,_,p),v=Jn(y),A=f>=2,V={level:nt[1],isUnlocked:A,progress:{sessionsCompleted:y.length,requiredSessions:3},taskCompletion:O,starRating:I,bestSession:v},$=await Ht.sessions.where("levelId").equals("L3").toArray(),J=$.filter(ee=>ee.tapCount<=3),G=await gn("L3"),ge=new Set(Object.entries(G).filter(([ee,we])=>we).map(([ee])=>ee)),X=$.map(ee=>en(ee,nt[2])),Z=yn(nt[2].starRules,ge,X),fe=Jn($),ae=I>=2,te={level:nt[2],isUnlocked:ae,progress:{sessionsCompleted:J.length,requiredSessions:2},taskCompletion:G,starRating:Z,bestSession:fe};return[d,V,te]}function Ni(c){let r,s,a,f,l,d,y;const O=[xa,ka,wa,ba],_=[];function p(I,v){return I[3]===1?0:I[3]===2?1:I[3]===3?2:3}return a=p(c),f=_[a]=O[a](c),{c(){r=z("div"),s=z("div"),f.c(),this.h()},l(I){r=H(I,"DIV",{class:!0});var v=oe(r);s=H(v,"DIV",{class:!0});var A=oe(s);f.l(A),A.forEach(B),v.forEach(B),this.h()},h(){M(s,"class","fixed inset-0 bg-white flex flex-col items-center justify-center"),M(r,"class","fixed inset-0 flex items-center justify-center bg-black bg-opacity-50")},m(I,v){se(I,r,v),R(r,s),_[a].m(s,null),y=!0},p(I,v){let A=a;a=p(I),a===A?_[a].p(I,v):(Tt(),Ke(_[A],1,1,()=>{_[A]=null}),St(),f=_[a],f?f.p(I,v):(f=_[a]=O[a](I),f.c()),Ee(f,1),f.m(s,null))},i(I){y||(Ee(f),I&&at(()=>{y&&(l||(l=Ne(s,qe,{duration:500},!0)),l.run(1))}),I&&at(()=>{y&&(d||(d=Ne(r,qe,{duration:500},!0)),d.run(1))}),y=!0)},o(I){Ke(f),I&&(l||(l=Ne(s,qe,{duration:500},!1)),l.run(0)),I&&(d||(d=Ne(r,qe,{duration:500},!1)),d.run(0)),y=!1},d(I){I&&B(r),_[a].d(),I&&l&&l.end(),I&&d&&d.end()}}}function ba(c){let r,s,a,f;return s=new ya({props:{closeModal:c[5],meditationResults:c[4]}}),{c(){r=z("div"),jt(s.$$.fragment),this.h()},l(l){r=H(l,"DIV",{class:!0});var d=oe(r);Dt(s.$$.fragment,d),d.forEach(B),this.h()},h(){M(r,"class","absolute inset-0 flex flex-col")},m(l,d){se(l,r,d),Pt(s,r,null),f=!0},p(l,d){const y={};d&16&&(y.meditationResults=l[4]),s.$set(y)},i(l){f||(Ee(s.$$.fragment,l),l&&at(()=>{f&&(a||(a=Ne(r,qe,{duration:300},!0)),a.run(1))}),f=!0)},o(l){Ke(s.$$.fragment,l),l&&(a||(a=Ne(r,qe,{duration:300},!1)),a.run(0)),f=!1},d(l){l&&B(r),Ot(s),l&&a&&a.end()}}}function wa(c){let r,s,a,f;return s=new aa({props:{duration:c[1],nextStep:c[7],levelId:c[2]}}),s.$on("complete",c[8]),{c(){r=z("div"),jt(s.$$.fragment),this.h()},l(l){r=H(l,"DIV",{class:!0});var d=oe(r);Dt(s.$$.fragment,d),d.forEach(B),this.h()},h(){M(r,"class","absolute inset-0 flex flex-col")},m(l,d){se(l,r,d),Pt(s,r,null),f=!0},p(l,d){const y={};d&2&&(y.duration=l[1]),d&4&&(y.levelId=l[2]),s.$set(y)},i(l){f||(Ee(s.$$.fragment,l),l&&at(()=>{f&&(a||(a=Ne(r,qe,{duration:300},!0)),a.run(1))}),f=!0)},o(l){Ke(s.$$.fragment,l),l&&(a||(a=Ne(r,qe,{duration:300},!1)),a.run(0)),f=!1},d(l){l&&B(r),Ot(s),l&&a&&a.end()}}}function ka(c){let r,s,a,f;return s=new ea({props:{nextStep:c[7],closeModal:c[5],levelId:c[2]}}),{c(){r=z("div"),jt(s.$$.fragment),this.h()},l(l){r=H(l,"DIV",{class:!0});var d=oe(r);Dt(s.$$.fragment,d),d.forEach(B),this.h()},h(){M(r,"class","absolute inset-0 flex flex-col")},m(l,d){se(l,r,d),Pt(s,r,null),f=!0},p(l,d){const y={};d&4&&(y.levelId=l[2]),s.$set(y)},i(l){f||(Ee(s.$$.fragment,l),l&&at(()=>{f&&(a||(a=Ne(r,qe,{duration:300},!0)),a.run(1))}),f=!0)},o(l){Ke(s.$$.fragment,l),l&&(a||(a=Ne(r,qe,{duration:300},!1)),a.run(0)),f=!1},d(l){l&&B(r),Ot(s),l&&a&&a.end()}}}function xa(c){let r,s,a,f;return s=new zo({props:{nextStep:c[7],duration:c[1],closeModal:c[5],levelId:c[2]}}),{c(){r=z("div"),jt(s.$$.fragment),this.h()},l(l){r=H(l,"DIV",{class:!0});var d=oe(r);Dt(s.$$.fragment,d),d.forEach(B),this.h()},h(){M(r,"class","absolute inset-0 flex flex-col")},m(l,d){se(l,r,d),Pt(s,r,null),f=!0},p(l,d){const y={};d&2&&(y.duration=l[1]),d&4&&(y.levelId=l[2]),s.$set(y)},i(l){f||(Ee(s.$$.fragment,l),l&&at(()=>{f&&(a||(a=Ne(r,qe,{duration:300},!0)),a.run(1))}),f=!0)},o(l){Ke(s.$$.fragment,l),l&&(a||(a=Ne(r,qe,{duration:300},!1)),a.run(0)),f=!1},d(l){l&&B(r),Ot(s),l&&a&&a.end()}}}function Ta(c){let r,s,a=c[0]&&Ni(c);return{c(){a&&a.c(),r=wi()},l(f){a&&a.l(f),r=wi()},m(f,l){a&&a.m(f,l),se(f,r,l),s=!0},p(f,[l]){f[0]?a?(a.p(f,l),l&1&&Ee(a,1)):(a=Ni(f),a.c(),Ee(a,1),a.m(r.parentNode,r)):a&&(Tt(),Ke(a,1,1,()=>{a=null}),St())},i(f){s||(Ee(a),s=!0)},o(f){Ke(a),s=!1},d(f){f&&B(r),a&&a.d(f)}}}function Sa(c,r,s){let{show:a=!1}=r,{duration:f=ot.ONE_MINUTE}=r,{levelId:l=null}=r,d=1,y;const O=()=>{s(0,a=!1),s(3,d=1)},_=async v=>{const{clickTimestamps:A,durationMeditated:V,completed:$}=v.detail,J=l||"L1",G=nt.find(Ce=>Ce.id===J);if(!G)return;const ge=await Ht.sessions.where("levelId").equals(J).toArray(),X=await gn(J),Z=new Set(Object.entries(X).filter(([Ce,Be])=>Be).map(([Ce])=>Ce)),fe=ge.map(Ce=>en(Ce,G)),ae=yn(G.starRules,Z,fe),te={levelId:J,duration:V,tapCount:A.length,tapTimestamps:A,timestamp:Date.now(),completed:$};await Ht.sessions.add(te);const ee=await gn(J),we=new Set(Object.entries(ee).filter(([Ce,Be])=>Be).map(([Ce])=>Ce)),Ae=Object.entries(ee).filter(([Ce,Be])=>Be&&!X[Ce]).map(([Ce])=>Ce),Ie=await Ht.sessions.where("levelId").equals(J).toArray(),ie=Ie.map(Ce=>en(Ce,G)),ke=yn(G.starRules,we,ie),Te=Jn(Ie),Qe=Te&&Te.tapCount===A.length&&Te.duration===V;s(4,y={...v.detail,levelId:J,previousStarRating:ae,newStarRating:ke,newlyCompletedTasks:Ae,completionTaskResults:ee,isNewPersonalBest:Qe||!1,personalBest:Te}),p()},p=()=>setTimeout(()=>s(3,d++,d),300),I=v=>_(v);return c.$$set=v=>{"show"in v&&s(0,a=v.show),"duration"in v&&s(1,f=v.duration),"levelId"in v&&s(2,l=v.levelId)},[a,f,l,d,y,O,_,p,I]}class Ca extends Et{constructor(r){super(),It(this,r,Sa,Ta,Ct,{show:0,duration:1,levelId:2})}}function qi(c,r,s){const a=c.slice();return a[6]=r[s],a}function Fi(c){let r,s=Br[c[6]]+"",a;return{c(){r=z("option"),a=ce(s),this.h()},l(f){r=H(f,"OPTION",{});var l=oe(r);a=le(l,s),l.forEach(B),this.h()},h(){r.__value=c[6],Fo(r,r.__value)},m(f,l){se(f,r,l),R(r,a)},p:ze,d(f){f&&B(r)}}}function Ea(c){let r,s,a="Select Meditation Duration",f,l,d,y,O=$e(c[2]),_=[];for(let p=0;p<O.length;p+=1)_[p]=Fi(qi(c,O,p));return{c(){r=z("div"),s=z("label"),s.textContent=a,f=ve(),l=z("select");for(let p=0;p<_.length;p+=1)_[p].c();this.h()},l(p){r=H(p,"DIV",{class:!0});var I=oe(r);s=H(I,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Me(s)!=="svelte-1c6041l"&&(s.textContent=a),f=me(I),l=H(I,"SELECT",{id:!0,class:!0});var v=oe(l);for(let A=0;A<_.length;A+=1)_[A].l(v);v.forEach(B),I.forEach(B),this.h()},h(){M(s,"for","duration"),M(s,"class","text-lg font-medium"),M(l,"id","duration"),M(l,"class","select select-bordered w-full max-w-xs"),M(r,"class","flex flex-col items-center gap-4")},m(p,I){se(p,r,I),R(r,s),R(r,f),R(r,l);for(let v=0;v<_.length;v+=1)_[v]&&_[v].m(l,null);ki(l,c[0]),d||(y=vt(l,"change",c[5]),d=!0)},p(p,[I]){if(I&4){O=$e(p[2]);let v;for(v=0;v<O.length;v+=1){const A=qi(p,O,v);_[v]?_[v].p(A,I):(_[v]=Fi(A),_[v].c(),_[v].m(l,null))}for(;v<_.length;v+=1)_[v].d(1);_.length=O.length}I&5&&ki(l,p[0])},i:ze,o:ze,d(p){p&&B(r),zt(_,p),d=!1,y()}}}function Ia(c,r,s){let{selectedDuration:a}=r,{onDurationChange:f}=r,{minDuration:l=ot.ONE_MINUTE}=r,{maxDuration:d=ot.SIXTY_MINUTES}=r;const y=Object.values(ot).filter(_=>typeof _=="number").filter(_=>_>=l&&_<=d),O=_=>f(Number(_.currentTarget.value));return c.$$set=_=>{"selectedDuration"in _&&s(0,a=_.selectedDuration),"onDurationChange"in _&&s(1,f=_.onDurationChange),"minDuration"in _&&s(3,l=_.minDuration),"maxDuration"in _&&s(4,d=_.maxDuration)},[a,f,y,l,d,O]}class Oa extends Et{constructor(r){super(),It(this,r,Ia,Ea,Ct,{selectedDuration:0,onDurationChange:1,minDuration:3,maxDuration:4})}}function Li(c,r,s){const a=c.slice();return a[9]=r[s].level,a[10]=r[s].isUnlocked,a[11]=r[s].taskCompletion,a[12]=r[s].starRating,a[13]=r[s].bestSession,a}function Ui(c,r,s){const a=c.slice();return a[16]=r[s],a[18]=s,a}function Vi(c,r,s){const a=c.slice();return a[19]=r[s],a[18]=s,a}function Pa(c){let r,s,a="Section 1: Focus",f,l,d,y="<h2>Section 2: Sharpness</h2> <i>Coming soon</i>",O,_=$e(c[3]),p=[];for(let v=0;v<_.length;v+=1)p[v]=Qi(Li(c,_,v));const I=v=>Ke(p[v],1,1,()=>{p[v]=null});return{c(){r=z("div"),s=z("h2"),s.textContent=a,f=ve();for(let v=0;v<p.length;v+=1)p[v].c();l=ve(),d=z("div"),d.innerHTML=y,this.h()},l(v){r=H(v,"DIV",{class:!0});var A=oe(r);s=H(A,"H2",{"data-svelte-h":!0}),Me(s)!=="svelte-1qfa4kg"&&(s.textContent=a),f=me(A);for(let V=0;V<p.length;V+=1)p[V].l(A);A.forEach(B),l=me(v),d=H(v,"DIV",{class:!0,"data-svelte-h":!0}),Me(d)!=="svelte-1nrer3t"&&(d.innerHTML=y),this.h()},h(){M(r,"class","flex flex-col gap-6 mt-8"),M(d,"class","mt-8")},m(v,A){se(v,r,A),R(r,s),R(r,f);for(let V=0;V<p.length;V+=1)p[V]&&p[V].m(r,null);se(v,l,A),se(v,d,A),O=!0},p(v,A){if(A&46){_=$e(v[3]);let V;for(V=0;V<_.length;V+=1){const $=Li(v,_,V);p[V]?(p[V].p($,A),Ee(p[V],1)):(p[V]=Qi($),p[V].c(),Ee(p[V],1),p[V].m(r,null))}for(Tt(),V=_.length;V<p.length;V+=1)I(V);St()}},i(v){if(!O){for(let A=0;A<_.length;A+=1)Ee(p[A]);O=!0}},o(v){p=p.filter(Boolean);for(let A=0;A<p.length;A+=1)Ke(p[A]);O=!1},d(v){v&&(B(r),B(l),B(d)),zt(p,v)}}}function Da(c){let r,s='<div class="loading loading-spinner loading-lg"></div>';return{c(){r=z("div"),r.innerHTML=s,this.h()},l(a){r=H(a,"DIV",{class:!0,"data-svelte-h":!0}),Me(r)!=="svelte-1mgfhb9"&&(r.innerHTML=s),this.h()},h(){M(r,"class","flex justify-center items-center mt-8")},m(a,f){se(a,r,f)},p:ze,i:ze,o:ze,d(a){a&&B(r)}}}function Yi(c){let r,s="🔒";return{c(){r=z("span"),r.textContent=s,this.h()},l(a){r=H(a,"SPAN",{class:!0,"data-svelte-h":!0}),Me(r)!=="svelte-19hy9gc"&&(r.textContent=s),this.h()},h(){M(r,"class","text-2xl")},m(a,f){se(a,r,f)},d(a){a&&B(r)}}}function Hi(c){let r,s,a=c[13].tapCount+"",f,l,d=tn(c[13].duration)+"",y,O;return{c(){r=z("p"),s=ce("Best: "),f=ce(a),l=ce(" taps · "),y=ce(d),O=ce(" min"),this.h()},l(_){r=H(_,"P",{class:!0});var p=oe(r);s=le(p,"Best: "),f=le(p,a),l=le(p," taps · "),y=le(p,d),O=le(p," min"),p.forEach(B),this.h()},h(){M(r,"class","text-sm text-muted-foreground")},m(_,p){se(_,r,p),R(r,s),R(r,f),R(r,l),R(r,y),R(r,O)},p(_,p){p&8&&a!==(a=_[13].tapCount+"")&&Ue(f,a),p&8&&d!==(d=tn(_[13].duration)+"")&&Ue(y,d)},d(_){_&&B(r)}}}function zi(c){let r,s=$e(Array(3)),a=[];for(let f=0;f<s.length;f+=1)a[f]=Wi(Vi(c,s,f));return{c(){r=z("div");for(let f=0;f<a.length;f+=1)a[f].c();this.h()},l(f){r=H(f,"DIV",{class:!0});var l=oe(r);for(let d=0;d<a.length;d+=1)a[d].l(l);l.forEach(B),this.h()},h(){M(r,"class","flex items-center")},m(f,l){se(f,r,l);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(r,null)},p(f,l){if(l&8){s=$e(Array(3));let d;for(d=0;d<s.length;d+=1){const y=Vi(f,s,d);a[d]?a[d].p(y,l):(a[d]=Wi(y),a[d].c(),a[d].m(r,null))}for(;d<a.length;d+=1)a[d].d(1);a.length=s.length}},d(f){f&&B(r),zt(a,f)}}}function Wi(c){let r,s,a;return{c(){r=z("span"),s=ce(`★
									`),this.h()},l(f){r=H(f,"SPAN",{class:!0});var l=oe(r);s=le(l,`★
									`),l.forEach(B),this.h()},h(){M(r,"class",a="text-2xl "+(c[18]<c[12]?"text-yellow-500":"text-gray-300"))},m(f,l){se(f,r,l),R(r,s)},p(f,l){l&8&&a!==(a="text-2xl "+(f[18]<f[12]?"text-yellow-500":"text-gray-300"))&&M(r,"class",a)},d(f){f&&B(r)}}}function ja(c){let r,s='<p class="text-sm text-gray-500">Complete previous levels to unlock</p>';return{c(){r=z("div"),r.innerHTML=s,this.h()},l(a){r=H(a,"DIV",{class:!0,"data-svelte-h":!0}),Me(r)!=="svelte-csvmf3"&&(r.innerHTML=s),this.h()},h(){M(r,"class","space-y-4")},m(a,f){se(a,r,f)},p:ze,i:ze,o:ze,d(a){a&&B(r)}}}function Ka(c){let r,s,a,f,l="Start meditation",d,y,O;s=new Oa({props:{selectedDuration:c[1],onDurationChange:c[6],minDuration:c[9].minDuration,maxDuration:c[9].maxDuration}});function _(){return c[7](c[9])}return{c(){r=z("div"),jt(s.$$.fragment),a=ve(),f=z("button"),f.textContent=l,this.h()},l(p){r=H(p,"DIV",{class:!0});var I=oe(r);Dt(s.$$.fragment,I),a=me(I),f=H(I,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(f)!=="svelte-170hbv2"&&(f.textContent=l),I.forEach(B),this.h()},h(){M(f,"class","btn variant-filled w-full"),M(r,"class","space-y-6")},m(p,I){se(p,r,I),Pt(s,r,null),R(r,a),R(r,f),d=!0,y||(O=vt(f,"click",_),y=!0)},p(p,I){c=p;const v={};I&2&&(v.selectedDuration=c[1]),I&2&&(v.onDurationChange=c[6]),I&8&&(v.minDuration=c[9].minDuration),I&8&&(v.maxDuration=c[9].maxDuration),s.$set(v)},i(p){d||(Ee(s.$$.fragment,p),d=!0)},o(p){Ke(s.$$.fragment,p),d=!1},d(p){p&&B(r),Ot(s),y=!1,O()}}}function Gi(c){let r,s,a="Completion Tasks:",f,l,d=$e(c[9].completionTasks),y=[];for(let O=0;O<d.length;O+=1)y[O]=Xi(Ui(c,d,O));return{c(){r=z("div"),s=z("h4"),s.textContent=a,f=ve(),l=z("div");for(let O=0;O<y.length;O+=1)y[O].c();this.h()},l(O){r=H(O,"DIV",{class:!0});var _=oe(r);s=H(_,"H4",{class:!0,"data-svelte-h":!0}),Me(s)!=="svelte-1re5sh4"&&(s.textContent=a),f=me(_),l=H(_,"DIV",{class:!0});var p=oe(l);for(let I=0;I<y.length;I+=1)y[I].l(p);p.forEach(B),_.forEach(B),this.h()},h(){M(s,"class","font-medium"),M(l,"class","space-y-2"),M(r,"class","mt-6 space-y-3")},m(O,_){se(O,r,_),R(r,s),R(r,f),R(r,l);for(let p=0;p<y.length;p+=1)y[p]&&y[p].m(l,null)},p(O,_){if(_&8){d=$e(O[9].completionTasks);let p;for(p=0;p<d.length;p+=1){const I=Ui(O,d,p);y[p]?y[p].p(I,_):(y[p]=Xi(I),y[p].c(),y[p].m(l,null))}for(;p<y.length;p+=1)y[p].d(1);y.length=d.length}},d(O){O&&B(r),zt(y,O)}}}function Xi(c){let r,s,a=c[11][c[16].id]?"✅":"🔲",f,l,d,y,O=c[16].description+"",_,p,I;return{c(){r=z("div"),s=z("span"),f=ce(a),d=ve(),y=z("span"),_=ce(O),I=ve(),this.h()},l(v){r=H(v,"DIV",{class:!0});var A=oe(r);s=H(A,"SPAN",{class:!0});var V=oe(s);f=le(V,a),V.forEach(B),d=me(A),y=H(A,"SPAN",{class:!0});var $=oe(y);_=le($,O),$.forEach(B),I=me(A),A.forEach(B),this.h()},h(){M(s,"class",l="mr-2 "+(c[11][c[16].id]?"text-green-500":"text-gray-400")),M(y,"class",p="text-sm "+(c[11][c[16].id]?"text-gray-700":"text-gray-500")),M(r,"class","flex items-center")},m(v,A){se(v,r,A),R(r,s),R(s,f),R(r,d),R(r,y),R(y,_),R(r,I)},p(v,A){A&8&&a!==(a=v[11][v[16].id]?"✅":"🔲")&&Ue(f,a),A&8&&l!==(l="mr-2 "+(v[11][v[16].id]?"text-green-500":"text-gray-400"))&&M(s,"class",l),A&8&&O!==(O=v[16].description+"")&&Ue(_,O),A&8&&p!==(p="text-sm "+(v[11][v[16].id]?"text-gray-700":"text-gray-500"))&&M(y,"class",p)},d(v){v&&B(r)}}}function Qi(c){let r,s,a,f,l,d=c[9].name+"",y,O,_,p=c[9].description+"",I,v,A,V,$,J,G,ge,X,Z,fe=!c[10]&&Yi(),ae=c[13]&&c[10]&&Hi(c),te=c[12]!==void 0&&c[10]&&zi(c);const ee=[Ka,ja],we=[];function Ae(ie,ke){return ie[10]?0:1}$=Ae(c),J=we[$]=ee[$](c);let Ie=c[11]&&c[10]&&Gi(c);return{c(){r=z("div"),s=z("div"),a=z("div"),f=z("h3"),fe&&fe.c(),l=ve(),y=ce(d),O=ve(),_=z("p"),I=ce(p),v=ve(),ae&&ae.c(),A=ve(),te&&te.c(),V=ve(),J.c(),G=ve(),Ie&&Ie.c(),ge=ve(),this.h()},l(ie){r=H(ie,"DIV",{class:!0});var ke=oe(r);s=H(ke,"DIV",{class:!0});var Te=oe(s);a=H(Te,"DIV",{class:!0});var Qe=oe(a);f=H(Qe,"H3",{class:!0});var Ce=oe(f);fe&&fe.l(Ce),l=me(Ce),y=le(Ce,d),Ce.forEach(B),O=me(Qe),_=H(Qe,"P",{class:!0});var Be=oe(_);I=le(Be,p),Be.forEach(B),v=me(Qe),ae&&ae.l(Qe),Qe.forEach(B),A=me(Te),te&&te.l(Te),Te.forEach(B),V=me(ke),J.l(ke),G=me(ke),Ie&&Ie.l(ke),ge=me(ke),ke.forEach(B),this.h()},h(){M(f,"class","text-xl font-bold"),M(_,"class","text-sm text-gray-600"),M(a,"class","space-y-3"),M(s,"class","flex justify-between items-start mb-8"),M(r,"class",X="card p-8 "+(c[10]?"":"opacity-90"))},m(ie,ke){se(ie,r,ke),R(r,s),R(s,a),R(a,f),fe&&fe.m(f,null),R(f,l),R(f,y),R(a,O),R(a,_),R(_,I),R(a,v),ae&&ae.m(a,null),R(s,A),te&&te.m(s,null),R(r,V),we[$].m(r,null),R(r,G),Ie&&Ie.m(r,null),R(r,ge),Z=!0},p(ie,ke){ie[10]?fe&&(fe.d(1),fe=null):fe||(fe=Yi(),fe.c(),fe.m(f,l)),(!Z||ke&8)&&d!==(d=ie[9].name+"")&&Ue(y,d),(!Z||ke&8)&&p!==(p=ie[9].description+"")&&Ue(I,p),ie[13]&&ie[10]?ae?ae.p(ie,ke):(ae=Hi(ie),ae.c(),ae.m(a,null)):ae&&(ae.d(1),ae=null),ie[12]!==void 0&&ie[10]?te?te.p(ie,ke):(te=zi(ie),te.c(),te.m(s,null)):te&&(te.d(1),te=null);let Te=$;$=Ae(ie),$===Te?we[$].p(ie,ke):(Tt(),Ke(we[Te],1,1,()=>{we[Te]=null}),St(),J=we[$],J?J.p(ie,ke):(J=we[$]=ee[$](ie),J.c()),Ee(J,1),J.m(r,G)),ie[11]&&ie[10]?Ie?Ie.p(ie,ke):(Ie=Gi(ie),Ie.c(),Ie.m(r,ge)):Ie&&(Ie.d(1),Ie=null),(!Z||ke&8&&X!==(X="card p-8 "+(ie[10]?"":"opacity-90")))&&M(r,"class",X)},i(ie){Z||(Ee(J),Z=!0)},o(ie){Ke(J),Z=!1},d(ie){ie&&B(r),fe&&fe.d(),ae&&ae.d(),te&&te.d(),we[$].d(),Ie&&Ie.d()}}}function Ra(c){let r,s,a='<h1 class="h2">Welcome to The Meditation Game!</h1> <p>Learn how to meditate through gameplay</p>',f,l,d,y,O,_=`<p>Learn to meditate for real at 
			<a href="https://www.dhamma.org" target="_blank" class="text-blue-500 underline">dhamma.org ↗</a></p> <p class="mt-2">This app was made by Arjun Kalburgi, PM with 5 years experience. 
			Hire him to build your 0-1 consumer products! 
			<a href="https://www.linkedin.com/in/arjunkalburgi" target="_blank" class="text-blue-500 underline">View LinkedIn ↗</a></p>`,p,I,v,A;const V=[Da,Pa],$=[];function J(X,Z){return X[4]?0:1}l=J(c),d=$[l]=V[l](c);function G(X){c[8](X)}let ge={duration:c[1],levelId:c[2]};return c[0]!==void 0&&(ge.show=c[0]),I=new Ca({props:ge}),Nr.push(()=>Fr(I,"show",G)),{c(){r=z("div"),s=z("div"),s.innerHTML=a,f=ve(),d.c(),y=ve(),O=z("div"),O.innerHTML=_,p=ve(),jt(I.$$.fragment),this.h()},l(X){r=H(X,"DIV",{class:!0});var Z=oe(r);s=H(Z,"DIV",{class:!0,"data-svelte-h":!0}),Me(s)!=="svelte-13vihxj"&&(s.innerHTML=a),f=me(Z),d.l(Z),y=me(Z),O=H(Z,"DIV",{class:!0,"data-svelte-h":!0}),Me(O)!=="svelte-dgw8za"&&(O.innerHTML=_),Z.forEach(B),p=me(X),Dt(I.$$.fragment,X),this.h()},h(){M(s,"class","space-y-6 text-center"),M(O,"class","text-center text-sm text-gray-500 mt-40"),M(r,"class","h-full mx-auto flex flex-col p-6 mt-6")},m(X,Z){se(X,r,Z),R(r,s),R(r,f),$[l].m(r,null),R(r,y),R(r,O),se(X,p,Z),Pt(I,X,Z),A=!0},p(X,[Z]){let fe=l;l=J(X),l===fe?$[l].p(X,Z):(Tt(),Ke($[fe],1,1,()=>{$[fe]=null}),St(),d=$[l],d?d.p(X,Z):(d=$[l]=V[l](X),d.c()),Ee(d,1),d.m(r,y));const ae={};Z&2&&(ae.duration=X[1]),Z&4&&(ae.levelId=X[2]),!v&&Z&1&&(v=!0,ae.show=X[0],qr(()=>v=!1)),I.$set(ae)},i(X){A||(Ee(d),Ee(I.$$.fragment,X),A=!0)},o(X){Ke(d),Ke(I.$$.fragment,X),A=!1},d(X){X&&(B(r),B(p)),$[l].d(),Ot(I,X)}}}function Aa(c,r,s){let a=!1,f=ot.ONE_MINUTE,l=null,d=[],y=!0;const O=()=>{window.audioContext||(window.audioContext=new(window.AudioContext||window.webkitAudioContext)),s(0,a=!0)},_=v=>s(1,f=v),p=v=>{s(2,l=v.id),O()};function I(v){a=v,s(0,a)}return c.$$.update=()=>{c.$$.dirty&1&&(a||(s(4,y=!0),_a().then(v=>{s(3,d=v),console.log(v),s(4,y=!1)}).catch(v=>{console.error("Failed to reload level statuses:",v),s(4,y=!1)})))},[a,f,l,d,y,O,_,p,I]}class Ja extends Et{constructor(r){super(),It(this,r,Aa,Ra,Ct,{})}}export{Ja as component};
