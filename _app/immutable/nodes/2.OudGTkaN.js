var vo=Object.defineProperty;var yo=(d,o,l)=>o in d?vo(d,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):d[o]=l;var hi=(d,o,l)=>yo(d,typeof o!="symbol"?o+"":o,l);import{B as go,s as lt,d as N,Z as Sr,c as ne,e as V,w as F,f as J,g as le,j as be,k as Z,l as _e,q as Pi,n as Ae,C as Ve,U as Ze,_ as De,$ as bo,a0 as _o,b as Ye,i as wo,h as me,t as ve,a1 as Kn,a2 as jn,a3 as Di,m as Rn,a4 as ko,y as Or,a5 as Pr,r as Ai,x as Ft,P as Ot,o as qn,a6 as pi,a7 as xo}from"../chunks/BIM6er8B.js";import{S as ct,i as ft,t as xe,a as ye,g as st,c as ut,f as Ee,h as Dr,d as dt,m as ht,e as pt,b as mt}from"../chunks/CLOSa3QW.js";import{p as Ge}from"../chunks/CmP4wuhm.js";import{d as mi,w as Mn}from"../chunks/BSzwmYPV.js";function Lt(d){return(d==null?void 0:d.length)!==void 0?d:Array.from(d)}function Ce(d,{delay:o=0,duration:l=400,easing:s=go}={}){const f=+getComputedStyle(d).opacity;return{delay:o,duration:l,easing:s,css:u=>`opacity: ${u*f}`}}var Ue=(d=>(d[d.ONE_MINUTE=60]="ONE_MINUTE",d[d.TWO_MINUTES=120]="TWO_MINUTES",d[d.FIVE_MINUTES=300]="FIVE_MINUTES",d[d.TEN_MINUTES=600]="TEN_MINUTES",d[d.FIFTEEN_MINUTES=900]="FIFTEEN_MINUTES",d[d.THIRTY_MINUTES=1800]="THIRTY_MINUTES",d[d.SIXTY_MINUTES=3600]="SIXTY_MINUTES",d))(Ue||{});const Tr={60:"1 minute",120:"2 minutes",300:"5 minutes",600:"10 minutes",900:"15 minutes",1800:"30 minutes",3600:"60 minutes"};var vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Eo(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Ki={exports:{}};(function(d,o){(function(l,s){d.exports=s()})(vi,function(){var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function f(e,t,n){for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:vi,h=Object.keys,y=Array.isArray;function P(e,t){return typeof t!="object"||h(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var I=Object.getPrototypeOf,O={}.hasOwnProperty;function T(e,t){return O.call(e,t)}function w(e,t){typeof t=="function"&&(t=t(I(e))),(typeof Reflect>"u"?h:Reflect.ownKeys)(t).forEach(function(n){$(e,n,t[n])})}var U=Object.defineProperty;function $(e,t,n,r){U(e,t,P(n&&T(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function ae(e){return{from:function(t){return e.prototype=Object.create(t.prototype),$(e.prototype,"constructor",e),{extend:w.bind(null,e.prototype)}}}}var Q=Object.getOwnPropertyDescriptor,re=[].slice;function ie(e,t,n){return re.call(e,t,n)}function G(e,t){return t(e)}function z(e){if(!e)throw new Error("Assertion Failed")}function de(e){u.setImmediate?setImmediate(e):setTimeout(e,0)}function W(e,t){if(typeof t=="string"&&T(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var a=W(e,t[r]);n.push(a)}return n}var c=t.indexOf(".");if(c!==-1){var p=e[t.substr(0,c)];return p==null?void 0:W(p,t.substr(c+1))}}function te(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){z(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)te(e,t[r],n[r])}else{var a,c,p=t.indexOf(".");p!==-1?(a=t.substr(0,p),(c=t.substr(p+1))===""?n===void 0?y(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n:te(p=!(p=e[a])||!T(e,a)?e[a]={}:p,c,n)):n===void 0?y(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function se(e){var t,n={};for(t in e)T(e,t)&&(n[t]=e[t]);return n}var Te=[].concat;function Ke(e){return Te.apply([],e)}var bt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ke([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return u[e]}),$e=new Set(bt.map(function(e){return u[e]})),Ut=null;function vt(e){return Ut=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var r=Ut.get(n);if(r)return r;if(y(n)){r=[],Ut.set(n,r);for(var i=0,a=n.length;i<a;++i)r.push(t(n[i]))}else if($e.has(n.constructor))r=n;else{var c,p=I(n);for(c in r=p===Object.prototype?{}:Object.create(p),Ut.set(n,r),n)T(n,c)&&(r[c]=t(n[c]))}return r}(e),Ut=null,e}var Mi={}.toString;function Fn(e){return Mi.call(e).slice(8,-1)}var Ln=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ni=typeof Ln=="symbol"?function(e){var t;return e!=null&&(t=e[Ln])&&t.apply(e)}:function(){return null};function yt(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Pt={};function Qe(e){var t,n,r,i;if(arguments.length===1){if(y(e))return e.slice();if(this===Pt&&typeof e=="string")return[e];if(i=Ni(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Un=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ht=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Le=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ht),Ri={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Dt(e,t){this.name=e,this.message=t}function Ar(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function on(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Ar(e,t)}function At(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Ar(e,this.failures)}ae(Dt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),ae(on).from(Dt),ae(At).from(Dt);var Vn=Le.reduce(function(e,t){return e[t]=t+"Error",e},{}),qi=Dt,ee=Le.reduce(function(e,t){var n=t+"Error";function r(i,a){this.name=n,i?typeof i=="string"?(this.message="".concat(i).concat(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=Ri[t]||n,this.inner=null)}return ae(r).from(qi),e[t]=r,e},{});ee.Syntax=SyntaxError,ee.Type=TypeError,ee.Range=RangeError;var Kr=Ht.reduce(function(e,t){return e[t+"Error"]=ee[t],e},{}),an=Le.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=ee[t]),e},{});function ge(){}function Vt(e){return e}function Bi(e,t){return e==null||e===Vt?t:function(n){return t(e(n))}}function gt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Fi(e,t){return e===ge?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?gt(r,this.onsuccess):r),i&&(this.onerror=this.onerror?gt(i,this.onerror):i),a!==void 0?a:n}}function Li(e,t){return e===ge?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?gt(n,this.onsuccess):n),r&&(this.onerror=this.onerror?gt(r,this.onerror):r)}}function Ui(e,t){return e===ge?t:function(n){var r=e.apply(this,arguments);P(n,r);var i=this.onsuccess,a=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?gt(i,this.onsuccess):i),a&&(this.onerror=this.onerror?gt(a,this.onerror):a),r===void 0?n===void 0?void 0:n:P(r,n)}}function Vi(e,t){return e===ge?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Yn(e,t){return e===ge?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}an.ModifyError=on,an.DexieError=Dt,an.BulkError=At;var He=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function jr(e){He=e}var Yt={},Mr=100,bt=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,I(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,I(t),e]}(),Ht=bt[0],Le=bt[1],bt=bt[2],Le=Le&&Le.then,_t=Ht&&Ht.constructor,Hn=!!bt,Wt=function(e,t){zt.push([e,t]),sn&&(queueMicrotask(Hi),sn=!1)},Wn=!0,sn=!0,wt=[],un=[],zn=Vt,et={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ge,pgp:!1,env:{},finalize:ge},X=et,zt=[],kt=0,ln=[];function Y(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=X;if(typeof e!="function"){if(e!==Yt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Qn(this,this._value))}this._state=null,this._value=null,++t.ref,function n(r,i){try{i(function(a){if(r._state===null){if(a===r)throw new TypeError("A promise cannot be resolved with itself.");var c=r._lib&&Kt();a&&typeof a.then=="function"?n(r,function(p,v){a instanceof Y?a._then(p,v):a.then(p,v)}):(r._state=!0,r._value=a,Rr(r)),c&&jt()}},Qn.bind(null,r))}catch(a){Qn(r,a)}}(this,e)}var Gn={get:function(){var e=X,t=hn;function n(r,i){var a=this,c=!e.global&&(e!==X||t!==hn),p=c&&!nt(),v=new Y(function(b,x){Xn(a,new Nr(Br(r,e,c,p),Br(i,e,c,p),b,x,e))});return this._consoleTask&&(v._consoleTask=this._consoleTask),v}return n.prototype=Yt,n},set:function(e){$(this,"then",e&&e.prototype===Yt?Gn:{get:function(){return e},set:Gn.set})}};function Nr(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function Qn(e,t){var n,r;un.push(t),e._state===null&&(n=e._lib&&Kt(),t=zn(t),e._state=!1,e._value=t,r=e,wt.some(function(i){return i._value===r._value})||wt.push(r),Rr(e),n&&jt())}function Rr(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Xn(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),kt===0&&(++kt,Wt(function(){--kt==0&&Jn()},[]))}function Xn(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++kt,Wt(Yi,[n,e,t])}else e._listeners.push(t)}function Yi(e,t,n){try{var r,i=t._value;!t._state&&un.length&&(un=[]),r=He&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||un.indexOf(i)!==-1||function(a){for(var c=wt.length;c;)if(wt[--c]._value===a._value)return wt.splice(c,1)}(t),n.resolve(r)}catch(a){n.reject(a)}finally{--kt==0&&Jn(),--n.psd.ref||n.psd.finalize()}}function Hi(){xt(et,function(){Kt()&&jt()})}function Kt(){var e=Wn;return sn=Wn=!1,e}function jt(){var e,t,n;do for(;0<zt.length;)for(e=zt,zt=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(0<zt.length);sn=Wn=!0}function Jn(){var e=wt;wt=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=ln.slice(0),n=t.length;n;)t[--n]()}function cn(e){return new Y(Yt,!1,e)}function ke(e,t){var n=X;return function(){var r=Kt(),i=X;try{return rt(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{rt(i,!1),r&&jt()}}}w(Y.prototype,{then:Gn,_then:function(e,t){Xn(this,new Nr(null,null,e,t,X))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(r){return(r instanceof t?n:cn)(r)}):this.then(null,function(r){return(r&&r.name===t?n:cn)(r)})},finally:function(e){return this.then(function(t){return Y.resolve(e()).then(function(){return t})},function(t){return Y.resolve(e()).then(function(){return cn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new Y(function(r,i){var a=setTimeout(function(){return i(new ee.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&$(Y.prototype,Symbol.toStringTag,"Dexie.Promise"),et.env=qr(),w(Y,{all:function(){var e=Qe.apply(null,arguments).map(pn);return new Y(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,a){return Y.resolve(i).then(function(c){e[a]=c,--r||t(e)},n)})})},resolve:function(e){return e instanceof Y?e:e&&typeof e.then=="function"?new Y(function(t,n){e.then(t,n)}):new Y(Yt,!0,e)},reject:cn,race:function(){var e=Qe.apply(null,arguments).map(pn);return new Y(function(t,n){e.map(function(r){return Y.resolve(r).then(t,n)})})},PSD:{get:function(){return X},set:function(e){return X=e}},totalEchoes:{get:function(){return hn}},newPSD:tt,usePSD:xt,scheduler:{get:function(){return Wt},set:function(e){Wt=e}},rejectionMapper:{get:function(){return zn},set:function(e){zn=e}},follow:function(e,t){return new Y(function(n,r){return tt(function(i,a){var c=X;c.unhandleds=[],c.onunhandled=a,c.finalize=gt(function(){var p,v=this;p=function(){v.unhandleds.length===0?i():a(v.unhandleds[0])},ln.push(function b(){p(),ln.splice(ln.indexOf(b),1)}),++kt,Wt(function(){--kt==0&&Jn()},[])},c.finalize),e()},t,n,r)})}}),_t&&(_t.allSettled&&$(Y,"allSettled",function(){var e=Qe.apply(null,arguments).map(pn);return new Y(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return Y.resolve(i).then(function(c){return r[a]={status:"fulfilled",value:c}},function(c){return r[a]={status:"rejected",reason:c}}).then(function(){return--n||t(r)})})})}),_t.any&&typeof AggregateError<"u"&&$(Y,"any",function(){var e=Qe.apply(null,arguments).map(pn);return new Y(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,c){return Y.resolve(a).then(function(p){return t(p)},function(p){i[c]=p,--r||n(new AggregateError(i))})})})}),_t.withResolvers&&(Y.withResolvers=_t.withResolvers));var Oe={awaits:0,echoes:0,id:0},Wi=0,fn=[],dn=0,hn=0,zi=0;function tt(e,t,n,r){var i=X,a=Object.create(i);return a.parent=i,a.ref=0,a.global=!1,a.id=++zi,et.env,a.env=Hn?{Promise:Y,PromiseProp:{value:Y,configurable:!0,writable:!0},all:Y.all,race:Y.race,allSettled:Y.allSettled,any:Y.any,resolve:Y.resolve,reject:Y.reject}:{},t&&P(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()},r=xt(a,e,n,r),a.ref===0&&a.finalize(),r}function Mt(){return Oe.id||(Oe.id=++Wi),++Oe.awaits,Oe.echoes+=Mr,Oe.id}function nt(){return!!Oe.awaits&&(--Oe.awaits==0&&(Oe.id=0),Oe.echoes=Oe.awaits*Mr,!0)}function pn(e){return Oe.echoes&&e&&e.constructor===_t?(Mt(),e.then(function(t){return nt(),t},function(t){return nt(),Ie(t)})):e}function Gi(){var e=fn[fn.length-1];fn.pop(),rt(e,!1)}function rt(e,t){var n,r=X;(t?!Oe.echoes||dn++&&e===X:!dn||--dn&&e===X)||queueMicrotask(t?(function(i){++hn,Oe.echoes&&--Oe.echoes!=0||(Oe.echoes=Oe.awaits=Oe.id=0),fn.push(X),rt(i,!0)}).bind(null,e):Gi),e!==X&&(X=e,r===et&&(et.env=qr()),Hn&&(n=et.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(u,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function qr(){var e=u.Promise;return Hn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function xt(e,t,n,r,i){var a=X;try{return rt(e,!0),t(n,r,i)}finally{rt(a,!1)}}function Br(e,t,n,r){return typeof e!="function"?e:function(){var i=X;n&&Mt(),rt(t,!0);try{return e.apply(this,arguments)}finally{rt(i,!1),r&&queueMicrotask(nt)}}}function Zn(e){Promise===_t&&Oe.echoes===0?dn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Le).indexOf("[native code]")===-1&&(Mt=nt=ge);var Ie=Y.reject,Et="ï¿¿",Xe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Fr="String expected.",Nt=[],mn="__dbnames",$n="readonly",er="readwrite";function Ct(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Lr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function vn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=vt(t))[e],t}}function Ur(){throw ee.Type()}function he(e,t){try{var n=Vr(e),r=Vr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(i,a){for(var c=i.length,p=a.length,v=c<p?c:p,b=0;b<v;++b)if(i[b]!==a[b])return i[b]<a[b]?-1:1;return c===p?0:c<p?-1:1}(Yr(e),Yr(t));case"Array":return function(i,a){for(var c=i.length,p=a.length,v=c<p?c:p,b=0;b<v;++b){var x=he(i[b],a[b]);if(x!==0)return x}return c===p?0:c<p?-1:1}(e,t)}}catch{}return NaN}function Vr(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Fn(e),e==="ArrayBuffer"?"binary":e)}function Yr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Hr=(we.prototype._trans=function(e,t,n){var r=this._tx||X.trans,i=this.name,a=He&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function c(b,x,m){if(!m.schema[i])throw new ee.NotFound("Table "+i+" not part of transaction");return t(m.idbtrans,m)}var p=Kt();try{var v=r&&r.db._novip===this.db._novip?r===X.trans?r._promise(e,c,n):tt(function(){return r._promise(e,c,n)},{trans:r,transless:X.transless||X}):function b(x,m,C,g){if(x.idbdb&&(x._state.openComplete||X.letThrough||x._vip)){var k=x._createTransaction(m,C,x._dbSchema);try{k.create(),x._state.PR1398_maxLoop=3}catch(E){return E.name===Vn.InvalidState&&x.isOpen()&&0<--x._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),x.close({disableAutoOpen:!1}),x.open().then(function(){return b(x,m,C,g)})):Ie(E)}return k._promise(m,function(E,_){return tt(function(){return X.trans=k,g(E,_,k)})}).then(function(E){if(m==="readwrite")try{k.idbtrans.commit()}catch{}return m==="readonly"?E:k._completion.then(function(){return E})})}if(x._state.openComplete)return Ie(new ee.DatabaseClosed(x._state.dbOpenError));if(!x._state.isBeingOpened){if(!x._state.autoOpen)return Ie(new ee.DatabaseClosed);x.open().catch(ge)}return x._state.dbReadyPromise.then(function(){return b(x,m,C,g)})}(this.db,e,[this.name],c);return a&&(v._consoleTask=a,v=v.catch(function(b){return console.trace(b),Ie(b)})),v}finally{p&&jt()}},we.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?Ie(new ee.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(i){return n.hook.reading.fire(i)})}).then(t)},we.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(y(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=h(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(p){if(p.compound&&t.every(function(b){return 0<=p.keyPath.indexOf(b)})){for(var v=0;v<t.length;++v)if(t.indexOf(p.keyPath[v])===-1)return!1;return!0}return!1}).sort(function(p,v){return p.keyPath.length-v.keyPath.length})[0];if(n&&this.db._maxKey!==Et){var a=n.keyPath.slice(0,t.length);return this.where(a).equals(a.map(function(v){return e[v]}))}!n&&He&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var r=this.schema.idxByName;function i(p,v){return he(p,v)===0}var c=t.reduce(function(m,v){var b=m[0],x=m[1],m=r[v],C=e[v];return[b||m,b||!m?Ct(x,m&&m.multi?function(g){return g=W(g,v),y(g)&&g.some(function(k){return i(C,k)})}:function(g){return i(C,W(g,v))}):x]},[null,null]),a=c[0],c=c[1];return a?this.where(a.name).equals(e[a.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")},we.prototype.filter=function(e){return this.toCollection().and(e)},we.prototype.count=function(e){return this.toCollection().count(e)},we.prototype.offset=function(e){return this.toCollection().offset(e)},we.prototype.limit=function(e){return this.toCollection().limit(e)},we.prototype.each=function(e){return this.toCollection().each(e)},we.prototype.toArray=function(e){return this.toCollection().toArray(e)},we.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},we.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,y(e)?"[".concat(e.join("+"),"]"):e))},we.prototype.reverse=function(){return this.toCollection().reverse()},we.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function i(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Ur&&(function(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function x(){this.constructor=v}l(v,b),v.prototype=b===null?Object.create(b):(x.prototype=b.prototype,new x)}(i,t=e),Object.defineProperty(i.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),i.prototype.table=function(){return r},e=i);for(var a=new Set,c=e.prototype;c;c=I(c))Object.getOwnPropertyNames(c).forEach(function(v){return a.add(v)});function p(v){if(!v)return v;var b,x=Object.create(e.prototype);for(b in v)if(!a.has(b))try{x[b]=v[b]}catch{}return x}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),e},we.prototype.defineClass=function(){return this.mapToClass(function(e){P(this,e)})},we.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,c=e;return a&&i&&(c=vn(a)(e)),this._trans("readwrite",function(p){return n.core.mutate({trans:p,type:"add",keys:t!=null?[t]:null,values:[c]})}).then(function(p){return p.numFailures?Y.reject(p.failures[0]):p.lastResult}).then(function(p){if(a)try{te(e,a,p)}catch{}return p})},we.prototype.update=function(e,t){return typeof e!="object"||y(e)?this.where(":id").equals(e).modify(t):(e=W(e,this.schema.primKey.keyPath),e===void 0?Ie(new ee.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},we.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,c=e;return a&&i&&(c=vn(a)(e)),this._trans("readwrite",function(p){return n.core.mutate({trans:p,type:"put",values:[c],keys:t!=null?[t]:null})}).then(function(p){return p.numFailures?Y.reject(p.failures[0]):p.lastResult}).then(function(p){if(a)try{te(e,a,p)}catch{}return p})},we.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?Y.reject(n.failures[0]):void 0})},we.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Lr})}).then(function(t){return t.numFailures?Y.reject(t.failures[0]):void 0})},we.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(i){return t.hook.reading.fire(i)})})})},we.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(c){var b=r.schema.primKey,p=b.auto,b=b.keyPath;if(b&&i)throw new ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");var v=e.length,b=b&&p?e.map(vn(b)):e;return r.core.mutate({trans:c,type:"add",keys:i,values:b,wantResults:a}).then(function(k){var m=k.numFailures,C=k.results,g=k.lastResult,k=k.failures;if(m===0)return a?C:g;throw new At("".concat(r.name,".bulkAdd(): ").concat(m," of ").concat(v," operations failed"),k)})})},we.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(c){var b=r.schema.primKey,p=b.auto,b=b.keyPath;if(b&&i)throw new ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");var v=e.length,b=b&&p?e.map(vn(b)):e;return r.core.mutate({trans:c,type:"put",keys:i,values:b,wantResults:a}).then(function(k){var m=k.numFailures,C=k.results,g=k.lastResult,k=k.failures;if(m===0)return a?C:g;throw new At("".concat(r.name,".bulkPut(): ").concat(m," of ").concat(v," operations failed"),k)})})},we.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(c){return c.key}),i=e.map(function(c){return c.changes}),a=[];return this._trans("readwrite",function(c){return n.getMany({trans:c,keys:r,cache:"clone"}).then(function(p){var v=[],b=[];e.forEach(function(m,C){var g=m.key,k=m.changes,E=p[C];if(E){for(var _=0,S=Object.keys(k);_<S.length;_++){var D=S[_],A=k[D];if(D===t.schema.primKey.keyPath){if(he(A,g)!==0)throw new ee.Constraint("Cannot update primary key in bulkUpdate()")}else te(E,D,A)}a.push(C),v.push(g),b.push(E)}});var x=v.length;return n.mutate({trans:c,type:"put",keys:v,values:b,updates:{keys:r,changeSpecs:i}}).then(function(m){var C=m.numFailures,g=m.failures;if(C===0)return x;for(var k=0,E=Object.keys(g);k<E.length;k++){var _,S=E[k],D=a[Number(S)];D!=null&&(_=g[S],delete g[S],g[D]=_)}throw new At("".concat(t.name,".bulkUpdate(): ").concat(C," of ").concat(x," operations failed"),g)})})})},we.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(c){var i=c.numFailures,a=c.lastResult,c=c.failures;if(i===0)return a;throw new At("".concat(t.name,".bulkDelete(): ").concat(i," of ").concat(n," operations failed"),c)})},we);function we(){}function Gt(e){function t(c,p){if(p){for(var v=arguments.length,b=new Array(v-1);--v;)b[v-1]=arguments[v];return n[c].subscribe.apply(null,b),e}if(typeof c=="string")return n[c]}var n={};t.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return t;function a(c,p,v){if(typeof c!="object"){var b;p=p||Vi;var x={subscribers:[],fire:v=v||ge,subscribe:function(m){x.subscribers.indexOf(m)===-1&&(x.subscribers.push(m),x.fire=p(x.fire,m))},unsubscribe:function(m){x.subscribers=x.subscribers.filter(function(C){return C!==m}),x.fire=x.subscribers.reduce(p,v)}};return n[c]=t[c]=x}h(b=c).forEach(function(m){var C=b[m];if(y(C))a(m,b[m][0],b[m][1]);else{if(C!=="asap")throw new ee.InvalidArgument("Invalid event config");var g=a(m,Vt,function(){for(var k=arguments.length,E=new Array(k);k--;)E[k]=arguments[k];g.subscribers.forEach(function(_){de(function(){_.apply(null,E)})})})}})}}function Qt(e,t){return ae(t).from({prototype:e}),t}function Rt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function tr(e,t){e.filter=Ct(e.filter,t)}function nr(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ct(r(),t())}:t,e.justLimit=n&&!r}function yn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new ee.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Wr(e,t,n){var r=yn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function gn(e,t,n,r){var i=e.replayFilter?Ct(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},c=function(p,v,b){var x,m;i&&!i(v,b,function(C){return v.stop(C)},function(C){return v.fail(C)})||((m=""+(x=v.primaryKey))=="[object ArrayBuffer]"&&(m=""+new Uint8Array(x)),T(a,m)||(a[m]=!0,t(p,v,b)))};return Promise.all([e.or._iterate(c,n),zr(Wr(e,r,n),e.algorithm,c,!e.keysOnly&&e.valueMapper)])}return zr(Wr(e,r,n),Ct(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function zr(e,t,n,r){var i=ke(r?function(a,c,p){return n(r(a),c,p)}:n);return e.then(function(a){if(a)return a.start(function(){var c=function(){return a.continue()};t&&!t(a,function(p){return c=p},function(p){a.stop(p),c=ge},function(p){a.fail(p),c=ge})||i(a.value,a,function(p){return c=p}),c()})})}var Xt=(Gr.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(y(n))return f(f([],y(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var r=t.remove;if(y(r))return y(e)?e.filter(function(i){return!r.includes(i)}).sort():[];if(typeof r=="number")return Number(e)-r;if(typeof r=="bigint")try{return BigInt(e)-r}catch{return BigInt(0)-r}throw new TypeError("Invalid subtrahend ".concat(r))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},Gr);function Gr(e){this["@@propmod"]=e}var Qi=(pe.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Ie.bind(null,n.error)):n.table._trans("readonly",e).then(t)},pe.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Ie.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},pe.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Ct(t.algorithm,e)},pe.prototype._iterate=function(e,t){return gn(this._ctx,e,t,this._ctx.table.core)},pe.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&P(n,e),t._ctx=n,t},pe.prototype.raw=function(){return this._ctx.valueMapper=null,this},pe.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return gn(t,e,n,t.table.core)})},pe.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,i=r.table.core;if(Rt(r,!0))return i.count({trans:n,query:{index:yn(r,i.schema),range:r.range}}).then(function(c){return Math.min(c,r.limit)});var a=0;return gn(r,function(){return++a,!1},n,i).then(function(){return a})}).then(e)},pe.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function a(v,b){return b?a(v[n[b]],b-1):v[r]}var c=this._ctx.dir==="next"?1:-1;function p(v,b){return he(a(v,i),a(b,i))*c}return this.toArray(function(v){return v.sort(p)}).then(t)},pe.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if(r.dir==="next"&&Rt(r,!0)&&0<r.limit){var i=r.valueMapper,a=yn(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:a,range:r.range}}).then(function(p){return p=p.result,i?p.map(i):p})}var c=[];return gn(r,function(p){return c.push(p)},n,r.table.core).then(function(){return c})},e)},pe.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Rt(t)?nr(t,function(){var n=e;return function(r,i){return n===0||(n===1?--n:i(function(){r.advance(n),n=0}),!1)}}):nr(t,function(){var n=e;return function(){return--n<0}})),this},pe.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),nr(this._ctx,function(){var t=e;return function(n,r,i){return--t<=0&&r(i),0<=t}},!0),this},pe.prototype.until=function(e,t){return tr(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},pe.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},pe.prototype.last=function(e){return this.reverse().first(e)},pe.prototype.filter=function(e){var t;return tr(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=Ct(t.isMatch,e),this},pe.prototype.and=function(e){return this.filter(e)},pe.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},pe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},pe.prototype.desc=function(){return this.reverse()},pe.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},pe.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},pe.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},pe.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.key)}).then(function(){return n}).then(e)},pe.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Rt(t,!0)&&0<t.limit)return this._read(function(r){var i=yn(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:i,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.primaryKey)}).then(function(){return n}).then(e)},pe.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},pe.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},pe.prototype.lastKey=function(e){return this.reverse().firstKey(e)},pe.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return tr(this._ctx,function(i){var r=i.primaryKey.toString(),i=T(t,r);return t[r]=!0,!i}),this},pe.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var i,a,c;c=typeof e=="function"?e:(i=h(e),a=i.length,function(_){for(var S=!1,D=0;D<a;++D){var A=i[D],K=e[A],j=W(_,A);K instanceof Xt?(te(_,A,K.execute(j)),S=!0):j!==K&&(te(_,A,K),S=!0)}return S});var p=n.table.core,m=p.schema.primaryKey,v=m.outbound,b=m.extractKey,x=200,m=t.db._options.modifyChunkSize;m&&(x=typeof m=="object"?m[p.name]||m["*"]||200:m);function C(_,A){var D=A.failures,A=A.numFailures;k+=_-A;for(var K=0,j=h(D);K<j.length;K++){var B=j[K];g.push(D[B])}}var g=[],k=0,E=[];return t.clone().primaryKeys().then(function(_){function S(A){var K=Math.min(x,_.length-A);return p.getMany({trans:r,keys:_.slice(A,A+K),cache:"immutable"}).then(function(j){for(var B=[],M=[],R=v?[]:null,L=[],q=0;q<K;++q){var H=j[q],ue={value:vt(H),primKey:_[A+q]};c.call(ue,ue.value,ue)!==!1&&(ue.value==null?L.push(_[A+q]):v||he(b(H),b(ue.value))===0?(M.push(ue.value),v&&R.push(_[A+q])):(L.push(_[A+q]),B.push(ue.value)))}return Promise.resolve(0<B.length&&p.mutate({trans:r,type:"add",values:B}).then(function(ce){for(var fe in ce.failures)L.splice(parseInt(fe),1);C(B.length,ce)})).then(function(){return(0<M.length||D&&typeof e=="object")&&p.mutate({trans:r,type:"put",keys:R,values:M,criteria:D,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<A}).then(function(ce){return C(M.length,ce)})}).then(function(){return(0<L.length||D&&e===rr)&&p.mutate({trans:r,type:"delete",keys:L,criteria:D,isAdditionalChunk:0<A}).then(function(ce){return C(L.length,ce)})}).then(function(){return _.length>A+K&&S(A+x)})})}var D=Rt(n)&&n.limit===1/0&&(typeof e!="function"||e===rr)&&{index:n.index,range:n.range};return S(0).then(function(){if(0<g.length)throw new on("Error modifying one or more objects",g,k,E);return _.length})})})},pe.prototype.delete=function(){var e=this._ctx,t=e.range;return Rt(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then(function(a){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(c){var p=c.failures;if(c.lastResult,c.results,c=c.numFailures,c)throw new on("Could not delete some values",Object.keys(p).map(function(v){return p[v]}),a-c);return a-c})})}):this.modify(rr)},pe);function pe(){}var rr=function(e,t){return t.value=null};function Xi(e,t){return e<t?-1:e===t?0:1}function Ji(e,t){return t<e?-1:e===t?0:1}function qe(e,t,n){return e=e instanceof Xr?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function qt(e){return new e.Collection(e,function(){return Qr("")}).limit(0)}function bn(e,t,n,r){var i,a,c,p,v,b,x,m=n.length;if(!n.every(function(k){return typeof k=="string"}))return qe(e,Fr);function C(k){i=k==="next"?function(_){return _.toUpperCase()}:function(_){return _.toLowerCase()},a=k==="next"?function(_){return _.toLowerCase()}:function(_){return _.toUpperCase()},c=k==="next"?Xi:Ji;var E=n.map(function(_){return{lower:a(_),upper:i(_)}}).sort(function(_,S){return c(_.lower,S.lower)});p=E.map(function(_){return _.upper}),v=E.map(function(_){return _.lower}),x=(b=k)==="next"?"":r}C("next"),e=new e.Collection(e,function(){return it(p[0],v[m-1]+r)}),e._ondirectionchange=function(k){C(k)};var g=0;return e._addAlgorithm(function(k,E,_){var S=k.key;if(typeof S!="string")return!1;var D=a(S);if(t(D,v,g))return!0;for(var A=null,K=g;K<m;++K){var j=function(B,M,R,L,q,H){for(var ue=Math.min(B.length,L.length),ce=-1,fe=0;fe<ue;++fe){var Be=M[fe];if(Be!==L[fe])return q(B[fe],R[fe])<0?B.substr(0,fe)+R[fe]+R.substr(fe+1):q(B[fe],L[fe])<0?B.substr(0,fe)+L[fe]+R.substr(fe+1):0<=ce?B.substr(0,ce)+M[ce]+R.substr(ce+1):null;q(B[fe],Be)<0&&(ce=fe)}return ue<L.length&&H==="next"?B+R.substr(B.length):ue<B.length&&H==="prev"?B.substr(0,R.length):ce<0?null:B.substr(0,ce)+L[ce]+R.substr(ce+1)}(S,D,p[K],v[K],c,b);j===null&&A===null?g=K+1:(A===null||0<c(A,j))&&(A=j)}return E(A!==null?function(){k.continue(A+x)}:_),!1}),e}function it(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Qr(e){return{type:1,lower:e,upper:e}}var Xr=(Object.defineProperty(Pe.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Pe.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||r)&&(!n||!r)?qt(this):new this.Collection(this,function(){return it(e,t,!n,!r)})}catch{return qe(this,Xe)}},Pe.prototype.equals=function(e){return e==null?qe(this,Xe):new this.Collection(this,function(){return Qr(e)})},Pe.prototype.above=function(e){return e==null?qe(this,Xe):new this.Collection(this,function(){return it(e,void 0,!0)})},Pe.prototype.aboveOrEqual=function(e){return e==null?qe(this,Xe):new this.Collection(this,function(){return it(e,void 0,!1)})},Pe.prototype.below=function(e){return e==null?qe(this,Xe):new this.Collection(this,function(){return it(void 0,e,!1,!0)})},Pe.prototype.belowOrEqual=function(e){return e==null?qe(this,Xe):new this.Collection(this,function(){return it(void 0,e)})},Pe.prototype.startsWith=function(e){return typeof e!="string"?qe(this,Fr):this.between(e,e+Et,!0,!0)},Pe.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):bn(this,function(t,n){return t.indexOf(n[0])===0},[e],Et)},Pe.prototype.equalsIgnoreCase=function(e){return bn(this,function(t,n){return t===n[0]},[e],"")},Pe.prototype.anyOfIgnoreCase=function(){var e=Qe.apply(Pt,arguments);return e.length===0?qt(this):bn(this,function(t,n){return n.indexOf(t)!==-1},e,"")},Pe.prototype.startsWithAnyOfIgnoreCase=function(){var e=Qe.apply(Pt,arguments);return e.length===0?qt(this):bn(this,function(t,n){return n.some(function(r){return t.indexOf(r)===0})},e,Et)},Pe.prototype.anyOf=function(){var e=this,t=Qe.apply(Pt,arguments),n=this._cmp;try{t.sort(n)}catch{return qe(this,Xe)}if(t.length===0)return qt(this);var r=new this.Collection(this,function(){return it(t[0],t[t.length-1])});r._ondirectionchange=function(a){n=a==="next"?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm(function(a,c,p){for(var v=a.key;0<n(v,t[i]);)if(++i===t.length)return c(p),!1;return n(v,t[i])===0||(c(function(){a.continue(t[i])}),!1)}),r},Pe.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Pe.prototype.noneOf=function(){var e=Qe.apply(Pt,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return qe(this,Xe)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Pe.prototype.inAnyRange=function(S,t){var n=this,r=this._cmp,i=this._ascending,a=this._descending,c=this._min,p=this._max;if(S.length===0)return qt(this);if(!S.every(function(D){return D[0]!==void 0&&D[1]!==void 0&&i(D[0],D[1])<=0}))return qe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ee.InvalidArgument);var v=!t||t.includeLowers!==!1,b=t&&t.includeUppers===!0,x,m=i;function C(D,A){return m(D[0],A[0])}try{(x=S.reduce(function(D,A){for(var K=0,j=D.length;K<j;++K){var B=D[K];if(r(A[0],B[1])<0&&0<r(A[1],B[0])){B[0]=c(B[0],A[0]),B[1]=p(B[1],A[1]);break}}return K===j&&D.push(A),D},[])).sort(C)}catch{return qe(this,Xe)}var g=0,k=b?function(D){return 0<i(D,x[g][1])}:function(D){return 0<=i(D,x[g][1])},E=v?function(D){return 0<a(D,x[g][0])}:function(D){return 0<=a(D,x[g][0])},_=k,S=new this.Collection(this,function(){return it(x[0][0],x[x.length-1][1],!v,!b)});return S._ondirectionchange=function(D){m=D==="next"?(_=k,i):(_=E,a),x.sort(C)},S._addAlgorithm(function(D,A,K){for(var j,B=D.key;_(B);)if(++g===x.length)return A(K),!1;return!k(j=B)&&!E(j)||(n._cmp(B,x[g][1])===0||n._cmp(B,x[g][0])===0||A(function(){m===i?D.continue(x[g][0]):D.continue(x[g][1])}),!1)}),S},Pe.prototype.startsWithAnyOf=function(){var e=Qe.apply(Pt,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?qt(this):this.inAnyRange(e.map(function(t){return[t,t+Et]})):qe(this,"startsWithAnyOf() only works with strings")},Pe);function Pe(){}function We(e){return ke(function(t){return Jt(t),e(t.target.error),!1})}function Jt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Zt="storagemutated",ir="x-storagemutated-1",ot=Gt(null,Zt),Zi=(ze.prototype._lock=function(){return z(!X.global),++this._reculock,this._reculock!==1||X.global||(X.lockOwnerFor=this),this},ze.prototype._unlock=function(){if(z(!X.global),--this._reculock==0)for(X.global||(X.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{xt(e[1],e[0])}catch{}}return this},ze.prototype._locked=function(){return this._reculock&&X.lockOwnerFor!==this},ze.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(z(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ee.DatabaseClosed(r);case"MissingAPIError":throw new ee.MissingAPI(r.message,r);default:throw new ee.OpenFailed(r)}if(!this.active)throw new ee.TransactionInactive;return z(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ke(function(i){Jt(i),t._reject(e.error)}),e.onabort=ke(function(i){Jt(i),t.active&&t._reject(new ee.Abort(e.error)),t.active=!1,t.on("abort").fire(i)}),e.oncomplete=ke(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&ot.storagemutated.fire(e.mutatedParts)}),this},ze.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return Ie(new ee.ReadOnly("Transaction is readonly"));if(!this.active)return Ie(new ee.TransactionInactive);if(this._locked())return new Y(function(a,c){r._blockedFuncs.push([function(){r._promise(e,t,n).then(a,c)},X])});if(n)return tt(function(){var a=new Y(function(c,p){r._lock();var v=t(c,p,r);v&&v.then&&v.then(c,p)});return a.finally(function(){return r._unlock()}),a._lib=!0,a});var i=new Y(function(a,c){var p=t(a,c,r);p&&p.then&&p.then(a,c)});return i._lib=!0,i},ze.prototype._root=function(){return this.parent?this.parent._root():this},ze.prototype.waitFor=function(e){var t,n=this._root(),r=Y.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=a)}());var i=n._waitingFor;return new Y(function(a,c){r.then(function(p){return n._waitingQueue.push(ke(a.bind(null,p)))},function(p){return n._waitingQueue.push(ke(c.bind(null,p)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},ze.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ee.Abort))},ze.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(T(t,e))return t[e];var n=this.schema[e];if(!n)throw new ee.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},ze);function ze(){}function or(e,t,n,r,i,a,c){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!c?"&":"")+(r?"*":"")+(i?"++":"")+Jr(t)}}function Jr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function ar(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(i){return[i.name,i]},n.reduce(function(i,a,c){return c=r(a,c),c&&(i[c[0]]=c[1]),i},{}))};var r}var $t=function(e){try{return e.only([[]]),$t=function(){return[[]]},[[]]}catch{return $t=function(){return Et},Et}};function sr(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return W(n,t)}:function(n){return W(n,e)};var t}function Zr(e){return[].slice.call(e)}var $i=0;function en(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function eo(e,t,v){function r(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var g=_.lower,k=_.upper,E=_.lowerOpen,_=_.upperOpen;return g===void 0?k===void 0?null:t.upperBound(k,!!_):k===void 0?t.lowerBound(g,!!E):t.bound(g,k,!!E,!!_)}function i(C){var g,k=C.name;return{name:k,schema:C,mutate:function(E){var _=E.trans,S=E.type,D=E.keys,A=E.values,K=E.range;return new Promise(function(j,B){j=ke(j);var M=_.objectStore(k),R=M.keyPath==null,L=S==="put"||S==="add";if(!L&&S!=="delete"&&S!=="deleteRange")throw new Error("Invalid operation type: "+S);var q,H=(D||A||{length:1}).length;if(D&&A&&D.length!==A.length)throw new Error("Given keys array must have same length as given values array.");if(H===0)return j({numFailures:0,failures:{},results:[],lastResult:void 0});function ue(Re){++Be,Jt(Re)}var ce=[],fe=[],Be=0;if(S==="deleteRange"){if(K.type===4)return j({numFailures:Be,failures:fe,results:[],lastResult:void 0});K.type===3?ce.push(q=M.clear()):ce.push(q=M.delete(r(K)))}else{var R=L?R?[A,D]:[A,null]:[D,null],oe=R[0],Me=R[1];if(L)for(var Ne=0;Ne<H;++Ne)ce.push(q=Me&&Me[Ne]!==void 0?M[S](oe[Ne],Me[Ne]):M[S](oe[Ne])),q.onerror=ue;else for(Ne=0;Ne<H;++Ne)ce.push(q=M[S](oe[Ne])),q.onerror=ue}function An(Re){Re=Re.target.result,ce.forEach(function(St,Cr){return St.error!=null&&(fe[Cr]=St.error)}),j({numFailures:Be,failures:fe,results:S==="delete"?D:ce.map(function(St){return St.result}),lastResult:Re})}q.onerror=function(Re){ue(Re),An(Re)},q.onsuccess=An})},getMany:function(E){var _=E.trans,S=E.keys;return new Promise(function(D,A){D=ke(D);for(var K,j=_.objectStore(k),B=S.length,M=new Array(B),R=0,L=0,q=function(ce){ce=ce.target,M[ce._pos]=ce.result,++L===R&&D(M)},H=We(A),ue=0;ue<B;++ue)S[ue]!=null&&((K=j.get(S[ue]))._pos=ue,K.onsuccess=q,K.onerror=H,++R);R===0&&D(M)})},get:function(E){var _=E.trans,S=E.key;return new Promise(function(D,A){D=ke(D);var K=_.objectStore(k).get(S);K.onsuccess=function(j){return D(j.target.result)},K.onerror=We(A)})},query:(g=b,function(E){return new Promise(function(_,S){_=ke(_);var D,A,K,R=E.trans,j=E.values,B=E.limit,q=E.query,M=B===1/0?void 0:B,L=q.index,q=q.range,R=R.objectStore(k),L=L.isPrimaryKey?R:R.index(L.name),q=r(q);if(B===0)return _({result:[]});g?((M=j?L.getAll(q,M):L.getAllKeys(q,M)).onsuccess=function(H){return _({result:H.target.result})},M.onerror=We(S)):(D=0,A=!j&&"openKeyCursor"in L?L.openKeyCursor(q):L.openCursor(q),K=[],A.onsuccess=function(H){var ue=A.result;return ue?(K.push(j?ue.value:ue.primaryKey),++D===B?_({result:K}):void ue.continue()):_({result:K})},A.onerror=We(S))})}),openCursor:function(E){var _=E.trans,S=E.values,D=E.query,A=E.reverse,K=E.unique;return new Promise(function(j,B){j=ke(j);var L=D.index,M=D.range,R=_.objectStore(k),R=L.isPrimaryKey?R:R.index(L.name),L=A?K?"prevunique":"prev":K?"nextunique":"next",q=!S&&"openKeyCursor"in R?R.openKeyCursor(r(M),L):R.openCursor(r(M),L);q.onerror=We(B),q.onsuccess=ke(function(H){var ue,ce,fe,Be,oe=q.result;oe?(oe.___id=++$i,oe.done=!1,ue=oe.continue.bind(oe),ce=(ce=oe.continuePrimaryKey)&&ce.bind(oe),fe=oe.advance.bind(oe),Be=function(){throw new Error("Cursor not stopped")},oe.trans=_,oe.stop=oe.continue=oe.continuePrimaryKey=oe.advance=function(){throw new Error("Cursor not started")},oe.fail=ke(B),oe.next=function(){var Me=this,Ne=1;return this.start(function(){return Ne--?Me.continue():Me.stop()}).then(function(){return Me})},oe.start=function(Me){function Ne(){if(q.result)try{Me()}catch(Re){oe.fail(Re)}else oe.done=!0,oe.start=function(){throw new Error("Cursor behind last entry")},oe.stop()}var An=new Promise(function(Re,St){Re=ke(Re),q.onerror=We(St),oe.fail=St,oe.stop=function(Cr){oe.stop=oe.continue=oe.continuePrimaryKey=oe.advance=Be,Re(Cr)}});return q.onsuccess=ke(function(Re){q.onsuccess=Ne,Ne()}),oe.continue=ue,oe.continuePrimaryKey=ce,oe.advance=fe,Ne(),An},j(oe)):j(null)},B)})},count:function(E){var _=E.query,S=E.trans,D=_.index,A=_.range;return new Promise(function(K,j){var B=S.objectStore(k),M=D.isPrimaryKey?B:B.index(D.name),B=r(A),M=B?M.count(B):M.count();M.onsuccess=ke(function(R){return K(R.target.result)}),M.onerror=We(j)})}}}var a,c,p,x=(c=v,p=Zr((a=e).objectStoreNames),{schema:{name:a.name,tables:p.map(function(C){return c.objectStore(C)}).map(function(C){var g=C.keyPath,_=C.autoIncrement,k=y(g),E={},_={name:C.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g==null,compound:k,keyPath:g,autoIncrement:_,unique:!0,extractKey:sr(g)},indexes:Zr(C.indexNames).map(function(S){return C.index(S)}).map(function(K){var D=K.name,A=K.unique,j=K.multiEntry,K=K.keyPath,j={name:D,compound:y(K),keyPath:K,unique:A,multiEntry:j,extractKey:sr(K)};return E[en(K)]=j}),getIndexByKeyPath:function(S){return E[en(S)]}};return E[":id"]=_.primaryKey,g!=null&&(E[en(g)]=_.primaryKey),_})},hasGetAll:0<p.length&&"getAll"in c.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),v=x.schema,b=x.hasGetAll,x=v.tables.map(i),m={};return x.forEach(function(C){return m[C.name]=C}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(C){if(!m[C])throw new Error("Table '".concat(C,"' not found"));return m[C]},MIN_KEY:-1/0,MAX_KEY:$t(t),schema:v}}function to(e,t,n,r){var i=n.IDBKeyRange;return n.indexedDB,{dbcore:(r=eo(t,i,r),e.dbcore.reduce(function(a,c){return c=c.create,s(s({},a),c(a))},r))}}function _n(e,r){var n=r.db,r=to(e._middlewares,n,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(i){var a=i.name;e.core.schema.tables.some(function(c){return c.name===a})&&(i.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=i.core))})}function wn(e,t,n,r){n.forEach(function(i){var a=r[i];t.forEach(function(c){var p=function v(b,x){return Q(b,x)||(b=I(b))&&v(b,x)}(c,i);(!p||"value"in p&&p.value===void 0)&&(c===e.Transaction.prototype||c instanceof e.Transaction?$(c,i,{get:function(){return this.table(i)},set:function(v){U(this,i,{value:v,writable:!0,configurable:!0,enumerable:!0})}}):c[i]=new e.Table(i,a))})})}function ur(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function no(e,t){return e._cfg.version-t._cfg.version}function ro(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=ar("$meta",ei("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var c=a._reject.bind(a),p=X.transless||X;tt(function(){return X.trans=a,X.transless=p,t!==0?(_n(e,n),b=t,((v=a).storeNames.includes("$meta")?v.table("$meta").get("version").then(function(x){return x??b}):Y.resolve(b)).then(function(x){return C=x,g=a,k=n,E=[],x=(m=e)._versions,_=m._dbSchema=xn(0,m.idbdb,k),(x=x.filter(function(S){return S._cfg.version>=C})).length!==0?(x.forEach(function(S){E.push(function(){var D=_,A=S._cfg.dbschema;En(m,D,k),En(m,A,k),_=m._dbSchema=A;var K=lr(D,A);K.add.forEach(function(L){cr(k,L[0],L[1].primKey,L[1].indexes)}),K.change.forEach(function(L){if(L.recreate)throw new ee.Upgrade("Not yet support for changing primary key");var q=k.objectStore(L.name);L.add.forEach(function(H){return kn(q,H)}),L.change.forEach(function(H){q.deleteIndex(H.name),kn(q,H)}),L.del.forEach(function(H){return q.deleteIndex(H)})});var j=S._cfg.contentUpgrade;if(j&&S._cfg.version>C){_n(m,k),g._memoizedTables={};var B=se(A);K.del.forEach(function(L){B[L]=D[L]}),ur(m,[m.Transaction.prototype]),wn(m,[m.Transaction.prototype],h(B),B),g.schema=B;var M,R=Un(j);return R&&Mt(),K=Y.follow(function(){var L;(M=j(g))&&R&&(L=nt.bind(null,null),M.then(L,L))}),M&&typeof M.then=="function"?Y.resolve(M):K.then(function(){return M})}}),E.push(function(D){var A,K,j=S._cfg.dbschema;A=j,K=D,[].slice.call(K.db.objectStoreNames).forEach(function(B){return A[B]==null&&K.db.deleteObjectStore(B)}),ur(m,[m.Transaction.prototype]),wn(m,[m.Transaction.prototype],m._storeNames,m._dbSchema),g.schema=m._dbSchema}),E.push(function(D){m.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(m.idbdb.version/10)===S._cfg.version?(m.idbdb.deleteObjectStore("$meta"),delete m._dbSchema.$meta,m._storeNames=m._storeNames.filter(function(A){return A!=="$meta"})):D.objectStore("$meta").put(S._cfg.version,"version"))})}),function S(){return E.length?Y.resolve(E.shift()(g.idbtrans)).then(S):Y.resolve()}().then(function(){$r(_,k)})):Y.resolve();var m,C,g,k,E,_}).catch(c)):(h(i).forEach(function(x){cr(n,x,i[x].primKey,i[x].indexes)}),_n(e,n),void Y.follow(function(){return e.on.populate.fire(a)}).catch(c));var v,b})}function io(e,t){$r(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=xn(0,e.idbdb,t);En(e,e._dbSchema,t);for(var r=0,i=lr(n,e._dbSchema).change;r<i.length;r++){var a=function(c){if(c.change.length||c.recreate)return console.warn("Unable to patch indexes of table ".concat(c.name," because it has changes on the type of index or primary key.")),{value:void 0};var p=t.objectStore(c.name);c.add.forEach(function(v){He&&console.debug("Dexie upgrade patch: Creating missing index ".concat(c.name,".").concat(v.src)),kn(p,v)})}(i[r]);if(typeof a=="object")return a.value}}function lr(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],a=t[n];if(i){var c={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)c.recreate=!0,r.change.push(c);else{var p=i.idxByName,v=a.idxByName,b=void 0;for(b in p)v[b]||c.del.push(b);for(b in v){var x=p[b],m=v[b];x?x.src!==m.src&&c.change.push(m):c.add.push(m)}(0<c.del.length||0<c.add.length||0<c.change.length)&&r.change.push(c)}}else r.add.push([n,a])}return r}function cr(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return kn(i,a)}),i}function $r(e,t){h(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(He&&console.debug("Dexie: Creating missing table",n),cr(t,n,e[n].primKey,e[n].indexes))})}function kn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function xn(e,t,n){var r={};return ie(t.objectStoreNames,0).forEach(function(i){for(var a=n.objectStore(i),c=or(Jr(b=a.keyPath),b||"",!0,!1,!!a.autoIncrement,b&&typeof b!="string",!0),p=[],v=0;v<a.indexNames.length;++v){var x=a.index(a.indexNames[v]),b=x.keyPath,x=or(x.name,b,!!x.unique,!!x.multiEntry,!1,b&&typeof b!="string",!1);p.push(x)}r[i]=ar(i,c,p)}),r}function En(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var a=r[i],c=n.objectStore(a);e._hasGetAll="getAll"in c;for(var p=0;p<c.indexNames.length;++p){var v=c.indexNames[p],b=c.index(v).keyPath,x=typeof b=="string"?b:"["+ie(b).join("+")+"]";!t[a]||(b=t[a].idxByName[x])&&(b.name=v,delete t[a].idxByName[x],t[a].idxByName[v]=b)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ei(e){return e.split(",").map(function(t,n){var r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return or(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),y(i),n===0)})}var oo=(Cn.prototype._parseStoresSpec=function(e,t){h(e).forEach(function(n){if(e[n]!==null){var r=ei(e[n]),i=r.shift();if(i.unique=!0,i.multi)throw new ee.Schema("Primary key cannot be multi-valued");r.forEach(function(a){if(a.auto)throw new ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new ee.Schema("Index must have a name and cannot be an empty string")}),t[n]=ar(n,i,r)}})},Cn.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?P(this._cfg.storesSource,n):n;var n=t._versions,r={},i={};return n.forEach(function(a){P(r,a._cfg.storesSource),i=a._cfg.dbschema={},a._parseStoresSpec(r,i)}),t._dbSchema=i,ur(t,[t._allTables,t,t.Transaction.prototype]),wn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],h(i),i),t._storeNames=h(i),this},Cn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Yn(this._cfg.contentUpgrade||ge,e),this},Cn);function Cn(){}function fr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Je(mn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function dr(e){return e&&typeof e.databases=="function"}function hr(e){return tt(function(){return X.letThrough=!0,e()})}function pr(e){return!("from"in e)}var je=function(e,t){if(!this){var n=new je;return e&&"d"in e&&P(n,e),n}P(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function tn(e,t,n){var r=he(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(pr(e))return P(e,{from:t,to:n,d:1});var i=e.l,r=e.r;if(he(n,e.from)<0)return i?tn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},ni(e);if(0<he(t,e.to))return r?tn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},ni(e);he(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<he(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&nn(e,i),r&&n&&nn(e,r)}}function nn(e,t){pr(t)||function n(r,v){var a=v.from,c=v.to,p=v.l,v=v.r;tn(r,a,c),p&&n(r,p),v&&n(r,v)}(e,t)}function ti(e,t){var n=Tn(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=Tn(e),c=a.next(i.from),p=c.value;!r.done&&!c.done;){if(he(p.from,i.to)<=0&&0<=he(p.to,i.from))return!0;he(i.from,p.from)<0?i=(r=n.next(p.from)).value:p=(c=a.next(i.from)).value}return!1}function Tn(e){var t=pr(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&he(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||he(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function ni(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=1<r?"r":r<-1?"l":"";i&&(t=i=="r"?"l":"r",n=s({},e),r=e[i],e.from=r.from,e.to=r.to,e[i]=r[i],n[i]=r[t],(e[t]=n).d=ri(n)),e.d=ri(e)}function ri(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function In(e,t){return h(t).forEach(function(n){e[n]?nn(e[n],t[n]):e[n]=function r(i){var a,c,p={};for(a in i)T(i,a)&&(c=i[a],p[a]=!c||typeof c!="object"||$e.has(c.constructor)?c:r(c));return p}(t[n])}),e}function mr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&ti(t[n],e[n])})}w(je.prototype,((Le={add:function(e){return nn(this,e),this},addKey:function(e){return tn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return tn(t,n,n)}),this},hasKey:function(e){var t=Tn(this).next(e).value;return t&&he(t.from,e)<=0&&0<=he(t.to,e)}})[Ln]=function(){return Tn(this)},Le));var Tt={},vr={},yr=!1;function Sn(e){In(vr,e),yr||(yr=!0,setTimeout(function(){yr=!1,gr(vr,!(vr={}))},0))}function gr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(Tt);r<i.length;r++)ii(c=i[r],e,n,t);else for(var a in e){var c,p=/^idb\:\/\/(.*)\/(.*)\//.exec(a);p&&(a=p[1],p=p[2],(c=Tt["idb://".concat(a,"/").concat(p)])&&ii(c,e,n,t))}n.forEach(function(v){return v()})}function ii(e,t,n,r){for(var i=[],a=0,c=Object.entries(e.queries.query);a<c.length;a++){for(var p=c[a],v=p[0],b=[],x=0,m=p[1];x<m.length;x++){var C=m[x];mr(t,C.obsSet)?C.subscribers.forEach(function(_){return n.add(_)}):r&&b.push(C)}r&&i.push([v,b])}if(r)for(var g=0,k=i;g<k.length;g++){var E=k[g],v=E[0],b=E[1];e.queries.query[v]=b}}function ao(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Ie(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),a=!1;function c(){if(t.openCanceller!==r)throw new ee.DatabaseClosed("db.open() was cancelled")}function p(){return new Y(function(C,g){if(c(),!n)throw new ee.MissingAPI;var k=e.name,E=t.autoSchema||!i?n.open(k):n.open(k,i);if(!E)throw new ee.MissingAPI;E.onerror=We(g),E.onblocked=ke(e._fireOnBlocked),E.onupgradeneeded=ke(function(_){var S;x=E.transaction,t.autoSchema&&!e._options.allowEmptyDB?(E.onerror=Jt,x.abort(),E.result.close(),(S=n.deleteDatabase(k)).onsuccess=S.onerror=ke(function(){g(new ee.NoSuchDatabase("Database ".concat(k," doesnt exist")))})):(x.onerror=We(g),_=_.oldVersion>Math.pow(2,62)?0:_.oldVersion,m=_<1,e.idbdb=E.result,a&&io(e,x),ro(e,_/10,x,g))},g),E.onsuccess=ke(function(){x=null;var _,S,D,A,K,j=e.idbdb=E.result,B=ie(j.objectStoreNames);if(0<B.length)try{var M=j.transaction((A=B).length===1?A[0]:A,"readonly");if(t.autoSchema)S=j,D=M,(_=e).verno=S.version/10,D=_._dbSchema=xn(0,S,D),_._storeNames=ie(S.objectStoreNames,0),wn(_,[_._allTables],h(D),D);else if(En(e,e._dbSchema,M),((K=lr(xn(0,(K=e).idbdb,M),K._dbSchema)).add.length||K.change.some(function(R){return R.add.length||R.change.length}))&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),j.close(),i=j.version+1,a=!0,C(p());_n(e,M)}catch{}Nt.push(e),j.onversionchange=ke(function(R){t.vcFired=!0,e.on("versionchange").fire(R)}),j.onclose=ke(function(R){e.on("close").fire(R)}),m&&(K=e._deps,M=k,j=K.indexedDB,K=K.IDBKeyRange,dr(j)||M===mn||fr(j,K).put({name:M}).catch(ge)),C()},g)}).catch(function(C){switch(C==null?void 0:C.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),p();break;case"VersionError":if(0<i)return i=0,p()}return Y.reject(C)})}var v,b=t.dbReadyResolve,x=null,m=!1;return Y.race([r,(typeof navigator>"u"?Y.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(C){function g(){return indexedDB.databases().finally(C)}v=setInterval(g,100),g()}).finally(function(){return clearInterval(v)}):Promise.resolve()).then(p)]).then(function(){return c(),t.onReadyBeingFired=[],Y.resolve(hr(function(){return e.on.ready.fire(e.vip)})).then(function C(){if(0<t.onReadyBeingFired.length){var g=t.onReadyBeingFired.reduce(Yn,ge);return t.onReadyBeingFired=[],Y.resolve(hr(function(){return g(e.vip)})).then(C)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(C){t.dbOpenError=C;try{x&&x.abort()}catch{}return r===t.openCanceller&&e._close(),Ie(C)}).finally(function(){t.openComplete=!0,b()}).then(function(){var C;return m&&(C={},e.tables.forEach(function(g){g.schema.indexes.forEach(function(k){k.name&&(C["idb://".concat(e.name,"/").concat(g.name,"/").concat(k.name)]=new je(-1/0,[[[]]]))}),C["idb://".concat(e.name,"/").concat(g.name,"/")]=C["idb://".concat(e.name,"/").concat(g.name,"/:dels")]=new je(-1/0,[[[]]])}),ot(Zt).fire(C),gr(C,!0)),e})}function br(e){function t(a){return e.next(a)}var n=i(t),r=i(function(a){return e.throw(a)});function i(a){return function(v){var p=a(v),v=p.value;return p.done?v:v&&typeof v.then=="function"?v.then(n,r):y(v)?Promise.all(v).then(n,r):n(v)}}return i(t)()}function On(e,t,n){for(var r=y(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var so={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function c(m,C,g){var k=en(m),E=i[k]=i[k]||[],_=m==null?0:typeof m=="string"?1:m.length,S=0<C,S=s(s({},g),{name:S?"".concat(k,"(virtual-from:").concat(g.name,")"):g.name,lowLevelIndex:g,isVirtual:S,keyTail:C,keyLength:_,extractKey:sr(m),unique:!S&&g.unique});return E.push(S),S.isPrimaryKey||a.push(S),1<_&&c(_===2?m[0]:m.slice(0,_-1),C+1,g),E.sort(function(D,A){return D.keyTail-A.keyTail}),S}t=c(r.primaryKey.keyPath,0,r.primaryKey),i[":id"]=[t];for(var p=0,v=r.indexes;p<v.length;p++){var b=v[p];c(b.keyPath,0,b)}function x(m){var C,g=m.query.index;return g.isVirtual?s(s({},m),{query:{index:g.lowLevelIndex,range:(C=m.query.range,g=g.keyTail,{type:C.type===1?2:C.type,lower:On(C.lower,C.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:On(C.upper,C.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0})}}):m}return s(s({},n),{schema:s(s({},r),{primaryKey:t,indexes:a,getIndexByKeyPath:function(m){return(m=i[en(m)])&&m[0]}}),count:function(m){return n.count(x(m))},query:function(m){return n.query(x(m))},openCursor:function(m){var C=m.query.index,g=C.keyTail,k=C.isVirtual,E=C.keyLength;return k?n.openCursor(x(m)).then(function(S){return S&&_(S)}):n.openCursor(m);function _(S){return Object.create(S,{continue:{value:function(D){D!=null?S.continue(On(D,m.reverse?e.MAX_KEY:e.MIN_KEY,g)):m.unique?S.continue(S.key.slice(0,E).concat(m.reverse?e.MIN_KEY:e.MAX_KEY,g)):S.continue()}},continuePrimaryKey:{value:function(D,A){S.continuePrimaryKey(On(D,e.MAX_KEY,g),A)}},primaryKey:{get:function(){return S.primaryKey}},key:{get:function(){var D=S.key;return E===1?D[0]:D.slice(0,E)}},value:{get:function(){return S.value}}})}}})}})}};function _r(e,t,n,r){return n=n||{},r=r||"",h(e).forEach(function(i){var a,c,p;T(t,i)?(a=e[i],c=t[i],typeof a=="object"&&typeof c=="object"&&a&&c?(p=Fn(a))!==Fn(c)?n[r+i]=t[i]:p==="Object"?_r(a,c,n,r+i+"."):a!==c&&(n[r+i]=t[i]):a!==c&&(n[r+i]=t[i])):n[r+i]=void 0}),h(t).forEach(function(i){T(e,i)||(n[r+i]=t[i])}),n}function wr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var uo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return s(s({},n),{mutate:function(i){var a=X.trans,c=a.table(t).hook,p=c.deleting,v=c.creating,b=c.updating;switch(i.type){case"add":if(v.fire===ge)break;return a._promise("readwrite",function(){return x(i)},!0);case"put":if(v.fire===ge&&b.fire===ge)break;return a._promise("readwrite",function(){return x(i)},!0);case"delete":if(p.fire===ge)break;return a._promise("readwrite",function(){return x(i)},!0);case"deleteRange":if(p.fire===ge)break;return a._promise("readwrite",function(){return function m(C,g,k){return n.query({trans:C,values:!1,query:{index:r,range:g},limit:k}).then(function(E){var _=E.result;return x({type:"delete",keys:_,trans:C}).then(function(S){return 0<S.numFailures?Promise.reject(S.failures[0]):_.length<k?{failures:[],numFailures:0,lastResult:void 0}:m(C,s(s({},g),{lower:_[_.length-1],lowerOpen:!0}),k)})})}(i.trans,i.range,1e4)},!0)}return n.mutate(i);function x(m){var C,g,k,E=X.trans,_=m.keys||wr(r,m);if(!_)throw new Error("Keys missing");return(m=m.type==="add"||m.type==="put"?s(s({},m),{keys:_}):s({},m)).type!=="delete"&&(m.values=f([],m.values)),m.keys&&(m.keys=f([],m.keys)),C=n,k=_,((g=m).type==="add"?Promise.resolve([]):C.getMany({trans:g.trans,keys:k,cache:"immutable"})).then(function(S){var D=_.map(function(A,K){var j,B,M,R=S[K],L={onerror:null,onsuccess:null};return m.type==="delete"?p.fire.call(L,A,R,E):m.type==="add"||R===void 0?(j=v.fire.call(L,A,m.values[K],E),A==null&&j!=null&&(m.keys[K]=A=j,r.outbound||te(m.values[K],r.keyPath,A))):(j=_r(R,m.values[K]),(B=b.fire.call(L,j,A,R,E))&&(M=m.values[K],Object.keys(B).forEach(function(q){T(M,q)?M[q]=B[q]:te(M,q,B[q])}))),L});return n.mutate(m).then(function(A){for(var K=A.failures,j=A.results,B=A.numFailures,A=A.lastResult,M=0;M<_.length;++M){var R=(j||_)[M],L=D[M];R==null?L.onerror&&L.onerror(K[M]):L.onsuccess&&L.onsuccess(m.type==="put"&&S[M]?m.values[M]:R)}return{failures:K,results:j,numFailures:B,lastResult:A}}).catch(function(A){return D.forEach(function(K){return K.onerror&&K.onerror(A)}),Promise.reject(A)})})}}})}})}};function oi(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)he(t.keys[i],e[a])===0&&(r.push(n?vt(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var lo={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return s(s({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=oi(r.keys,r.trans._cache,r.cache==="clone");return i?Y.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?vt(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function ai(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function si(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var co={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new je(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(r,i,a){if(X.subscr&&i!=="readonly")throw new ee.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(X.querier));return e.transaction(r,i,a)},table:function(r){var i=e.table(r),a=i.schema,c=a.primaryKey,m=a.indexes,p=c.extractKey,v=c.outbound,b=c.autoIncrement&&m.filter(function(g){return g.compound&&g.keyPath.includes(c.keyPath)}),x=s(s({},i),{mutate:function(g){function k(q){return q="idb://".concat(t,"/").concat(r,"/").concat(q),A[q]||(A[q]=new je)}var E,_,S,D=g.trans,A=g.mutatedParts||(g.mutatedParts={}),K=k(""),j=k(":dels"),B=g.type,L=g.type==="deleteRange"?[g.range]:g.type==="delete"?[g.keys]:g.values.length<50?[wr(c,g).filter(function(q){return q}),g.values]:[],M=L[0],R=L[1],L=g.trans._cache;return y(M)?(K.addKeys(M),(L=B==="delete"||M.length===R.length?oi(M,L):null)||j.addKeys(M),(L||R)&&(E=k,_=L,S=R,a.indexes.forEach(function(q){var H=E(q.name||"");function ue(fe){return fe!=null?q.extractKey(fe):null}function ce(fe){return q.multiEntry&&y(fe)?fe.forEach(function(Be){return H.addKey(Be)}):H.addKey(fe)}(_||S).forEach(function(fe,Me){var oe=_&&ue(_[Me]),Me=S&&ue(S[Me]);he(oe,Me)!==0&&(oe!=null&&ce(oe),Me!=null&&ce(Me))})}))):M?(R={from:(R=M.lower)!==null&&R!==void 0?R:e.MIN_KEY,to:(R=M.upper)!==null&&R!==void 0?R:e.MAX_KEY},j.add(R),K.add(R)):(K.add(n),j.add(n),a.indexes.forEach(function(q){return k(q.name).add(n)})),i.mutate(g).then(function(q){return!M||g.type!=="add"&&g.type!=="put"||(K.addKeys(q.results),b&&b.forEach(function(H){for(var ue=g.values.map(function(oe){return H.extractKey(oe)}),ce=H.keyPath.findIndex(function(oe){return oe===c.keyPath}),fe=0,Be=q.results.length;fe<Be;++fe)ue[fe][ce]=q.results[fe];k(H.name).addKeys(ue)})),D.mutatedParts=In(D.mutatedParts||{},A),q})}}),m=function(k){var E=k.query,k=E.index,E=E.range;return[k,new je((k=E.lower)!==null&&k!==void 0?k:e.MIN_KEY,(E=E.upper)!==null&&E!==void 0?E:e.MAX_KEY)]},C={get:function(g){return[c,new je(g.key)]},getMany:function(g){return[c,new je().addKeys(g.keys)]},count:m,query:m,openCursor:m};return h(C).forEach(function(g){x[g]=function(k){var E=X.subscr,_=!!E,S=ai(X,i)&&si(g,k)?k.obsSet={}:E;if(_){var D=function(R){return R="idb://".concat(t,"/").concat(r,"/").concat(R),S[R]||(S[R]=new je)},A=D(""),K=D(":dels"),E=C[g](k),_=E[0],E=E[1];if((g==="query"&&_.isPrimaryKey&&!k.values?K:D(_.name||"")).add(E),!_.isPrimaryKey){if(g!=="count"){var j=g==="query"&&v&&k.values&&i.query(s(s({},k),{values:!1}));return i[g].apply(this,arguments).then(function(R){if(g==="query"){if(v&&k.values)return j.then(function(ue){return ue=ue.result,A.addKeys(ue),R});var L=k.values?R.result.map(p):R.result;(k.values?A:K).addKeys(L)}else if(g==="openCursor"){var q=R,H=k.values;return q&&Object.create(q,{key:{get:function(){return K.addKey(q.primaryKey),q.key}},primaryKey:{get:function(){var ue=q.primaryKey;return K.addKey(ue),ue}},value:{get:function(){return H&&A.addKey(q.primaryKey),q.value}}})}return R})}K.add(n)}}return i[g].apply(this,arguments)}}),x}})}};function ui(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===r?null:(t=s({},t),y(t.keys)&&(t.keys=t.keys.filter(function(i,a){return!(a in n.failures)})),"values"in t&&y(t.values)&&(t.values=t.values.filter(function(i,a){return!(a in n.failures)})),t)}function kr(e,t){return n=e,((r=t).lower===void 0||(r.lowerOpen?0<he(n,r.lower):0<=he(n,r.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?he(e,t.upper)<0:he(e,t.upper)<=0));var n,r}function li(e,t,C,r,i,a){if(!C||C.length===0)return e;var c=t.query.index,p=c.multiEntry,v=t.query.range,b=r.schema.primaryKey.extractKey,x=c.extractKey,m=(c.lowLevelIndex||c).extractKey,C=C.reduce(function(g,k){var E=g,_=[];if(k.type==="add"||k.type==="put")for(var S=new je,D=k.values.length-1;0<=D;--D){var A,K=k.values[D],j=b(K);S.hasKey(j)||(A=x(K),(p&&y(A)?A.some(function(q){return kr(q,v)}):kr(A,v))&&(S.addKey(j),_.push(K)))}switch(k.type){case"add":var B=new je().addKeys(t.values?g.map(function(H){return b(H)}):g),E=g.concat(t.values?_.filter(function(H){return H=b(H),!B.hasKey(H)&&(B.addKey(H),!0)}):_.map(function(H){return b(H)}).filter(function(H){return!B.hasKey(H)&&(B.addKey(H),!0)}));break;case"put":var M=new je().addKeys(k.values.map(function(H){return b(H)}));E=g.filter(function(H){return!M.hasKey(t.values?b(H):H)}).concat(t.values?_:_.map(function(H){return b(H)}));break;case"delete":var R=new je().addKeys(k.keys);E=g.filter(function(H){return!R.hasKey(t.values?b(H):H)});break;case"deleteRange":var L=k.range;E=g.filter(function(H){return!kr(b(H),L)})}return E},e);return C===e?e:(C.sort(function(g,k){return he(m(g),m(k))||he(b(g),b(k))}),t.limit&&t.limit<1/0&&(C.length>t.limit?C.length=t.limit:e.length===t.limit&&C.length<t.limit&&(i.dirty=!0)),a?Object.freeze(C):C)}function ci(e,t){return he(e.lower,t.lower)===0&&he(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function fo(e,t){return function(n,r,i,a){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=he(n,r))===0){if(i&&a)return 0;if(i)return 1;if(a)return-1}return r}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,r,i,a){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=he(n,r))===0){if(i&&a)return 0;if(i)return-1;if(a)return 1}return r}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function ho(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var i,a;e.subscribers.delete(n),e.subscribers.size===0&&(i=e,a=t,setTimeout(function(){i.subscribers.size===0&&yt(a,i)},3e3))})}var po={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return s(s({},e),{transaction:function(n,r,i){var a,c,p=e.transaction(n,r,i);return r==="readwrite"&&(c=(a=new AbortController).signal,i=function(v){return function(){if(a.abort(),r==="readwrite"){for(var b=new Set,x=0,m=n;x<m.length;x++){var C=m[x],g=Tt["idb://".concat(t,"/").concat(C)];if(g){var k=e.table(C),E=g.optimisticOps.filter(function(H){return H.trans===p});if(p._explicit&&v&&p.mutatedParts)for(var _=0,S=Object.values(g.queries.query);_<S.length;_++)for(var D=0,A=(B=S[_]).slice();D<A.length;D++)mr((M=A[D]).obsSet,p.mutatedParts)&&(yt(B,M),M.subscribers.forEach(function(H){return b.add(H)}));else if(0<E.length){g.optimisticOps=g.optimisticOps.filter(function(H){return H.trans!==p});for(var K=0,j=Object.values(g.queries.query);K<j.length;K++)for(var B,M,R,L=0,q=(B=j[K]).slice();L<q.length;L++)(M=q[L]).res!=null&&p.mutatedParts&&(v&&!M.dirty?(R=Object.isFrozen(M.res),R=li(M.res,M.req,E,k,M,R),M.dirty?(yt(B,M),M.subscribers.forEach(function(H){return b.add(H)})):R!==M.res&&(M.res=R,M.promise=Y.resolve({result:R}))):(M.dirty&&yt(B,M),M.subscribers.forEach(function(H){return b.add(H)})))}}}b.forEach(function(H){return H()})}}},p.addEventListener("abort",i(!1),{signal:c}),p.addEventListener("error",i(!1),{signal:c}),p.addEventListener("complete",i(!0),{signal:c})),p},table:function(n){var r=e.table(n),i=r.schema.primaryKey;return s(s({},r),{mutate:function(a){var c=X.trans;if(i.outbound||c.db._options.cache==="disabled"||c.explicit||c.idbtrans.mode!=="readwrite")return r.mutate(a);var p=Tt["idb://".concat(t,"/").concat(n)];return p?(c=r.mutate(a),a.type!=="add"&&a.type!=="put"||!(50<=a.values.length||wr(i,a).some(function(v){return v==null}))?(p.optimisticOps.push(a),a.mutatedParts&&Sn(a.mutatedParts),c.then(function(v){0<v.numFailures&&(yt(p.optimisticOps,a),(v=ui(0,a,v))&&p.optimisticOps.push(v),a.mutatedParts&&Sn(a.mutatedParts))}),c.catch(function(){yt(p.optimisticOps,a),a.mutatedParts&&Sn(a.mutatedParts)})):c.then(function(v){var b=ui(0,s(s({},a),{values:a.values.map(function(x,m){var C;return v.failures[m]?x:(x=(C=i.keyPath)!==null&&C!==void 0&&C.includes(".")?vt(x):s({},x),te(x,i.keyPath,v.results[m]),x)})}),v);p.optimisticOps.push(b),queueMicrotask(function(){return a.mutatedParts&&Sn(a.mutatedParts)})}),c):r.mutate(a)},query:function(a){if(!ai(X,r)||!si("query",a))return r.query(a);var c=((b=X.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",m=X,p=m.requery,v=m.signal,b=function(k,E,_,S){var D=Tt["idb://".concat(k,"/").concat(E)];if(!D)return[];if(!(E=D.queries[_]))return[null,!1,D,null];var A=E[(S.query?S.query.index.name:null)||""];if(!A)return[null,!1,D,null];switch(_){case"query":var K=A.find(function(j){return j.req.limit===S.limit&&j.req.values===S.values&&ci(j.req.query.range,S.query.range)});return K?[K,!0,D,A]:[A.find(function(j){return("limit"in j.req?j.req.limit:1/0)>=S.limit&&(!S.values||j.req.values)&&fo(j.req.query.range,S.query.range)}),!1,D,A];case"count":return K=A.find(function(j){return ci(j.req.query.range,S.query.range)}),[K,!!K,D,A]}}(t,n,"query",a),x=b[0],m=b[1],C=b[2],g=b[3];return x&&m?x.obsSet=a.obsSet:(m=r.query(a).then(function(k){var E=k.result;if(x&&(x.res=E),c){for(var _=0,S=E.length;_<S;++_)Object.freeze(E[_]);Object.freeze(E)}else k.result=vt(E);return k}).catch(function(k){return g&&x&&yt(g,x),Promise.reject(k)}),x={obsSet:a.obsSet,promise:m,subscribers:new Set,type:"query",req:a,dirty:!1},g?g.push(x):(g=[x],(C=C||(Tt["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[a.query.index.name||""]=g)),ho(x,g,p,v),x.promise.then(function(k){return{result:li(k.result,a,C==null?void 0:C.optimisticOps,r,x,c)}})}})}})}};function Pn(e,t){return new Proxy(e,{get:function(n,r,i){return r==="db"?t:Reflect.get(n,r,i)}})}var Je=(Se.prototype.version=function(e){if(isNaN(e)||e<.1)throw new ee.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(no),n.stores({}),this._state.autoSchema=!1,n)},Se.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||X.letThrough||this._vip)?e():new Y(function(n,r){if(t._state.openComplete)return r(new ee.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new ee.DatabaseClosed);t.open().catch(ge)}t._state.dbReadyPromise.then(n,r)}).then(e)},Se.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:r??10,name:i}),e.sort(function(a,c){return a.level-c.level}),this},Se.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(i){return r?i.create!==r:!!n&&i.name!==n})),this},Se.prototype.open=function(){var e=this;return xt(et,function(){return ao(e)})},Se.prototype._close=function(){var e=this._state,t=Nt.indexOf(this);if(0<=t&&Nt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Y(function(n){e.dbReadyResolve=n}),e.openCanceller=new Y(function(n,r){e.cancelOpen=r}))},Se.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new ee.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new ee.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},Se.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",r=this._state;return new Y(function(i,a){function c(){t.close(e);var p=t._deps.indexedDB.deleteDatabase(t.name);p.onsuccess=ke(function(){var v,b,x;v=t._deps,b=t.name,x=v.indexedDB,v=v.IDBKeyRange,dr(x)||b===mn||fr(x,v).delete(b).catch(ge),i()}),p.onerror=We(a),p.onblocked=t._fireOnBlocked}if(n)throw new ee.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(c):c()})},Se.prototype.backendDB=function(){return this.idbdb},Se.prototype.isOpen=function(){return this.idbdb!==null},Se.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Se.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Se.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Se.prototype,"tables",{get:function(){var e=this;return h(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Se.prototype.transaction=function(){var e=(function(t,n,r){var i=arguments.length;if(i<2)throw new ee.InvalidArgument("Too few arguments");for(var a=new Array(i-1);--i;)a[i-1]=arguments[i];return r=a.pop(),[t,Ke(a),r]}).apply(this,arguments);return this._transaction.apply(this,e)},Se.prototype._transaction=function(e,t,n){var r=this,i=X.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);var a,c,p=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(c=t.map(function(b){if(b=b instanceof r.Table?b.name:b,typeof b!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return b}),e=="r"||e===$n)a=$n;else{if(e!="rw"&&e!=er)throw new ee.InvalidArgument("Invalid transaction mode: "+e);a=er}if(i){if(i.mode===$n&&a===er){if(!p)throw new ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&c.forEach(function(b){if(i&&i.storeNames.indexOf(b)===-1){if(!p)throw new ee.SubTransaction("Table "+b+" not included in parent transaction.");i=null}}),p&&i&&!i.active&&(i=null)}}catch(b){return i?i._promise(null,function(x,m){m(b)}):Ie(b)}var v=(function b(x,m,C,g,k){return Y.resolve().then(function(){var E=X.transless||X,_=x._createTransaction(m,C,x._dbSchema,g);if(_.explicit=!0,E={trans:_,transless:E},g)_.idbtrans=g.idbtrans;else try{_.create(),_.idbtrans._explicit=!0,x._state.PR1398_maxLoop=3}catch(A){return A.name===Vn.InvalidState&&x.isOpen()&&0<--x._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),x.close({disableAutoOpen:!1}),x.open().then(function(){return b(x,m,C,null,k)})):Ie(A)}var S,D=Un(k);return D&&Mt(),E=Y.follow(function(){var A;(S=k.call(_,_))&&(D?(A=nt.bind(null,null),S.then(A,A)):typeof S.next=="function"&&typeof S.throw=="function"&&(S=br(S)))},E),(S&&typeof S.then=="function"?Y.resolve(S).then(function(A){return _.active?A:Ie(new ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):E.then(function(){return S})).then(function(A){return g&&_._resolve(),_._completion.then(function(){return A})}).catch(function(A){return _._reject(A),Ie(A)})})}).bind(null,this,a,c,i,n);return i?i._promise(a,v,"lock"):X.trans?xt(X.transless,function(){return r._whenReady(v)}):this._whenReady(v)},Se.prototype.table=function(e){if(!T(this._allTables,e))throw new ee.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Se);function Se(e,t){var n=this;this._middlewares={},this.verno=0;var r=Se.dependencies;this._options=t=s({addons:Se.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,a,c,p,v,b={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ge,dbReadyPromise:null,cancelOpen:ge,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};b.dbReadyPromise=new Y(function(m){b.dbReadyResolve=m}),b.openCanceller=new Y(function(m,C){b.cancelOpen=C}),this._state=b,this.name=e,this.on=Gt(this,"populate","blocked","versionchange","close",{ready:[Yn,ge]}),this.on.ready.subscribe=G(this.on.ready.subscribe,function(m){return function(C,g){Se.vip(function(){var k,E=n._state;E.openComplete?(E.dbOpenError||Y.resolve().then(C),g&&m(C)):E.onReadyBeingFired?(E.onReadyBeingFired.push(C),g&&m(C)):(m(C),k=n,g||m(function _(){k.on.ready.unsubscribe(C),k.on.ready.unsubscribe(_)}))})}}),this.Collection=(i=this,Qt(Qi.prototype,function(S,_){this.db=i;var g=Lr,k=null;if(_)try{g=_()}catch(D){k=D}var E=S._ctx,_=E.table,S=_.hook.reading.fire;this._ctx={table:_,index:E.index,isPrimKey:!E.index||_.schema.primKey.keyPath&&E.index===_.schema.primKey.name,range:g,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:k,or:E.or,valueMapper:S!==Vt?S:null}})),this.Table=(a=this,Qt(Hr.prototype,function(m,C,g){this.db=a,this._tx=g,this.name=m,this.schema=C,this.hook=a._allTables[m]?a._allTables[m].hook:Gt(null,{creating:[Fi,ge],reading:[Bi,Vt],updating:[Ui,ge],deleting:[Li,ge]})})),this.Transaction=(c=this,Qt(Zi.prototype,function(m,C,g,k,E){var _=this;this.db=c,this.mode=m,this.storeNames=C,this.schema=g,this.chromeTransactionDurability=k,this.idbtrans=null,this.on=Gt(this,"complete","error","abort"),this.parent=E||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Y(function(S,D){_._resolve=S,_._reject=D}),this._completion.then(function(){_.active=!1,_.on.complete.fire()},function(S){var D=_.active;return _.active=!1,_.on.error.fire(S),_.parent?_.parent._reject(S):D&&_.idbtrans&&_.idbtrans.abort(),Ie(S)})})),this.Version=(p=this,Qt(oo.prototype,function(m){this.db=p,this._cfg={version:m,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(v=this,Qt(Xr.prototype,function(m,C,g){if(this.db=v,this._ctx={table:m,index:C===":id"?null:C,or:g},this._cmp=this._ascending=he,this._descending=function(k,E){return he(E,k)},this._max=function(k,E){return 0<he(k,E)?k:E},this._min=function(k,E){return he(k,E)<0?k:E},this._IDBKeyRange=v._deps.IDBKeyRange,!this._IDBKeyRange)throw new ee.MissingAPI})),this.on("versionchange",function(m){0<m.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(m){!m.newVersion||m.newVersion<m.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(m.oldVersion/10))}),this._maxKey=$t(t.IDBKeyRange),this._createTransaction=function(m,C,g,k){return new n.Transaction(m,C,g,n._options.chromeTransactionDurability,k)},this._fireOnBlocked=function(m){n.on("blocked").fire(m),Nt.filter(function(C){return C.name===n.name&&C!==n&&!C._state.vcFired}).map(function(C){return C.on("versionchange").fire(m)})},this.use(lo),this.use(po),this.use(co),this.use(so),this.use(uo);var x=new Proxy(this,{get:function(m,C,g){if(C==="_vip")return!0;if(C==="table")return function(E){return Pn(n.table(E),x)};var k=Reflect.get(m,C,g);return k instanceof Hr?Pn(k,x):C==="tables"?k.map(function(E){return Pn(E,x)}):C==="_createTransaction"?function(){return Pn(k.apply(this,arguments),x)}:k}});this.vip=x,r.forEach(function(m){return m(n)})}var Dn,Le=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",mo=(xr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},xr.prototype[Le]=function(){return this},xr);function xr(e){this._subscribe=e}try{Dn={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Dn={indexedDB:null,IDBKeyRange:null}}function fi(e){var t,n=!1,r=new mo(function(i){var a=Un(e),c,p=!1,v={},b={},x={get closed(){return p},unsubscribe:function(){p||(p=!0,c&&c.abort(),m&&ot.storagemutated.unsubscribe(g))}};i.start&&i.start(x);var m=!1,C=function(){return Zn(k)},g=function(E){In(v,E),mr(b,v)&&C()},k=function(){var E,_,S;!p&&Dn.indexedDB&&(v={},E={},c&&c.abort(),c=new AbortController,S=function(D){var A=Kt();try{a&&Mt();var K=tt(e,D);return K=a?K.finally(nt):K}finally{A&&jt()}}(_={subscr:E,signal:c.signal,requery:C,querier:e,trans:null}),Promise.resolve(S).then(function(D){n=!0,t=D,p||_.signal.aborted||(v={},function(A){for(var K in A)if(T(A,K))return;return 1}(b=E)||m||(ot(Zt,g),m=!0),Zn(function(){return!p&&i.next&&i.next(D)}))},function(D){n=!1,["DatabaseClosedError","AbortError"].includes(D==null?void 0:D.name)||p||Zn(function(){p||i.error&&i.error(D)})}))};return setTimeout(C,0),x});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var It=Je;function Er(e){var t=at;try{at=!0,ot.storagemutated.fire(e),gr(e,!0)}finally{at=t}}w(It,s(s({},an),{delete:function(e){return new It(e,{addons:[]}).delete()},exists:function(e){return new It(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=It.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(dr(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==mn})}):fr(n,t).toCollection().primaryKeys()).then(e)}catch{return Ie(new ee.MissingAPI)}var t,n},defineClass:function(){return function(e){P(this,e)}},ignoreTransaction:function(e){return X.trans?xt(X.transless,e):e()},vip:hr,async:function(e){return function(){try{var t=br(e.apply(this,arguments));return t&&typeof t.then=="function"?t:Y.resolve(t)}catch(n){return Ie(n)}}},spawn:function(e,t,n){try{var r=br(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:Y.resolve(r)}catch(i){return Ie(i)}},currentTransaction:{get:function(){return X.trans||null}},waitFor:function(e,t){return t=Y.resolve(typeof e=="function"?It.ignoreTransaction(e):e).timeout(t||6e4),X.trans?X.trans.waitFor(t):t},Promise:Y,debug:{get:function(){return He},set:function(e){jr(e)}},derive:ae,extend:P,props:w,override:G,Events:Gt,on:ot,liveQuery:fi,extendObservabilitySet:In,getByKeyPath:W,setByKeyPath:te,delByKeyPath:function(e,t){typeof t=="string"?te(e,t,void 0):"length"in t&&[].map.call(t,function(n){te(e,n,void 0)})},shallowClone:se,deepClone:vt,getObjectDiff:_r,cmp:he,asap:de,minKey:-1/0,addons:[],connections:Nt,errnames:Vn,dependencies:Dn,cache:Tt,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),It.maxKey=$t(It.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ot(Zt,function(e){at||(e=new CustomEvent(ir,{detail:e}),at=!0,dispatchEvent(e),at=!1)}),addEventListener(ir,function(e){e=e.detail,at||Er(e)}));var Bt,at=!1,di=function(){};return typeof BroadcastChannel<"u"&&((di=function(){(Bt=new BroadcastChannel(ir)).onmessage=function(e){return e.data&&Er(e.data)}})(),typeof Bt.unref=="function"&&Bt.unref(),ot(Zt,function(e){at||Bt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Je.disableBfCache&&e.persisted){He&&console.debug("Dexie: handling persisted pagehide"),Bt!=null&&Bt.close();for(var t=0,n=Nt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Je.disableBfCache&&e.persisted&&(He&&console.debug("Dexie: handling persisted pageshow"),di(),Er({all:new je(-1/0,[[]])}))})),Y.rejectionMapper=function(e,t){return!e||e instanceof Dt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Kr[e.name]?e:(t=new Kr[e.name](t||e.message,e),"stack"in e&&$(t,"stack",{get:function(){return this.inner.stack}}),t)},jr(He),s(Je,Object.freeze({__proto__:null,Dexie:Je,liveQuery:fi,Entity:Ur,cmp:he,PropModification:Xt,replacePrefix:function(e,t){return new Xt({replacePrefix:[e,t]})},add:function(e){return new Xt({add:e})},remove:function(e){return new Xt({remove:e})},default:Je,RangeSet:je,mergeRanges:nn,rangesOverlap:ti}),{default:Je}),Je})})(Ki);var Co=Ki.exports;const Ir=Eo(Co),yi=Symbol.for("Dexie"),Bn=globalThis[yi]||(globalThis[yi]=Ir);if(Ir.semVer!==Bn.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ir.semVer} and ${Bn.semVer}`);const{liveQuery:xa,mergeRanges:Ea,rangesOverlap:Ca,RangeSet:Ta,cmp:Ia,Entity:Sa,PropModification:Oa,replacePrefix:Pa,add:Da,remove:Aa}=Bn;class To extends Bn{constructor(){super("MeditationGameDB");hi(this,"sessions");this.version(1).stores({sessions:"++id, levelId, timestamp"})}}const Fe=new To,Nn=[{id:"L1",name:"Start here",minDuration:Ue.ONE_MINUTE,maxDuration:Ue.FIVE_MINUTES,description:"Notice distraction without judgment.",instructions:["Sit comfortably and bring your attention to the breath","Feel the air move through your nose as you breathe","Tap when you notice the mind has wandered","Every tap is a sign of awareness â it means you're learning","You're not here to be perfect. Just to begin."],unlockCriteria:async d=>(await Fe.sessions.where("levelId").equals("L1").toArray()).length>=2},{id:"L2",name:"Keep improving",minDuration:Ue.FIVE_MINUTES,maxDuration:Ue.FIFTEEN_MINUTES,description:"Gently return the mind to focus.",instructions:["Bring your attention to the feeling of the breath","Notice when thoughts pull you away, and tap when they do","Gently return your focus to the breath, again and again","Let the practice be steady, not strict","You're building the habit of coming back."],unlockCriteria:async d=>{const o=await Fe.sessions.where("levelId").equals("L1").toArray();if(o.length<3)return!1;const l=o.reduce((u,h)=>u+h.tapCount,0)/o.length,s=await Fe.sessions.where("levelId").equals("L2").toArray();return s.length<3?!1:s.reduce((u,h)=>u+h.tapCount,0)/s.length<l*.9}},{id:"L3",name:"Focus power",minDuration:Ue.TEN_MINUTES,maxDuration:Ue.THIRTY_MINUTES,description:"Feel a sense of continuity and confidence.",instructions:["Rest your mind on the breath like a steady beam of light","If the mind wanders, tap to acknowledge, then return","Let distractions come and go â stay grounded in breath","You're developing continuity â not by force, but by ease","Allow the mind to settle. You're ready for this."],unlockCriteria:async d=>(await Fe.sessions.where("levelId").equals("L3").toArray()).filter(s=>s.tapCount<=3).length>=2}];function gi(d,o,l){const s=d.slice();return s[9]=o[l],s}function bi(d){let o,l="Exit Meditation",s,f,u,h;return{c(){o=Z("button"),o.textContent=l,this.h()},l(y){o=J(y,"BUTTON",{class:!0,"data-svelte-h":!0}),De(o)!=="svelte-t4g94n"&&(o.textContent=l),this.h()},h(){F(o,"class","absolute top-4 left-1/2 transform -translate-x-1/2 btn variant-filled px-4 py-2")},m(y,P){ne(y,o,P),f=!0,u||(h=Ze(o,"click",d[4]),u=!0)},p:Ae,i(y){f||(y&&Ve(()=>{f&&(s||(s=Ee(o,Ce,{},!0)),s.run(1))}),f=!0)},o(y){y&&(s||(s=Ee(o,Ce,{},!1)),s.run(0)),f=!1},d(y){y&&N(o),y&&s&&s.end(),u=!1,h()}}}function _i(d){let o,l,s=d[9]+"",f,u;return{c(){o=Z("p"),l=new _o(!1),this.h()},l(h){o=J(h,"P",{class:!0});var y=le(o);l=bo(y,!1),y.forEach(N),this.h()},h(){l.a=null,F(o,"class","text-lg max-w-sm")},m(h,y){ne(h,o,y),l.m(s,o),u=!0},p(h,y){(!u||y&4)&&s!==(s=h[9]+"")&&l.p(s)},i(h){u||(h&&Ve(()=>{u&&(f||(f=Ee(o,Ce,{},!0)),f.run(1))}),u=!0)},o(h){h&&(f||(f=Ee(o,Ce,{},!1)),f.run(0)),u=!1},d(h){h&&N(o),h&&f&&f.end()}}}function wi(d){let o,l="Start meditation countdown",s,f,u,h,y=Tr[d[1]]+"",P,I,O,T;return{c(){o=Z("button"),o.textContent=l,f=_e(),u=Z("i"),h=ve("Meditating for "),P=ve(y),this.h()},l(w){o=J(w,"BUTTON",{class:!0,"data-svelte-h":!0}),De(o)!=="svelte-71gbpm"&&(o.textContent=l),f=be(w),u=J(w,"I",{class:!0});var U=le(u);h=me(U,"Meditating for "),P=me(U,y),U.forEach(N),this.h()},h(){F(o,"class","btn variant-filled px-4 py-2 mt-4"),F(u,"class","text-sm text-gray-500")},m(w,U){ne(w,o,U),ne(w,f,U),ne(w,u,U),V(u,h),V(u,P),I=!0,O||(T=Ze(o,"click",function(){wo(d[0])&&d[0].apply(this,arguments)}),O=!0)},p(w,U){d=w,(!I||U&2)&&y!==(y=Tr[d[1]]+"")&&Ye(P,y)},i(w){I||(w&&Ve(()=>{I&&(s||(s=Ee(o,Ce,{},!0)),s.run(1))}),I=!0)},o(w){w&&(s||(s=Ee(o,Ce,{},!1)),s.run(0)),I=!1},d(w){w&&(N(o),N(f),N(u)),w&&s&&s.end(),O=!1,T()}}}function Io(d){let o,l,s,f,u=d[2]>=d[3].length&&bi(d),h=Lt(d[3].slice(0,d[2])),y=[];for(let O=0;O<h.length;O+=1)y[O]=_i(gi(d,h,O));const P=O=>xe(y[O],1,1,()=>{y[O]=null});let I=d[2]>=d[3].length&&wi(d);return{c(){o=Z("div"),u&&u.c(),l=_e();for(let O=0;O<y.length;O+=1)y[O].c();s=_e(),I&&I.c(),this.h()},l(O){o=J(O,"DIV",{class:!0});var T=le(o);u&&u.l(T),l=be(T);for(let w=0;w<y.length;w+=1)y[w].l(T);s=be(T),I&&I.l(T),T.forEach(N),this.h()},h(){F(o,"class","w-full h-full flex flex-col justify-center items-center px-6 space-y-6 text-center relative")},m(O,T){ne(O,o,T),u&&u.m(o,null),V(o,l);for(let w=0;w<y.length;w+=1)y[w]&&y[w].m(o,null);V(o,s),I&&I.m(o,null),f=!0},p(O,[T]){if(O[2]>=O[3].length?u?(u.p(O,T),T&4&&ye(u,1)):(u=bi(O),u.c(),ye(u,1),u.m(o,l)):u&&(st(),xe(u,1,1,()=>{u=null}),ut()),T&12){h=Lt(O[3].slice(0,O[2]));let w;for(w=0;w<h.length;w+=1){const U=gi(O,h,w);y[w]?(y[w].p(U,T),ye(y[w],1)):(y[w]=_i(U),y[w].c(),ye(y[w],1),y[w].m(o,s))}for(st(),w=h.length;w<y.length;w+=1)P(w);ut()}O[2]>=O[3].length?I?(I.p(O,T),T&4&&ye(I,1)):(I=wi(O),I.c(),ye(I,1),I.m(o,null)):I&&(st(),xe(I,1,1,()=>{I=null}),ut())},i(O){if(!f){ye(u);for(let T=0;T<h.length;T+=1)ye(y[T]);ye(I),f=!0}},o(O){xe(u),y=y.filter(Boolean);for(let T=0;T<y.length;T+=1)xe(y[T]);xe(I),f=!1},d(O){O&&N(o),u&&u.d(),Sr(y,O),I&&I.d()}}}function So(d,o,l){let{nextStep:s}=o,{closeModal:f}=o,{duration:u}=o,{levelId:h="L1"}=o;const y=Nn.find(w=>w.id===h),P=["1. Feel the air move through your nose as you breathe","2. <b>Tap anywhere on the screen</b> when you lose focus","3. <b>Exit meditation</b> to end early","4. Relax and have fun"],I=(y==null?void 0:y.instructions)||P;let O=0;Pi(()=>{Ge.capture("instructions_viewed",{level:h});const w=setInterval(()=>{O<I.length+1?l(2,O+=1):clearInterval(w)},1e3)});const T=()=>{Ge.capture("instructions_exit",{instructions_viewed:O,level:h}),f()};return d.$$set=w=>{"nextStep"in w&&l(0,s=w.nextStep),"closeModal"in w&&l(5,f=w.closeModal),"duration"in w&&l(1,u=w.duration),"levelId"in w&&l(6,h=w.levelId)},[s,u,O,I,T,f,h]}class Oo extends ct{constructor(o){super(),ft(this,o,So,Io,lt,{nextStep:0,closeModal:5,duration:1,levelId:6})}}const Po=d=>{const o=d%60;return(d/60>1?`${Math.floor(d/60)}:`:"")+`${o<10?"0":""}${o}`};function Do(d){let o,l,s,f,u,h;return{c(){o=jn("svg"),l=jn("circle"),s=jn("circle"),u=jn("text"),h=ve(d[1]),this.h()},l(y){o=Kn(y,"svg",{class:!0,viewBox:!0});var P=le(o);l=Kn(P,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),le(l).forEach(N),s=Kn(P,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,transform:!0}),le(s).forEach(N),u=Kn(P,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0,fill:!0});var I=le(u);h=me(I,d[1]),I.forEach(N),P.forEach(N),this.h()},h(){F(l,"cx","50"),F(l,"cy","50"),F(l,"r","40"),F(l,"stroke","gray"),F(l,"stroke-width","5"),F(l,"fill","none"),F(s,"cx","50"),F(s,"cy","50"),F(s,"r","40"),F(s,"stroke","blue"),F(s,"stroke-width","5"),F(s,"fill","none"),F(s,"stroke-dasharray","251.2"),F(s,"stroke-dashoffset",f=251.2*d[0]),F(s,"transform","rotate(-90 50 50)"),F(u,"x","50"),F(u,"y","55"),F(u,"font-size","14"),F(u,"text-anchor","middle"),F(u,"fill","black"),F(o,"class","w-32 h-32"),F(o,"viewBox","0 0 100 100")},m(y,P){ne(y,o,P),V(o,l),V(o,s),V(o,u),V(u,h)},p(y,[P]){P&1&&f!==(f=251.2*y[0])&&F(s,"stroke-dashoffset",f),P&2&&Ye(h,y[1])},i:Ae,o:Ae,d(y){y&&N(o)}}}const Ao="/sounds/gong.mp3";function Ko(d,o,l){let s,f,{duration:u}=o,{startTimestamp:h}=o;const y=Di();let P=Mn(u),I=null,O,T=new Audio(Ao);const w=mi(P,Q=>Po(Q));Rn(d,w,Q=>l(1,f=Q));const U=mi(P,Q=>Q/u);Rn(d,U,Q=>l(0,s=Q));const $=()=>{clearInterval(O),T.play(),y("complete")},ae=async Q=>{try{if(!("wakeLock"in navigator))return;Q?I=await navigator.wakeLock.request("screen"):I&&(await I.release(),I=null)}catch(re){console.error(`Wake Lock ${Q?"request":"release"} failed:`,re)}};return Pi(()=>{l(4,h=Date.now()),O=setInterval(()=>{P.update(Q=>Q>0?Q-1:($(),0))},1e3),ae(!0)}),ko(()=>{clearInterval(O),ae(!1)}),d.$$set=Q=>{"duration"in Q&&l(5,u=Q.duration),"startTimestamp"in Q&&l(4,h=Q.startTimestamp)},[s,f,w,U,h,u]}class ji extends ct{constructor(o){super(),ft(this,o,Ko,Do,lt,{duration:5,startTimestamp:4})}}function jo(d){let o,l,s,f="Your meditation starts in:",u,h,y,P,I,O="Exit Meditation",T,w,U,$;function ae(re){d[5](re)}let Q={duration:Mo};return d[0]!==void 0&&(Q.startTimestamp=d[0]),h=new ji({props:Q}),Or.push(()=>Dr(h,"startTimestamp",ae)),h.$on("complete",d[1]),{c(){o=Z("div"),l=Z("div"),s=Z("p"),s.textContent=f,u=_e(),mt(h.$$.fragment),P=_e(),I=Z("button"),I.textContent=O,this.h()},l(re){o=J(re,"DIV",{class:!0});var ie=le(o);l=J(ie,"DIV",{class:!0});var G=le(l);s=J(G,"P",{class:!0,"data-svelte-h":!0}),De(s)!=="svelte-1tp8zka"&&(s.textContent=f),u=be(G),pt(h.$$.fragment,G),G.forEach(N),P=be(ie),I=J(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),De(I)!=="svelte-hy6wnc"&&(I.textContent=O),ie.forEach(N),this.h()},h(){F(s,"class","text-lg mt-4 text-center"),F(l,"class","absolute flex flex-col items-center pointer-events-auto"),F(I,"class","absolute top-4 left-1/2 transform -translate-x-1/2 btn variant-outlined px-4 py-2 pointer-events-auto"),F(o,"class","w-full h-full flex flex-col items-center justify-center relative pointer-events-none")},m(re,ie){ne(re,o,ie),V(o,l),V(l,s),V(l,u),ht(h,l,null),V(o,P),V(o,I),w=!0,U||($=Ze(I,"click",d[2]),U=!0)},p(re,[ie]){const G={};!y&&ie&1&&(y=!0,G.startTimestamp=re[0],Pr(()=>y=!1)),h.$set(G)},i(re){w||(ye(h.$$.fragment,re),re&&Ve(()=>{w&&(T||(T=Ee(I,Ce,{},!0)),T.run(1))}),w=!0)},o(re){xe(h.$$.fragment,re),re&&(T||(T=Ee(I,Ce,{},!1)),T.run(0)),w=!1},d(re){re&&N(o),dt(h),re&&T&&T.end(),U=!1,$()}}}const Mo=10;function No(d,o,l){let{nextStep:s}=o,{closeModal:f}=o,u=0;Ge.capture("countdown_started",{level:0});const h=()=>{Ge.capture("countdown_complete",{level:0}),s()},y=()=>{Ge.capture("countdown_exit",{duration_counteddown:(Date.now()-u)/1e3,level:0}),f()};function P(I){u=I,l(0,u)}return d.$$set=I=>{"nextStep"in I&&l(3,s=I.nextStep),"closeModal"in I&&l(4,f=I.closeModal)},[u,h,y,s,f,P]}class Ro extends ct{constructor(o){super(),ft(this,o,No,jo,lt,{nextStep:3,closeModal:4})}}function qo(d){let o,l;return{c(){o=Z("br"),l=Z("br")},l(s){o=J(s,"BR",{}),l=J(s,"BR",{})},m(s,f){ne(s,o,f),ne(s,l,f)},p:Ae,d(s){s&&(N(o),N(l))}}}function Bo(d){let o,l,s;return{c(){o=Z("i"),l=ve(d[2]),s=ve(" distraction"),this.h()},l(f){o=J(f,"I",{class:!0});var u=le(o);l=me(u,d[2]),s=me(u," distraction"),u.forEach(N),this.h()},h(){F(o,"class","text-sm text-gray-500")},m(f,u){ne(f,o,u),V(o,l),V(o,s)},p(f,u){u&4&&Ye(l,f[2])},d(f){f&&N(o)}}}function Fo(d){let o,l,s;return{c(){o=Z("i"),l=ve(d[2]),s=ve(" distractions"),this.h()},l(f){o=J(f,"I",{class:!0});var u=le(o);l=me(u,d[2]),s=me(u," distractions"),u.forEach(N),this.h()},h(){F(o,"class","text-sm text-gray-500")},m(f,u){ne(f,o,u),V(o,l),V(o,s)},p(f,u){u&4&&Ye(l,f[2])},d(f){f&&N(o)}}}function ki(d){let o;return{c(){o=Z("div"),this.h()},l(l){o=J(l,"DIV",{class:!0,style:!0}),le(o).forEach(N),this.h()},h(){F(o,"class","ripple svelte-1wv6db6"),Ft(o,"top",d[3].y+"px"),Ft(o,"left",d[3].x+"px")},m(l,s){ne(l,o,s)},p(l,s){s&8&&Ft(o,"top",l[3].y+"px"),s&8&&Ft(o,"left",l[3].x+"px")},d(l){l&&N(o)}}}function Lo(d){let o,l,s,f,u,h,y="Tap anywhere on the screen to record your distractions",P,I,O,T,w,U="Exit Meditation",$,ae,Q,re;function ie(se){d[10](se)}let G={duration:d[0]};d[1]!==void 0&&(G.startTimestamp=d[1]),s=new ji({props:G}),Or.push(()=>Dr(s,"startTimestamp",ie)),s.$on("complete",d[8]);function z(se,Te){return se[2]>1||se[2]==0?Fo:se[2]==1?Bo:qo}let de=z(d),W=de(d),te=d[3]&&ki(d);return{c(){o=Z("div"),l=Z("div"),mt(s.$$.fragment),u=_e(),h=Z("p"),h.textContent=y,P=_e(),W.c(),I=_e(),O=Z("button"),te&&te.c(),T=_e(),w=Z("button"),w.textContent=U,this.h()},l(se){o=J(se,"DIV",{class:!0});var Te=le(o);l=J(Te,"DIV",{class:!0});var Ke=le(l);pt(s.$$.fragment,Ke),u=be(Ke),h=J(Ke,"P",{class:!0,"data-svelte-h":!0}),De(h)!=="svelte-1uyhl39"&&(h.textContent=y),P=be(Ke),W.l(Ke),Ke.forEach(N),I=be(Te),O=J(Te,"BUTTON",{class:!0});var $e=le(O);te&&te.l($e),$e.forEach(N),T=be(Te),w=J(Te,"BUTTON",{class:!0,"data-svelte-h":!0}),De(w)!=="svelte-hy6wnc"&&(w.textContent=U),Te.forEach(N),this.h()},h(){F(h,"class","text-lg mt-4 text-center"),F(l,"class","absolute flex flex-col items-center pointer-events-auto p-6"),F(O,"class","absolute inset-0 w-full h-full bg-transparent pointer-events-auto relative overflow-hidden"),F(w,"class","absolute top-4 left-1/2 transform -translate-x-1/2 btn variant-outlined px-4 py-2 pointer-events-auto"),F(o,"class","w-full h-full flex flex-col items-center justify-center relative pointer-events-none")},m(se,Te){ne(se,o,Te),V(o,l),ht(s,l,null),V(l,u),V(l,h),V(l,P),W.m(l,null),V(o,I),V(o,O),te&&te.m(O,null),V(o,T),V(o,w),ae=!0,Q||(re=[Ze(O,"click",d[6]),Ze(w,"click",d[7])],Q=!0)},p(se,[Te]){const Ke={};Te&1&&(Ke.duration=se[0]),!f&&Te&2&&(f=!0,Ke.startTimestamp=se[1],Pr(()=>f=!1)),s.$set(Ke),de===(de=z(se))&&W?W.p(se,Te):(W.d(1),W=de(se),W&&(W.c(),W.m(l,null))),se[3]?te?te.p(se,Te):(te=ki(se),te.c(),te.m(O,null)):te&&(te.d(1),te=null)},i(se){ae||(ye(s.$$.fragment,se),se&&Ve(()=>{ae&&($||($=Ee(w,Ce,{},!0)),$.run(1))}),ae=!0)},o(se){xe(s.$$.fragment,se),se&&($||($=Ee(w,Ce,{},!1)),$.run(0)),ae=!1},d(se){se&&N(o),dt(s),W.d(),te&&te.d(),se&&$&&$.end(),Q=!1,Ai(re)}}}function Uo(d,o,l){let s,f,{nextStep:u}=o,{duration:h}=o;const y=Di();let P=0;const I=Mn(0);Rn(d,I,Q=>l(2,s=Q));const O=Mn([]),T=Mn(null);Rn(d,T,Q=>l(3,f=Q));const w=Q=>{const re=(Date.now()-P)/1e3;I.update(W=>W+1),O.update(W=>[...W,re]),console.log(`Click ${Ot(I)} recorded at ${re} seconds`),Ge.capture("game_tap",{timestamp:re,total_taps:Ot(I),level:0,button:"distracted"});const{clientX:ie,clientY:G,currentTarget:z}=Q,de=z.getBoundingClientRect();T.set({x:ie-de.left,y:G-de.top}),setTimeout(()=>T.set(null),600)},U=()=>{const Q=(Date.now()-P)/1e3;Ge.capture("meditation_exit",{duration_meditated:Q,total_taps:Ot(O).length,level:0}),y("complete",{clickTimestamps:Ot(O),durationMeditated:Q,completed:h-Q<5}),u()},$=()=>{console.log("Meditation complete! Click data:",Ot(O)),Ge.capture("meditation_completed",{duration:h,total_taps:Ot(O).length,level:0}),y("complete",{clickTimestamps:Ot(O),durationMeditated:h,completed:!0}),u()};function ae(Q){P=Q,l(1,P)}return d.$$set=Q=>{"nextStep"in Q&&l(9,u=Q.nextStep),"duration"in Q&&l(0,h=Q.duration)},[h,P,s,f,I,T,w,U,$,u,ae]}class Vo extends ct{constructor(o){super(),ft(this,o,Uo,Lo,lt,{nextStep:9,duration:0})}}function Yo(d){let o,l="You completed your meditation distraction-free!";return{c(){o=Z("p"),o.textContent=l,this.h()},l(s){o=J(s,"P",{class:!0,"data-svelte-h":!0}),De(o)!=="svelte-j87uf1"&&(o.textContent=l),this.h()},h(){F(o,"class","text-lg mt-4")},m(s,f){ne(s,o,f)},p:Ae,d(s){s&&N(o)}}}function Ho(d){let o,l,s=d[3](d[0].durationMeditated)+"",f,u,h,y,P=d[1]===1?"distraction":"distractions",I,O,T,w,U,$,ae,Q=Number(d[2])===1?"distraction":"distractions",re,ie;return{c(){o=Z("p"),l=ve("You meditated for "),f=ve(s),u=ve(" and recorded "),h=ve(d[1]),y=_e(),I=ve(P),O=ve("."),T=_e(),w=Z("p"),U=ve("That's about "),$=ve(d[2]),ae=_e(),re=ve(Q),ie=ve(" per minute."),this.h()},l(G){o=J(G,"P",{class:!0});var z=le(o);l=me(z,"You meditated for "),f=me(z,s),u=me(z," and recorded "),h=me(z,d[1]),y=be(z),I=me(z,P),O=me(z,"."),z.forEach(N),T=be(G),w=J(G,"P",{class:!0});var de=le(w);U=me(de,"That's about "),$=me(de,d[2]),ae=be(de),re=me(de,Q),ie=me(de," per minute."),de.forEach(N),this.h()},h(){F(o,"class","text-lg mt-4"),F(w,"class","text-lg mt-2")},m(G,z){ne(G,o,z),V(o,l),V(o,f),V(o,u),V(o,h),V(o,y),V(o,I),V(o,O),ne(G,T,z),ne(G,w,z),V(w,U),V(w,$),V(w,ae),V(w,re),V(w,ie)},p(G,z){z&1&&s!==(s=G[3](G[0].durationMeditated)+"")&&Ye(f,s)},d(G){G&&(N(o),N(T),N(w))}}}function Wo(d){let o,l,s="Great practice!",f,u,h,y,P="Share",I,O,T,w="Exit",U,$,ae=`<p>Learn to meditate for real at 
			<a href="https://www.dhamma.org" target="_blank" class="text-blue-500 underline">dhamma.org â</a></p> <p class="mt-2">This app was made by Arjun, PM with 5 years experience. 
			Hire him to build your 0-1 consumer products! 
			<a href="https://www.linkedin.com/in/arjunkalburgi" target="_blank" class="text-blue-500 underline">View LinkedIn â</a></p>`,Q,re;function ie(de,W){return de[0].clickTimestamps.length>0?Ho:Yo}let G=ie(d),z=G(d);return{c(){o=Z("div"),l=Z("h2"),l.textContent=s,f=_e(),z.c(),u=_e(),h=Z("div"),y=Z("button"),y.textContent=P,I=_e(),O=Z("div"),T=Z("button"),T.textContent=w,U=_e(),$=Z("div"),$.innerHTML=ae,this.h()},l(de){o=J(de,"DIV",{class:!0});var W=le(o);l=J(W,"H2",{class:!0,"data-svelte-h":!0}),De(l)!=="svelte-1untj5h"&&(l.textContent=s),f=be(W),z.l(W),u=be(W),h=J(W,"DIV",{class:!0});var te=le(h);y=J(te,"BUTTON",{class:!0,"data-svelte-h":!0}),De(y)!=="svelte-1wlydhx"&&(y.textContent=P),te.forEach(N),I=be(W),O=J(W,"DIV",{class:!0});var se=le(O);T=J(se,"BUTTON",{class:!0,"data-svelte-h":!0}),De(T)!=="svelte-1t5v3tb"&&(T.textContent=w),se.forEach(N),U=be(W),$=J(W,"DIV",{class:!0,"data-svelte-h":!0}),De($)!=="svelte-k92ud0"&&($.innerHTML=ae),W.forEach(N),this.h()},h(){F(l,"class","text-2xl font-bold"),F(y,"class","btn variant-filled px-4 py-2"),F(h,"class","mt-6 flex space-x-4"),F(T,"class","btn variant-outlined px-4 py-2"),F(O,"class","mt-6 flex space-x-4"),F($,"class","absolute bottom-6 text-center text-sm text-gray-500"),F(o,"class","w-full h-full flex flex-col justify-center items-center p-6")},m(de,W){ne(de,o,W),V(o,l),V(o,f),z.m(o,null),V(o,u),V(o,h),V(h,y),V(o,I),V(o,O),V(O,T),V(o,U),V(o,$),Q||(re=[Ze(y,"click",d[4]),Ze(T,"click",d[5])],Q=!0)},p(de,[W]){G===(G=ie(de))&&z?z.p(de,W):(z.d(1),z=G(de),z&&(z.c(),z.m(o,u)))},i:Ae,o:Ae,d(de){de&&N(o),z.d(),Q=!1,Ai(re)}}}function zo(d,o,l){let{closeModal:s}=o,{meditationResults:f}=o;const u=f.clickTimestamps.length,h=u>0?(u/(f.durationMeditated/60)).toFixed(1):"0",y=O=>{const T=Math.floor(O/60),w=O%60;return T===0?w+" second"+(w===1?"":"s"):T+" minute"+(T===1?"":"s")+(w>0?" and "+w+" second"+(w===1?"":"s"):"")},P=()=>{if(navigator.share){Ge.capture("results_shared",{total_taps:u,distractionRate:h,level:0});const O=`The Meditation Game App
I just finished a `+y(f.durationMeditated)+" meditation with "+u+` distractions.
That's about `+h+` distractions per minute.
Meditate here: https://www.arjunkalburgi.com/the-meditation-game/?utm_source=share`;navigator.share({text:O}).catch(T=>console.error("Sharing failed",T))}else console.log("Web Share API not supported")},I=()=>{Ge.capture("results_exit",{shared:navigator.share!==void 0}),s()};return d.$$set=O=>{"closeModal"in O&&l(6,s=O.closeModal),"meditationResults"in O&&l(0,f=O.meditationResults)},[f,u,h,y,P,I,s]}class Go extends ct{constructor(o){super(),ft(this,o,zo,Wo,lt,{closeModal:6,meditationResults:0})}}function xi(d){let o,l,s,f,u,h,y;const P=[Zo,Jo,Xo,Qo],I=[];function O(T,w){return T[3]===1?0:T[3]===2?1:T[3]===3?2:3}return s=O(d),f=I[s]=P[s](d),{c(){o=Z("div"),l=Z("div"),f.c(),this.h()},l(T){o=J(T,"DIV",{class:!0});var w=le(o);l=J(w,"DIV",{class:!0});var U=le(l);f.l(U),U.forEach(N),w.forEach(N),this.h()},h(){F(l,"class","fixed inset-0 bg-white flex flex-col items-center justify-center"),F(o,"class","fixed inset-0 flex items-center justify-center bg-black bg-opacity-50")},m(T,w){ne(T,o,w),V(o,l),I[s].m(l,null),y=!0},p(T,w){let U=s;s=O(T),s===U?I[s].p(T,w):(st(),xe(I[U],1,1,()=>{I[U]=null}),ut(),f=I[s],f?f.p(T,w):(f=I[s]=P[s](T),f.c()),ye(f,1),f.m(l,null))},i(T){y||(ye(f),T&&Ve(()=>{y&&(u||(u=Ee(l,Ce,{duration:500},!0)),u.run(1))}),T&&Ve(()=>{y&&(h||(h=Ee(o,Ce,{duration:500},!0)),h.run(1))}),y=!0)},o(T){xe(f),T&&(u||(u=Ee(l,Ce,{duration:500},!1)),u.run(0)),T&&(h||(h=Ee(o,Ce,{duration:500},!1)),h.run(0)),y=!1},d(T){T&&N(o),I[s].d(),T&&u&&u.end(),T&&h&&h.end()}}}function Qo(d){let o,l,s,f;return l=new Go({props:{closeModal:d[5],meditationResults:d[4]}}),{c(){o=Z("div"),mt(l.$$.fragment),this.h()},l(u){o=J(u,"DIV",{class:!0});var h=le(o);pt(l.$$.fragment,h),h.forEach(N),this.h()},h(){F(o,"class","absolute inset-0 flex flex-col")},m(u,h){ne(u,o,h),ht(l,o,null),f=!0},p(u,h){const y={};h&16&&(y.meditationResults=u[4]),l.$set(y)},i(u){f||(ye(l.$$.fragment,u),u&&Ve(()=>{f&&(s||(s=Ee(o,Ce,{duration:300},!0)),s.run(1))}),f=!0)},o(u){xe(l.$$.fragment,u),u&&(s||(s=Ee(o,Ce,{duration:300},!1)),s.run(0)),f=!1},d(u){u&&N(o),dt(l),u&&s&&s.end()}}}function Xo(d){let o,l,s,f;return l=new Vo({props:{duration:d[1],nextStep:d[7]}}),l.$on("complete",d[8]),{c(){o=Z("div"),mt(l.$$.fragment),this.h()},l(u){o=J(u,"DIV",{class:!0});var h=le(o);pt(l.$$.fragment,h),h.forEach(N),this.h()},h(){F(o,"class","absolute inset-0 flex flex-col")},m(u,h){ne(u,o,h),ht(l,o,null),f=!0},p(u,h){const y={};h&2&&(y.duration=u[1]),l.$set(y)},i(u){f||(ye(l.$$.fragment,u),u&&Ve(()=>{f&&(s||(s=Ee(o,Ce,{duration:300},!0)),s.run(1))}),f=!0)},o(u){xe(l.$$.fragment,u),u&&(s||(s=Ee(o,Ce,{duration:300},!1)),s.run(0)),f=!1},d(u){u&&N(o),dt(l),u&&s&&s.end()}}}function Jo(d){let o,l,s,f;return l=new Ro({props:{nextStep:d[7],closeModal:d[5]}}),{c(){o=Z("div"),mt(l.$$.fragment),this.h()},l(u){o=J(u,"DIV",{class:!0});var h=le(o);pt(l.$$.fragment,h),h.forEach(N),this.h()},h(){F(o,"class","absolute inset-0 flex flex-col")},m(u,h){ne(u,o,h),ht(l,o,null),f=!0},p:Ae,i(u){f||(ye(l.$$.fragment,u),u&&Ve(()=>{f&&(s||(s=Ee(o,Ce,{duration:300},!0)),s.run(1))}),f=!0)},o(u){xe(l.$$.fragment,u),u&&(s||(s=Ee(o,Ce,{duration:300},!1)),s.run(0)),f=!1},d(u){u&&N(o),dt(l),u&&s&&s.end()}}}function Zo(d){let o,l,s,f;return l=new Oo({props:{nextStep:d[7],duration:d[1],closeModal:d[5],levelId:d[2]}}),{c(){o=Z("div"),mt(l.$$.fragment),this.h()},l(u){o=J(u,"DIV",{class:!0});var h=le(o);pt(l.$$.fragment,h),h.forEach(N),this.h()},h(){F(o,"class","absolute inset-0 flex flex-col")},m(u,h){ne(u,o,h),ht(l,o,null),f=!0},p(u,h){const y={};h&2&&(y.duration=u[1]),h&4&&(y.levelId=u[2]),l.$set(y)},i(u){f||(ye(l.$$.fragment,u),u&&Ve(()=>{f&&(s||(s=Ee(o,Ce,{duration:300},!0)),s.run(1))}),f=!0)},o(u){xe(l.$$.fragment,u),u&&(s||(s=Ee(o,Ce,{duration:300},!1)),s.run(0)),f=!1},d(u){u&&N(o),dt(l),u&&s&&s.end()}}}function $o(d){let o,l,s=d[0]&&xi(d);return{c(){s&&s.c(),o=qn()},l(f){s&&s.l(f),o=qn()},m(f,u){s&&s.m(f,u),ne(f,o,u),l=!0},p(f,[u]){f[0]?s?(s.p(f,u),u&1&&ye(s,1)):(s=xi(f),s.c(),ye(s,1),s.m(o.parentNode,o)):s&&(st(),xe(s,1,1,()=>{s=null}),ut())},i(f){l||(ye(s),l=!0)},o(f){xe(s),l=!1},d(f){f&&N(o),s&&s.d(f)}}}function ea(d,o,l){let{show:s=!1}=o,{duration:f=Ue.ONE_MINUTE}=o,{levelId:u=null}=o,h=1,y;const P=()=>{l(0,s=!1),l(3,h=1)},I=async w=>{const{clickTimestamps:U,durationMeditated:$,completed:ae}=w.detail;await Fe.sessions.add({levelId:u||"L1",duration:$,tapCount:U.length,tapTimestamps:U,timestamp:Date.now(),completed:ae}),l(4,y=w.detail),O()},O=()=>setTimeout(()=>l(3,h++,h),300),T=w=>I(w);return d.$$set=w=>{"show"in w&&l(0,s=w.show),"duration"in w&&l(1,f=w.duration),"levelId"in w&&l(2,u=w.levelId)},[s,f,u,h,y,P,I,O,T]}class ta extends ct{constructor(o){super(),ft(this,o,ea,$o,lt,{show:0,duration:1,levelId:2})}}function Ei(d,o,l){const s=d.slice();return s[6]=o[l],s}function Ci(d){let o,l=Tr[d[6]]+"",s;return{c(){o=Z("option"),s=ve(l),this.h()},l(f){o=J(f,"OPTION",{});var u=le(o);s=me(u,l),u.forEach(N),this.h()},h(){o.__value=d[6],xo(o,o.__value)},m(f,u){ne(f,o,u),V(o,s)},p:Ae,d(f){f&&N(o)}}}function na(d){let o,l,s="Select Meditation Duration",f,u,h,y,P=Lt(d[2]),I=[];for(let O=0;O<P.length;O+=1)I[O]=Ci(Ei(d,P,O));return{c(){o=Z("div"),l=Z("label"),l.textContent=s,f=_e(),u=Z("select");for(let O=0;O<I.length;O+=1)I[O].c();this.h()},l(O){o=J(O,"DIV",{class:!0});var T=le(o);l=J(T,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),De(l)!=="svelte-1c6041l"&&(l.textContent=s),f=be(T),u=J(T,"SELECT",{id:!0,class:!0});var w=le(u);for(let U=0;U<I.length;U+=1)I[U].l(w);w.forEach(N),T.forEach(N),this.h()},h(){F(l,"for","duration"),F(l,"class","text-lg font-medium"),F(u,"id","duration"),F(u,"class","select select-bordered w-full max-w-xs"),F(o,"class","flex flex-col items-center gap-4")},m(O,T){ne(O,o,T),V(o,l),V(o,f),V(o,u);for(let w=0;w<I.length;w+=1)I[w]&&I[w].m(u,null);pi(u,d[0]),h||(y=Ze(u,"change",d[5]),h=!0)},p(O,[T]){if(T&4){P=Lt(O[2]);let w;for(w=0;w<P.length;w+=1){const U=Ei(O,P,w);I[w]?I[w].p(U,T):(I[w]=Ci(U),I[w].c(),I[w].m(u,null))}for(;w<I.length;w+=1)I[w].d(1);I.length=P.length}T&5&&pi(u,O[0])},i:Ae,o:Ae,d(O){O&&N(o),Sr(I,O),h=!1,y()}}}function ra(d,o,l){let{selectedDuration:s}=o,{onDurationChange:f}=o,{minDuration:u=Ue.ONE_MINUTE}=o,{maxDuration:h=Ue.SIXTY_MINUTES}=o;const y=Object.values(Ue).filter(I=>typeof I=="number").filter(I=>I>=u&&I<=h),P=I=>f(Number(I.currentTarget.value));return d.$$set=I=>{"selectedDuration"in I&&l(0,s=I.selectedDuration),"onDurationChange"in I&&l(1,f=I.onDurationChange),"minDuration"in I&&l(3,u=I.minDuration),"maxDuration"in I&&l(4,h=I.maxDuration)},[s,f,y,u,h,P]}class ia extends ct{constructor(o){super(),ft(this,o,ra,na,lt,{selectedDuration:0,onDurationChange:1,minDuration:3,maxDuration:4})}}async function rn(d){if(d.includes("COUNT(*)")&&d.includes("levelId = 'L1'"))return await Fe.sessions.where("levelId").equals("L1").count();if(d.includes("COUNT(*)")&&d.includes("levelId = 'L2'"))return await Fe.sessions.where("levelId").equals("L2").count();if(d.includes("COUNT(*)")&&d.includes("levelId = 'L3'")&&d.includes("tapCount <= 3"))return await Fe.sessions.where("levelId").equals("L3").filter(o=>o.tapCount<=3).count();if(d.includes("AVG(tapCount)")&&d.includes("levelId = 'L1'")){const o=await Fe.sessions.where("levelId").equals("L1").toArray();return o.length===0?0:o.reduce((l,s)=>l+s.tapCount,0)/o.length}if(d.includes("AVG(tapCount)")&&d.includes("levelId = 'L2'")){const o=await Fe.sessions.where("levelId").equals("L2").toArray();return o.length===0?0:o.reduce((l,s)=>l+s.tapCount,0)/o.length}return null}async function oa(){const d=await rn("SELECT COUNT(*) as l1_session_count FROM sessions WHERE levelId = 'L1'"),o=await rn("SELECT COUNT(*) as l2_session_count FROM sessions WHERE levelId = 'L2'"),l=await rn("SELECT AVG(tapCount) as l1_avg_taps FROM sessions WHERE levelId = 'L1'"),s=await rn("SELECT AVG(tapCount) as l2_avg_taps FROM sessions WHERE levelId = 'L2'");return d>=3&&o>=3&&s<l*.9}async function aa(){return await rn("SELECT COUNT(*) as successful_l3_count FROM sessions WHERE levelId = 'L3' AND tapCount <= 3")>=2}async function sa(){const d=await Fe.sessions.where("levelId").equals("L1").toArray(),o={level:Nn[0],isUnlocked:!0,progress:{sessionsCompleted:d.length,requiredSessions:2}},l=await Fe.sessions.where("levelId").equals("L2").toArray(),s=d.length>0?d.reduce((T,w)=>T+w.tapCount,0)/d.length:0,f=l.length>0?l.reduce((T,w)=>T+w.tapCount,0)/l.length:1/0,u=await oa(),h={level:Nn[1],isUnlocked:u,progress:{sessionsCompleted:l.length,requiredSessions:3,improvementNeeded:l.length>=3?s*.9-f:void 0}},P=(await Fe.sessions.where("levelId").equals("L3").toArray()).filter(T=>T.tapCount<=3),I=await aa(),O={level:Nn[2],isUnlocked:I,progress:{sessionsCompleted:P.length,requiredSessions:2}};return[o,h,O]}function Ti(d,o,l){const s=d.slice();return s[9]=o[l].level,s[10]=o[l].isUnlocked,s[11]=o[l].progress,s}function ua(d){let o,l,s=Lt(d[3]),f=[];for(let h=0;h<s.length;h+=1)f[h]=Oi(Ti(d,s,h));const u=h=>xe(f[h],1,1,()=>{f[h]=null});return{c(){o=Z("div");for(let h=0;h<f.length;h+=1)f[h].c();this.h()},l(h){o=J(h,"DIV",{class:!0});var y=le(o);for(let P=0;P<f.length;P+=1)f[P].l(y);y.forEach(N),this.h()},h(){F(o,"class","flex flex-col gap-6 mt-8 mb-40")},m(h,y){ne(h,o,y);for(let P=0;P<f.length;P+=1)f[P]&&f[P].m(o,null);l=!0},p(h,y){if(y&46){s=Lt(h[3]);let P;for(P=0;P<s.length;P+=1){const I=Ti(h,s,P);f[P]?(f[P].p(I,y),ye(f[P],1)):(f[P]=Oi(I),f[P].c(),ye(f[P],1),f[P].m(o,null))}for(st(),P=s.length;P<f.length;P+=1)u(P);ut()}},i(h){if(!l){for(let y=0;y<s.length;y+=1)ye(f[y]);l=!0}},o(h){f=f.filter(Boolean);for(let y=0;y<f.length;y+=1)xe(f[y]);l=!1},d(h){h&&N(o),Sr(f,h)}}}function la(d){let o,l='<div class="loading loading-spinner loading-lg"></div>';return{c(){o=Z("div"),o.innerHTML=l,this.h()},l(s){o=J(s,"DIV",{class:!0,"data-svelte-h":!0}),De(o)!=="svelte-1mgfhb9"&&(o.innerHTML=l),this.h()},h(){F(o,"class","flex justify-center items-center mt-8")},m(s,f){ne(s,o,f)},p:Ae,i:Ae,o:Ae,d(s){s&&N(o)}}}function Ii(d){let o,l="ð";return{c(){o=Z("span"),o.textContent=l,this.h()},l(s){o=J(s,"SPAN",{class:!0,"data-svelte-h":!0}),De(o)!=="svelte-19hy9gc"&&(o.textContent=l),this.h()},h(){F(o,"class","text-2xl")},m(s,f){ne(s,o,f)},d(s){s&&N(o)}}}function ca(d){let o,l,s;function f(P,I){return P[11]?ha:da}let u=f(d),h=u(d),y=d[11]&&Si(d);return{c(){o=Z("div"),l=Z("p"),h.c(),s=_e(),y&&y.c(),this.h()},l(P){o=J(P,"DIV",{class:!0});var I=le(o);l=J(I,"P",{class:!0});var O=le(l);h.l(O),O.forEach(N),s=be(I),y&&y.l(I),I.forEach(N),this.h()},h(){F(l,"class","text-sm text-gray-500"),F(o,"class","space-y-4")},m(P,I){ne(P,o,I),V(o,l),h.m(l,null),V(o,s),y&&y.m(o,null)},p(P,I){u===(u=f(P))&&h?h.p(P,I):(h.d(1),h=u(P),h&&(h.c(),h.m(l,null))),P[11]?y?y.p(P,I):(y=Si(P),y.c(),y.m(o,null)):y&&(y.d(1),y=null)},i:Ae,o:Ae,d(P){P&&N(o),h.d(),y&&y.d()}}}function fa(d){let o,l,s,f,u="Start meditation",h,y,P;l=new ia({props:{selectedDuration:d[1],onDurationChange:d[6],minDuration:d[9].minDuration,maxDuration:d[9].maxDuration}});function I(){return d[7](d[9])}return{c(){o=Z("div"),mt(l.$$.fragment),s=_e(),f=Z("button"),f.textContent=u,this.h()},l(O){o=J(O,"DIV",{class:!0});var T=le(o);pt(l.$$.fragment,T),s=be(T),f=J(T,"BUTTON",{class:!0,"data-svelte-h":!0}),De(f)!=="svelte-170hbv2"&&(f.textContent=u),T.forEach(N),this.h()},h(){F(f,"class","btn variant-filled w-full"),F(o,"class","space-y-6")},m(O,T){ne(O,o,T),ht(l,o,null),V(o,s),V(o,f),h=!0,y||(P=Ze(f,"click",I),y=!0)},p(O,T){d=O;const w={};T&2&&(w.selectedDuration=d[1]),T&2&&(w.onDurationChange=d[6]),T&8&&(w.minDuration=d[9].minDuration),T&8&&(w.maxDuration=d[9].maxDuration),l.$set(w)},i(O){h||(ye(l.$$.fragment,O),h=!0)},o(O){xe(l.$$.fragment,O),h=!1},d(O){O&&N(o),dt(l),y=!1,P()}}}function da(d){let o;return{c(){o=ve("Complete previous levels to unlock")},l(l){o=me(l,"Complete previous levels to unlock")},m(l,s){ne(l,o,s)},p:Ae,d(l){l&&N(o)}}}function ha(d){let o;function l(u,h){return u[11].improvementNeeded?ma:pa}let s=l(d),f=s(d);return{c(){f.c(),o=qn()},l(u){f.l(u),o=qn()},m(u,h){f.m(u,h),ne(u,o,h)},p(u,h){s===(s=l(u))&&f?f.p(u,h):(f.d(1),f=s(u),f&&(f.c(),f.m(o.parentNode,o)))},d(u){u&&N(o),f.d(u)}}}function pa(d){let o,l=d[11].requiredSessions-d[11].sessionsCompleted+"",s,f;return{c(){o=ve("Complete "),s=ve(l),f=ve(" more sessions to unlock")},l(u){o=me(u,"Complete "),s=me(u,l),f=me(u," more sessions to unlock")},m(u,h){ne(u,o,h),ne(u,s,h),ne(u,f,h)},p(u,h){h&8&&l!==(l=u[11].requiredSessions-u[11].sessionsCompleted+"")&&Ye(s,l)},d(u){u&&(N(o),N(s),N(f))}}}function ma(d){let o,l=d[11].improvementNeeded.toFixed(1)+"",s,f;return{c(){o=ve("Improve by "),s=ve(l),f=ve(" taps to unlock")},l(u){o=me(u,"Improve by "),s=me(u,l),f=me(u," taps to unlock")},m(u,h){ne(u,o,h),ne(u,s,h),ne(u,f,h)},p(u,h){h&8&&l!==(l=u[11].improvementNeeded.toFixed(1)+"")&&Ye(s,l)},d(u){u&&(N(o),N(s),N(f))}}}function Si(d){let o,l,s,f,u=d[11].sessionsCompleted+"",h,y,P=d[11].requiredSessions+"",I,O;return{c(){o=Z("div"),l=Z("div"),s=_e(),f=Z("p"),h=ve(u),y=ve("/"),I=ve(P),O=ve(" sessions"),this.h()},l(T){o=J(T,"DIV",{class:!0});var w=le(o);l=J(w,"DIV",{class:!0,style:!0}),le(l).forEach(N),w.forEach(N),s=be(T),f=J(T,"P",{class:!0});var U=le(f);h=me(U,u),y=me(U,"/"),I=me(U,P),O=me(U," sessions"),U.forEach(N),this.h()},h(){F(l,"class","bg-blue-600 h-2.5 rounded-full"),Ft(l,"width",d[11].sessionsCompleted/d[11].requiredSessions*100+"%"),F(o,"class","w-full bg-gray-200 rounded-full h-2.5"),F(f,"class","text-xs text-gray-500 text-right")},m(T,w){ne(T,o,w),V(o,l),ne(T,s,w),ne(T,f,w),V(f,h),V(f,y),V(f,I),V(f,O)},p(T,w){w&8&&Ft(l,"width",T[11].sessionsCompleted/T[11].requiredSessions*100+"%"),w&8&&u!==(u=T[11].sessionsCompleted+"")&&Ye(h,u),w&8&&P!==(P=T[11].requiredSessions+"")&&Ye(I,P)},d(T){T&&(N(o),N(s),N(f))}}}function Oi(d){let o,l,s,f,u=d[9].name+"",h,y,P,I=d[9].description+"",O,T,w,U,$,ae,Q,re,ie=!d[10]&&Ii();const G=[fa,ca],z=[];function de(W,te){return W[10]?0:1}return U=de(d),$=z[U]=G[U](d),{c(){o=Z("div"),l=Z("div"),s=Z("div"),f=Z("h3"),h=ve(u),y=_e(),P=Z("p"),O=ve(I),T=_e(),ie&&ie.c(),w=_e(),$.c(),ae=_e(),this.h()},l(W){o=J(W,"DIV",{class:!0});var te=le(o);l=J(te,"DIV",{class:!0});var se=le(l);s=J(se,"DIV",{class:!0});var Te=le(s);f=J(Te,"H3",{class:!0});var Ke=le(f);h=me(Ke,u),Ke.forEach(N),y=be(Te),P=J(Te,"P",{class:!0});var $e=le(P);O=me($e,I),$e.forEach(N),Te.forEach(N),T=be(se),ie&&ie.l(se),se.forEach(N),w=be(te),$.l(te),ae=be(te),te.forEach(N),this.h()},h(){F(f,"class","text-xl font-bold"),F(P,"class","text-sm text-gray-600"),F(s,"class","space-y-3"),F(l,"class","flex justify-between items-start mb-8"),F(o,"class",Q="card p-8 "+(d[10]?"":"opacity-50"))},m(W,te){ne(W,o,te),V(o,l),V(l,s),V(s,f),V(f,h),V(s,y),V(s,P),V(P,O),V(l,T),ie&&ie.m(l,null),V(o,w),z[U].m(o,null),V(o,ae),re=!0},p(W,te){(!re||te&8)&&u!==(u=W[9].name+"")&&Ye(h,u),(!re||te&8)&&I!==(I=W[9].description+"")&&Ye(O,I),W[10]?ie&&(ie.d(1),ie=null):ie||(ie=Ii(),ie.c(),ie.m(l,null));let se=U;U=de(W),U===se?z[U].p(W,te):(st(),xe(z[se],1,1,()=>{z[se]=null}),ut(),$=z[U],$?$.p(W,te):($=z[U]=G[U](W),$.c()),ye($,1),$.m(o,ae)),(!re||te&8&&Q!==(Q="card p-8 "+(W[10]?"":"opacity-50")))&&F(o,"class",Q)},i(W){re||(ye($),re=!0)},o(W){xe($),re=!1},d(W){W&&N(o),ie&&ie.d(),z[U].d()}}}function va(d){let o,l,s='<h2 class="h2">Welcome to The Meditation Game!</h2> <p>Learn how to meditate through gameplay</p>',f,u,h,y,P,I=`<p>Learn to meditate for real at 
			<a href="https://www.dhamma.org" target="_blank" class="text-blue-500 underline">dhamma.org â</a></p> <p class="mt-2">This app was made by Arjun Kalburgi, PM with 5 years experience. 
			Hire him to build your 0-1 consumer products! 
			<a href="https://www.linkedin.com/in/arjunkalburgi" target="_blank" class="text-blue-500 underline">View LinkedIn â</a></p>`,O,T,w,U;const $=[la,ua],ae=[];function Q(G,z){return G[4]?0:1}u=Q(d),h=ae[u]=$[u](d);function re(G){d[8](G)}let ie={duration:d[1],levelId:d[2]};return d[0]!==void 0&&(ie.show=d[0]),T=new ta({props:ie}),Or.push(()=>Dr(T,"show",re)),{c(){o=Z("div"),l=Z("div"),l.innerHTML=s,f=_e(),h.c(),y=_e(),P=Z("div"),P.innerHTML=I,O=_e(),mt(T.$$.fragment),this.h()},l(G){o=J(G,"DIV",{class:!0});var z=le(o);l=J(z,"DIV",{class:!0,"data-svelte-h":!0}),De(l)!=="svelte-age6tx"&&(l.innerHTML=s),f=be(z),h.l(z),y=be(z),P=J(z,"DIV",{class:!0,"data-svelte-h":!0}),De(P)!=="svelte-1iyjdy7"&&(P.innerHTML=I),z.forEach(N),O=be(G),pt(T.$$.fragment,G),this.h()},h(){F(l,"class","space-y-6 text-center"),F(P,"class","absolute bottom-6 text-center text-sm text-gray-500"),F(o,"class","container h-full mx-auto flex flex-col p-6 svelte-v1my5k")},m(G,z){ne(G,o,z),V(o,l),V(o,f),ae[u].m(o,null),V(o,y),V(o,P),ne(G,O,z),ht(T,G,z),U=!0},p(G,[z]){let de=u;u=Q(G),u===de?ae[u].p(G,z):(st(),xe(ae[de],1,1,()=>{ae[de]=null}),ut(),h=ae[u],h?h.p(G,z):(h=ae[u]=$[u](G),h.c()),ye(h,1),h.m(o,y));const W={};z&2&&(W.duration=G[1]),z&4&&(W.levelId=G[2]),!w&&z&1&&(w=!0,W.show=G[0],Pr(()=>w=!1)),T.$set(W)},i(G){U||(ye(h),ye(T.$$.fragment,G),U=!0)},o(G){xe(h),xe(T.$$.fragment,G),U=!1},d(G){G&&(N(o),N(O)),ae[u].d(),dt(T,G)}}}function ya(d,o,l){let s=!1,f=Ue.ONE_MINUTE,u=null,h=[],y=!0;const P=()=>{window.audioContext||(window.audioContext=new(window.AudioContext||window.webkitAudioContext)),l(0,s=!0)},I=w=>l(1,f=w),O=w=>{l(2,u=w.id),P()};function T(w){s=w,l(0,s)}return d.$$.update=()=>{d.$$.dirty&1&&(s||(l(4,y=!0),sa().then(w=>{l(3,h=w),l(4,y=!1)}).catch(w=>{console.error("Failed to reload level statuses:",w),l(4,y=!1)})))},[s,f,u,h,y,P,I,O,T]}class Ka extends ct{constructor(o){super(),ft(this,o,ya,va,lt,{})}}export{Ka as component};
